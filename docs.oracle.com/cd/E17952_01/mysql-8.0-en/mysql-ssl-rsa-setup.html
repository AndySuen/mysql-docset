<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="programs-installation.html" title="4.4 Installation-Related Programs" /><link rel="prev" href="mysql-secure-installation.html" title="4.4.2 mysql_secure_installation — Improve MySQL Installation Security" /><link rel="next" href="mysql-tzinfo-to-sql.html" title="4.4.4 mysql_tzinfo_to_sql — Load the Time Zone Tables" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-ssl-rsa-setup.html#mysql-ssl-rsa-setup">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="mysql-secure-installation.html">Previous <span class="navHint"> mysql_secure_installation — Improve MySQL Installation Security </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="programs-installation.html">Up <span class="navHint"> Installation-Related Programs </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="mysql-tzinfo-to-sql.html">Next <span class="navHint"> mysql_tzinfo_to_sql — Load the Time Zone Tables </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql-ssl-rsa-setup"></a>4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files</h3></div></div></div><a id="idm45829046145056" class="indexterm"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> is deprecated as of
          MySQL 8.0.34. Instead, consider using MySQL server to generate
          missing SSL and RSA files automatically at startup (see
          <a class="xref" href="creating-ssl-rsa-files-using-mysql.html#creating-ssl-rsa-files-using-mysql-automatic" title="Automatic SSL and RSA File Generation">Automatic SSL and RSA File Generation</a>).
        </p></div><p>
        This program creates the SSL certificate and key files and RSA
        key-pair files required to support secure connections using SSL
        and secure password exchange using RSA over unencrypted
        connections, if those files are missing.
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> can also be used to
        create new SSL files if the existing ones have expired.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> uses the
          <span class="command"><strong>openssl</strong></span> command, so its use is contingent
          on having OpenSSL installed on your machine.
        </p><p>
          Another way to generate SSL and RSA files, for MySQL
          distributions compiled using OpenSSL, is to have the server
          generate them automatically. See
          <a class="xref" href="creating-ssl-rsa-files-using-mysql.html" title="6.3.3.1 Creating SSL and RSA Certificates and Keys using MySQL">Section 6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
        </p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> helps lower the barrier
          to using SSL by making it easier to generate the required
          files. However, certificates generated by
          <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> are self-signed, which
          is not very secure. After you gain experience using the files
          created by <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>, consider
          obtaining a CA certificate from a registered certificate
          authority.
        </p></div><p>
        Invoke <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> like this:
      </p><pre class="programlisting">mysql_ssl_rsa_setup [<em class="replaceable"><code>options</code></em>]
</pre><p>
        Typical options are
        <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir"><code class="option">--datadir</code></a> to specify
        where to create the files, and
        <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_verbose"><code class="option">--verbose</code></a> to see the
        <span class="command"><strong>openssl</strong></span> commands that
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> executes.
      </p><p>
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> attempts to create SSL
        and RSA files using a default set of file names. It works as
        follows:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> checks for the
            <span class="command"><strong>openssl</strong></span> binary at the locations specified
            by the <code class="literal">PATH</code> environment variable. If
            <span class="command"><strong>openssl</strong></span> is not found,
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> does nothing. If
            <span class="command"><strong>openssl</strong></span> is present,
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> looks for default SSL
            and RSA files in the MySQL data directory specified by the
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir"><code class="option">--datadir</code></a>
            option, or the compiled-in data directory if the
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir"><code class="option">--datadir</code></a> option
            is not given.
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> checks the data
            directory for SSL files with the following names:
          </p><pre class="programlisting">ca.pem
server-cert.pem
server-key.pem
</pre></li><li class="listitem"><p>
            If any of those files are present,
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> creates no SSL files.
            Otherwise, it invokes <span class="command"><strong>openssl</strong></span> to create
            them, plus some additional files:
          </p><pre class="programlisting">ca.pem               Self-signed CA certificate
ca-key.pem           CA private key
server-cert.pem      Server certificate
server-key.pem       Server private key
client-cert.pem      Client certificate
client-key.pem       Client private key
</pre><p>
            These files enable secure client connections using SSL; see
            <a class="xref" href="using-encrypted-connections.html" title="6.3.1 Configuring MySQL to Use Encrypted Connections">Section 6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
          </p></li><li class="listitem"><p>
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> checks the data
            directory for RSA files with the following names:
          </p><pre class="programlisting">private_key.pem      Private member of private/public key pair
public_key.pem       Public member of private/public key pair
</pre></li><li class="listitem"><p>
            If any of these files are present,
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> creates no RSA files.
            Otherwise, it invokes <span class="command"><strong>openssl</strong></span> to create
            them. These files enable secure password exchange using RSA
            over unencrypted connections for accounts authenticated by
            the <code class="literal">sha256_password</code> or
            <code class="literal">caching_sha2_password</code> plugin; see
            <a class="xref" href="sha256-pluggable-authentication.html" title="6.4.1.3 SHA-256 Pluggable Authentication">Section 6.4.1.3, “SHA-256 Pluggable Authentication”</a>, and
            <a class="xref" href="caching-sha2-pluggable-authentication.html" title="6.4.1.2 Caching SHA-2 Pluggable Authentication">Section 6.4.1.2, “Caching SHA-2 Pluggable Authentication”</a>.
          </p></li></ol></div><p>
        For information about the characteristics of files created by
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>, see
        <a class="xref" href="creating-ssl-rsa-files-using-mysql.html" title="6.3.3.1 Creating SSL and RSA Certificates and Keys using MySQL">Section 6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
      </p><p>
        At startup, the MySQL server automatically uses the SSL files
        created by <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> to enable SSL
        if no explicit SSL options are given other than
        <a class="link" href="server-options.html#option_mysqld_ssl"><code class="option">--ssl</code></a> (possibly along with
        <a class="link" href="server-system-variables.html#sysvar_ssl_cipher"><code class="literal">ssl_cipher</code></a>). If you prefer to
        designate the files explicitly, invoke clients with the
        <a class="link" href="connection-options.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>,
        <a class="link" href="connection-options.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>, and
        <a class="link" href="connection-options.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> options at startup to
        name the <code class="filename">ca.pem</code>,
        <code class="filename">server-cert.pem</code>, and
        <code class="filename">server-key.pem</code> files, respectively.
      </p><p>
        The server also automatically uses the RSA files created by
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> to enable RSA if no
        explicit RSA options are given.
      </p><p>
        If the server is SSL-enabled, clients use SSL by default for the
        connection. To specify certificate and key files explicitly, use
        the <a class="link" href="connection-options.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>,
        <a class="link" href="connection-options.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>, and
        <a class="link" href="connection-options.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> options to name the
        <code class="filename">ca.pem</code>,
        <code class="filename">client-cert.pem</code>, and
        <code class="filename">client-key.pem</code> files, respectively.
        However, some additional client setup may be required first
        because <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> by default
        creates those files in the data directory. The permissions for
        the data directory normally enable access only to the system
        account that runs the MySQL server, so client programs cannot
        use files located there. To make the files available, copy them
        to a directory that is readable (but <span class="emphasis"><em>not</em></span>
        writable) by clients:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            For local clients, the MySQL installation directory can be
            used. For example, if the data directory is a subdirectory
            of the installation directory and your current location is
            the data directory, you can copy the files like this:
          </p><pre class="programlisting">cp ca.pem client-cert.pem client-key.pem ..
</pre></li><li class="listitem"><p>
            For remote clients, distribute the files using a secure
            channel to ensure they are not tampered with during transit.
          </p></li></ul></div><p>
        If the SSL files used for a MySQL installation have expired, you
        can use <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> to create new
        ones:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Stop the server.
          </p></li><li class="listitem"><p>
            Rename or remove the existing SSL files. You may wish to
            make a backup of them first. (The RSA files do not expire,
            so you need not remove them.
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> can see that they
            exist and does not overwrite them.)
          </p></li><li class="listitem"><p>
            Run <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> with the
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir"><code class="option">--datadir</code></a> option
            to specify where to create the new files.
          </p></li><li class="listitem"><p>
            Restart the server.
          </p></li></ol></div><p>
        <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> supports the following
        command-line options, which can be specified on the command line
        or in the <code class="literal">[mysql_ssl_rsa_setup]</code> and
        <code class="literal">[mysqld]</code> groups of an option file. For
        information about option files used by MySQL programs, see
        <a class="xref" href="option-files.html" title="4.2.2.2 Using Option Files">Section 4.2.2.2, “Using Option Files”</a>.
      </p><div class="table"><a id="idm45829046054720"></a><p class="title"><strong>Table 4.9 mysql_ssl_rsa_setup Options</strong></p><div class="table-contents"><table frame="box" rules="all" summary="Command-line options available for mysql_ssl_rsa_setup."><col style="width: 31%" /><col style="width: 56%" /><col style="width: 12%" /><thead><tr><th scope="col">Option Name</th>
<th scope="col">Description</th>
<th scope="col">Deprecated</th>
</tr></thead><tbody><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir">--datadir</a></th>
<td>Path to data directory</td>
<td>8.0.34</td>
</tr><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_help">--help</a></th>
<td>Display help message and exit</td>
<td>8.0.34</td>
</tr><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_suffix">--suffix</a></th>
<td>Suffix for X.509 certificate Common Name attribute</td>
<td>8.0.34</td>
</tr><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_uid">--uid</a></th>
<td>Name of effective user to use for file permissions</td>
<td>8.0.34</td>
</tr><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_verbose">--verbose</a></th>
<td>Verbose mode</td>
<td>8.0.34</td>
</tr><tr><th scope="row"><a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_version">--version</a></th>
<td>Display version information and exit</td>
<td>8.0.34</td>
</tr></tbody></table></div></div><br class="table-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_help"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_help"><code class="option">--help</code></a>,
            <code class="option">?</code>
          </p><a id="idm45829046020496" class="indexterm"></a><a id="idm45829046019008" class="indexterm"></a><p>
            Display a help message and exit.
          </p></li><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_datadir"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_datadir"><code class="option">--datadir=<em class="replaceable"><code>dir_name</code></em></code></a>
          </p><a id="idm45829046014576" class="indexterm"></a><a id="idm45829046013088" class="indexterm"></a><p>
            The path to the directory that
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> should check for
            default SSL and RSA files and in which it should create
            files if they are missing. The default is the compiled-in
            data directory.
          </p></li><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_suffix"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_suffix"><code class="option">--suffix=<em class="replaceable"><code>str</code></em></code></a>
          </p><a id="idm45829046007280" class="indexterm"></a><a id="idm45829046005792" class="indexterm"></a><p>
            The suffix for the Common Name attribute in X.509
            certificates. The suffix value is limited to 17 characters.
            The default is based on the MySQL version number.
          </p></li><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_uid"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_uid"><code class="option">--uid=name</code></a>,
            <code class="option">-v</code>
          </p><a id="idm45829046001088" class="indexterm"></a><a id="idm45829045999600" class="indexterm"></a><p>
            The name of the user who should be the owner of any created
            files. The value is a user name, not a numeric user ID. In
            the absence of this option, files created by
            <a class="link" href="mysql-ssl-rsa-setup.html" title="4.4.3 mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> are owned by the user
            who executes it. This option is valid only if you execute
            the program as <code class="literal">root</code> on a system that
            supports the <code class="literal">chown()</code> system call.
          </p></li><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_verbose"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_verbose"><code class="option">--verbose</code></a>,
            <code class="option">-v</code>
          </p><a id="idm45829045992064" class="indexterm"></a><a id="idm45829045990576" class="indexterm"></a><p>
            Verbose mode. Produce more output about what the program
            does. For example, the program shows the
            <span class="command"><strong>openssl</strong></span> commands it runs, and produces
            output to indicate whether it skips SSL or RSA file creation
            because some default file already exists.
          </p></li><li class="listitem"><p><a id="option_mysql_ssl_rsa_setup_version"></a>
            <a class="link" href="mysql-ssl-rsa-setup.html#option_mysql_ssl_rsa_setup_version"><code class="option">--version</code></a>,
            <code class="option">-V</code>
          </p><a id="idm45829045985072" class="indexterm"></a><a id="idm45829045983584" class="indexterm"></a><p>
            Display version information and exit.
          </p></li></ul></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-secure-installation.html">Previous <span class="navHint"> mysql_secure_installation — Improve MySQL Installation Security </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="programs-installation.html">Up <span class="navHint"> Installation-Related Programs </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysql-tzinfo-to-sql.html">Next <span class="navHint"> mysql_tzinfo_to_sql — Load the Time Zone Tables </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>