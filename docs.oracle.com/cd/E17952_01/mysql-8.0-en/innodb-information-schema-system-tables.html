<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.15.3 InnoDB INFORMATION_SCHEMA Schema Object Tables</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="innodb-information-schema.html" title="15.15 InnoDB INFORMATION_SCHEMA Tables" /><link rel="prev" href="innodb-information-schema-internal-data.html" title="15.15.2.3 Persistence and Consistency of InnoDB Transaction and Locking Information" /><link rel="next" href="innodb-information-schema-fulltext_index-tables.html" title="15.15.4 InnoDB INFORMATION_SCHEMA FULLTEXT Index Tables" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="innodb-information-schema-system-tables.html#innodb-information-schema-system-tables">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="innodb-information-schema-internal-data.html">Previous <span class="navHint"> Persistence and Consistency of InnoDB Transaction and Locking
        Information </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="innodb-information-schema.html">Up <span class="navHint"> InnoDB INFORMATION_SCHEMA Tables </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="innodb-information-schema-fulltext_index-tables.html">Next <span class="navHint"> InnoDB INFORMATION_SCHEMA FULLTEXT Index Tables </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="innodb-information-schema-system-tables"></a>15.15.3 InnoDB INFORMATION_SCHEMA Schema Object Tables</h3></div></div></div><p>
      You can extract metadata about schema objects managed by
      <code class="literal">InnoDB</code> using <code class="literal">InnoDB</code>
      <code class="literal">INFORMATION_SCHEMA</code> tables. This information
      comes from the data dictionary. Traditionally, you would get this
      type of information using the techniques from
      <a class="xref" href="innodb-monitors.html" title="15.17 InnoDB Monitors">Section 15.17, “InnoDB Monitors”</a>, setting up
      <code class="literal">InnoDB</code> monitors and parsing the output from the
      <a class="link" href="show-engine.html" title="13.7.7.15 SHOW ENGINE Statement"><code class="literal">SHOW ENGINE INNODB
      STATUS</code></a> statement. The <code class="literal">InnoDB</code>
      <code class="literal">INFORMATION_SCHEMA</code> table interface allows you
      to query this data using SQL.
    </p><p>
      <code class="literal">InnoDB</code> <code class="literal">INFORMATION_SCHEMA</code>
      schema object tables include the tables listed below.
    </p><pre class="programlisting">INNODB_DATAFILES
INNODB_TABLESTATS
INNODB_FOREIGN
INNODB_COLUMNS
INNODB_INDEXES
INNODB_FIELDS
INNODB_TABLESPACES
INNODB_TABLESPACES_BRIEF
INNODB_FOREIGN_COLS
INNODB_TABLES
</pre><p>
      The table names are indicative of the type of data provided:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a> provides metadata
          about <code class="literal">InnoDB</code> tables.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-columns-table.html" title="26.4.9 The INFORMATION_SCHEMA INNODB_COLUMNS Table"><code class="literal">INNODB_COLUMNS</code></a> provides metadata
          about <code class="literal">InnoDB</code> table columns.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-indexes-table.html" title="26.4.20 The INFORMATION_SCHEMA INNODB_INDEXES Table"><code class="literal">INNODB_INDEXES</code></a> provides metadata
          about <code class="literal">InnoDB</code> indexes.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-fields-table.html" title="26.4.11 The INFORMATION_SCHEMA INNODB_FIELDS Table"><code class="literal">INNODB_FIELDS</code></a> provides metadata
          about the key columns (fields) of <code class="literal">InnoDB</code>
          indexes.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-tablestats-table.html" title="26.4.26 The INFORMATION_SCHEMA INNODB_TABLESTATS View"><code class="literal">INNODB_TABLESTATS</code></a> provides a view
          of low-level status information about
          <code class="literal">InnoDB</code> tables that is derived from
          in-memory data structures.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-datafiles-table.html" title="26.4.10 The INFORMATION_SCHEMA INNODB_DATAFILES Table"><code class="literal">INNODB_DATAFILES</code></a> provides data
          file path information for <code class="literal">InnoDB</code>
          file-per-table and general tablespaces.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-tablespaces-table.html" title="26.4.24 The INFORMATION_SCHEMA INNODB_TABLESPACES Table"><code class="literal">INNODB_TABLESPACES</code></a> provides
          metadata about <code class="literal">InnoDB</code> file-per-table,
          general, and undo tablespaces.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-tablespaces-brief-table.html" title="26.4.25 The INFORMATION_SCHEMA INNODB_TABLESPACES_BRIEF Table"><code class="literal">INNODB_TABLESPACES_BRIEF</code></a> provides
          a subset of metadata about <code class="literal">InnoDB</code>
          tablespaces.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-foreign-table.html" title="26.4.12 The INFORMATION_SCHEMA INNODB_FOREIGN Table"><code class="literal">INNODB_FOREIGN</code></a> provides metadata
          about foreign keys defined on <code class="literal">InnoDB</code>
          tables.
        </p></li><li class="listitem"><p>
          <a class="link" href="information-schema-innodb-foreign-cols-table.html" title="26.4.13 The INFORMATION_SCHEMA INNODB_FOREIGN_COLS Table"><code class="literal">INNODB_FOREIGN_COLS</code></a> provides
          metadata about the columns of foreign keys that are defined on
          <code class="literal">InnoDB</code> tables.
        </p></li></ul></div><p>
      <code class="literal">InnoDB</code> <code class="literal">INFORMATION_SCHEMA</code>
      schema object tables can be joined together through fields such as
      <code class="literal">TABLE_ID</code>, <code class="literal">INDEX_ID</code>, and
      <code class="literal">SPACE</code>, allowing you to easily retrieve all
      available data for an object you want to study or monitor.
    </p><p>
      Refer to the <code class="literal">InnoDB</code>
      <a class="link" href="innodb-information-schema-tables.html" title="26.4 INFORMATION_SCHEMA InnoDB Tables">INFORMATION_SCHEMA</a>
      documentation for information about the columns of each table.
    </p><div class="example"><a id="innodb-information-schema-system-tables-example"></a><p class="title"><strong>Example 15.2 InnoDB INFORMATION_SCHEMA Schema Object Tables</strong></p><div class="example-contents"><p>
        This example uses a simple table (<code class="literal">t1</code>) with a
        single index (<code class="literal">i1</code>) to demonstrate the type of
        metadata found in the <code class="literal">InnoDB</code>
        <code class="literal">INFORMATION_SCHEMA</code> schema object tables.
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Create a test database and table <code class="literal">t1</code>:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE test;</code></strong>

mysql&gt; <strong class="userinput"><code>USE test;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
       <strong class="userinput"><code>col1 INT,</code></strong>
       <strong class="userinput"><code>col2 CHAR(10),</code></strong>
       <strong class="userinput"><code>col3 VARCHAR(10))</code></strong>
       <strong class="userinput"><code>ENGINE = InnoDB;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE INDEX i1 ON t1(col1);</code></strong>
</pre></li><li class="listitem"><p>
            After creating the table <code class="literal">t1</code>, query
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a> to locate the
            metadata for <code class="literal">test/t1</code>:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_TABLES WHERE NAME='test/t1' \G</code></strong>
*************************** 1. row ***************************
     TABLE_ID: 71
         NAME: test/t1
         FLAG: 1
       N_COLS: 6
        SPACE: 57
   ROW_FORMAT: Compact
ZIP_PAGE_SIZE: 0
 INSTANT_COLS: 0
</pre><p>
            Table <code class="literal">t1</code> has a
            <code class="literal">TABLE_ID</code> of 71. The
            <code class="literal">FLAG</code> field provides bit level information
            about table format and storage characteristics. There are
            six columns, three of which are hidden columns created by
            <code class="literal">InnoDB</code> (<code class="literal">DB_ROW_ID</code>,
            <code class="literal">DB_TRX_ID</code>, and
            <code class="literal">DB_ROLL_PTR</code>). The ID of the table's
            <code class="literal">SPACE</code> is 57 (a value of 0 would indicate
            that the table resides in the system tablespace). The
            <code class="literal">ROW_FORMAT</code> is Compact.
            <code class="literal">ZIP_PAGE_SIZE</code> only applies to tables with
            a <code class="literal">Compressed</code> row format.
            <code class="literal">INSTANT_COLS</code> shows number of columns in
            the table prior to adding the first instant column using
            <code class="literal">ALTER TABLE ... ADD
            COLUMN</code> with <code class="literal">ALGORITHM=INSTANT</code>.
          </p></li><li class="listitem"><p>
            Using the <code class="literal">TABLE_ID</code> information from
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a>, query the
            <a class="link" href="information-schema-innodb-columns-table.html" title="26.4.9 The INFORMATION_SCHEMA INNODB_COLUMNS Table"><code class="literal">INNODB_COLUMNS</code></a> table for
            information about the table's columns.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_COLUMNS where TABLE_ID = 71\G</code></strong>
*************************** 1. row ***************************
     TABLE_ID: 71
         NAME: col1
          POS: 0
        MTYPE: 6
       PRTYPE: 1027
          LEN: 4
  HAS_DEFAULT: 0
DEFAULT_VALUE: NULL
*************************** 2. row ***************************
     TABLE_ID: 71
         NAME: col2
          POS: 1
        MTYPE: 2
       PRTYPE: 524542
          LEN: 10
  HAS_DEFAULT: 0
DEFAULT_VALUE: NULL
*************************** 3. row ***************************
     TABLE_ID: 71
         NAME: col3
          POS: 2
        MTYPE: 1
       PRTYPE: 524303
          LEN: 10
  HAS_DEFAULT: 0
DEFAULT_VALUE: NULL
</pre><p>
            In addition to the <code class="literal">TABLE_ID</code> and column
            <code class="literal">NAME</code>,
            <a class="link" href="information-schema-innodb-columns-table.html" title="26.4.9 The INFORMATION_SCHEMA INNODB_COLUMNS Table"><code class="literal">INNODB_COLUMNS</code></a> provides the
            ordinal position (<code class="literal">POS</code>) of each column
            (starting from 0 and incrementing sequentially), the column
            <code class="literal">MTYPE</code> or <span class="quote">“<span class="quote">main type</span>”</span> (6 =
            INT, 2 = CHAR, 1 = VARCHAR), the <code class="literal">PRTYPE</code>
            or <span class="quote">“<span class="quote">precise type</span>”</span> (a binary value with bits
            that represent the MySQL data type, character set code, and
            nullability), and the column length
            (<code class="literal">LEN</code>). The <code class="literal">HAS_DEFAULT</code>
            and <code class="literal">DEFAULT_VALUE</code> columns only apply to
            columns added instantly using
            <code class="literal">ALTER TABLE ... ADD
            COLUMN</code> with <code class="literal">ALGORITHM=INSTANT</code>.
          </p></li><li class="listitem"><p>
            Using the <code class="literal">TABLE_ID</code> information from
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a> once again, query
            <a class="link" href="information-schema-innodb-indexes-table.html" title="26.4.20 The INFORMATION_SCHEMA INNODB_INDEXES Table"><code class="literal">INNODB_INDEXES</code></a> for information
            about the indexes associated with table
            <code class="literal">t1</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_INDEXES WHERE TABLE_ID = 71 \G</code></strong>
*************************** 1. row ***************************
       INDEX_ID: 111
           NAME: GEN_CLUST_INDEX
       TABLE_ID: 71
           TYPE: 1
       N_FIELDS: 0
        PAGE_NO: 3
          SPACE: 57
MERGE_THRESHOLD: 50
*************************** 2. row ***************************
       INDEX_ID: 112
           NAME: i1
       TABLE_ID: 71
           TYPE: 0
       N_FIELDS: 1
        PAGE_NO: 4
          SPACE: 57
MERGE_THRESHOLD: 50
</pre><p>
            <a class="link" href="information-schema-innodb-indexes-table.html" title="26.4.20 The INFORMATION_SCHEMA INNODB_INDEXES Table"><code class="literal">INNODB_INDEXES</code></a> returns data for
            two indexes. The first index is
            <code class="literal">GEN_CLUST_INDEX</code>, which is a clustered
            index created by <code class="literal">InnoDB</code> if the table does
            not have a user-defined clustered index. The second index
            (<code class="literal">i1</code>) is the user-defined secondary index.
          </p><p>
            The <code class="literal">INDEX_ID</code> is an identifier for the
            index that is unique across all databases in an instance.
            The <code class="literal">TABLE_ID</code> identifies the table that
            the index is associated with. The index
            <code class="literal">TYPE</code> value indicates the type of index (1
            = Clustered Index, 0 = Secondary index). The
            <code class="literal">N_FILEDS</code> value is the number of fields
            that comprise the index. <code class="literal">PAGE_NO</code> is the
            root page number of the index B-tree, and
            <code class="literal">SPACE</code> is the ID of the tablespace where
            the index resides. A nonzero value indicates that the index
            does not reside in the system tablespace.
            <code class="literal">MERGE_THRESHOLD</code> defines a percentage
            threshold value for the amount of data in an index page. If
            the amount of data in an index page falls below the this
            value (the default is 50%) when a row is deleted or when a
            row is shortened by an update operation,
            <code class="literal">InnoDB</code> attempts to merge the index page
            with a neighboring index page.
          </p></li><li class="listitem"><p>
            Using the <code class="literal">INDEX_ID</code> information from
            <a class="link" href="information-schema-innodb-indexes-table.html" title="26.4.20 The INFORMATION_SCHEMA INNODB_INDEXES Table"><code class="literal">INNODB_INDEXES</code></a>, query
            <a class="link" href="information-schema-innodb-fields-table.html" title="26.4.11 The INFORMATION_SCHEMA INNODB_FIELDS Table"><code class="literal">INNODB_FIELDS</code></a> for information
            about the fields of index <code class="literal">i1</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_FIELDS where INDEX_ID = 112 \G</code></strong>
*************************** 1. row ***************************
INDEX_ID: 112
    NAME: col1
     POS: 0
</pre><p>
            <a class="link" href="information-schema-innodb-fields-table.html" title="26.4.11 The INFORMATION_SCHEMA INNODB_FIELDS Table"><code class="literal">INNODB_FIELDS</code></a> provides the
            <code class="literal">NAME</code> of the indexed field and its ordinal
            position within the index. If the index (i1) had been
            defined on multiple fields,
            <a class="link" href="information-schema-innodb-fields-table.html" title="26.4.11 The INFORMATION_SCHEMA INNODB_FIELDS Table"><code class="literal">INNODB_FIELDS</code></a> would provide
            metadata for each of the indexed fields.
          </p></li><li class="listitem"><p>
            Using the <code class="literal">SPACE</code> information from
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a>, query
            <a class="link" href="information-schema-innodb-tablespaces-table.html" title="26.4.24 The INFORMATION_SCHEMA INNODB_TABLESPACES Table"><code class="literal">INNODB_TABLESPACES</code></a> table for
            information about the table's tablespace.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_TABLESPACES WHERE SPACE = 57 \G</code></strong>
*************************** 1. row ***************************
          SPACE: 57
          NAME: test/t1
          FLAG: 16417
    ROW_FORMAT: Dynamic
     PAGE_SIZE: 16384
 ZIP_PAGE_SIZE: 0
    SPACE_TYPE: Single
 FS_BLOCK_SIZE: 4096
     FILE_SIZE: 114688
ALLOCATED_SIZE: 98304
AUTOEXTEND_SIZE: 0
SERVER_VERSION: 8.0.23
 SPACE_VERSION: 1
    ENCRYPTION: N
         STATE: normal
</pre><p>
            In addition to the <code class="literal">SPACE</code> ID of the
            tablespace and the <code class="literal">NAME</code> of the associated
            table, <a class="link" href="information-schema-innodb-tablespaces-table.html" title="26.4.24 The INFORMATION_SCHEMA INNODB_TABLESPACES Table"><code class="literal">INNODB_TABLESPACES</code></a>
            provides tablespace <code class="literal">FLAG</code> data, which is
            bit level information about tablespace format and storage
            characteristics. Also provided are tablespace
            <code class="literal">ROW_FORMAT</code>, <code class="literal">PAGE_SIZE</code>,
            and several other tablespace metadata items.
          </p></li><li class="listitem"><p>
            Using the <code class="literal">SPACE</code> information from
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a> once again, query
            <a class="link" href="information-schema-innodb-datafiles-table.html" title="26.4.10 The INFORMATION_SCHEMA INNODB_DATAFILES Table"><code class="literal">INNODB_DATAFILES</code></a> for the
            location of the tablespace data file.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_DATAFILES WHERE SPACE = 57 \G</code></strong>
*************************** 1. row ***************************
SPACE: 57
 PATH: ./test/t1.ibd
</pre><p>
            The datafile is located in the <code class="literal">test</code>
            directory under MySQL's <code class="literal">data</code> directory.
            If a
            <a class="link" href="glossary.html#glos_file_per_table" title="file-per-table">file-per-table</a>
            tablespace were created in a location outside the MySQL data
            directory using the <code class="literal">DATA DIRECTORY</code> clause
            of the <a class="link" href="create-table.html" title="13.1.20 CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a>
            statement, the tablespace <code class="literal">PATH</code> would be a
            fully qualified directory path.
          </p></li><li class="listitem"><p>
            As a final step, insert a row into table
            <code class="literal">t1</code> (<code class="literal">TABLE_ID = 71</code>) and
            view the data in the
            <a class="link" href="information-schema-innodb-tablestats-table.html" title="26.4.26 The INFORMATION_SCHEMA INNODB_TABLESTATS View"><code class="literal">INNODB_TABLESTATS</code></a> table. The
            data in this table is used by the MySQL optimizer to
            calculate which index to use when querying an
            <code class="literal">InnoDB</code> table. This information is derived
            from in-memory data structures.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES(5, 'abc', 'def');</code></strong>
Query OK, 1 row affected (0.06 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_TABLESTATS where TABLE_ID = 71 \G</code></strong>
*************************** 1. row ***************************
         TABLE_ID: 71
             NAME: test/t1
STATS_INITIALIZED: Initialized
         NUM_ROWS: 1
 CLUST_INDEX_SIZE: 1
 OTHER_INDEX_SIZE: 0
 MODIFIED_COUNTER: 1
          AUTOINC: 0
        REF_COUNT: 1
</pre><p>
            The <code class="literal">STATS_INITIALIZED</code> field indicates
            whether or not statistics have been collected for the table.
            <code class="literal">NUM_ROWS</code> is the current estimated number
            of rows in the table. The
            <code class="literal">CLUST_INDEX_SIZE</code> and
            <code class="literal">OTHER_INDEX_SIZE</code> fields report the number
            of pages on disk that store clustered and secondary indexes
            for the table, respectively. The
            <code class="literal">MODIFIED_COUNTER</code> value shows the number
            of rows modified by DML operations and cascade operations
            from foreign keys. The <code class="literal">AUTOINC</code> value is
            the next number to be issued for any autoincrement-based
            operation. There are no autoincrement columns defined on
            table <code class="literal">t1</code>, so the value is 0. The
            <code class="literal">REF_COUNT</code> value is a counter. When the
            counter reaches 0, it signifies that the table metadata can
            be evicted from the table cache.
          </p></li></ol></div></div></div><br class="example-break" /><div class="example"><a id="innodb-information-schema-fk-system-tables-example"></a><p class="title"><strong>Example 15.3 Foreign Key INFORMATION_SCHEMA Schema Object Tables</strong></p><div class="example-contents"><p>
        The <a class="link" href="information-schema-innodb-foreign-table.html" title="26.4.12 The INFORMATION_SCHEMA INNODB_FOREIGN Table"><code class="literal">INNODB_FOREIGN</code></a> and
        <a class="link" href="information-schema-innodb-foreign-cols-table.html" title="26.4.13 The INFORMATION_SCHEMA INNODB_FOREIGN_COLS Table"><code class="literal">INNODB_FOREIGN_COLS</code></a> tables provide
        data about foreign key relationships. This example uses a parent
        table and child table with a foreign key relationship to
        demonstrate the data found in the
        <a class="link" href="information-schema-innodb-foreign-table.html" title="26.4.12 The INFORMATION_SCHEMA INNODB_FOREIGN Table"><code class="literal">INNODB_FOREIGN</code></a> and
        <a class="link" href="information-schema-innodb-foreign-cols-table.html" title="26.4.13 The INFORMATION_SCHEMA INNODB_FOREIGN_COLS Table"><code class="literal">INNODB_FOREIGN_COLS</code></a> tables.
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Create the test database with parent and child tables:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE test;</code></strong>

mysql&gt; <strong class="userinput"><code>USE test;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE parent (id INT NOT NULL,</code></strong>
       <strong class="userinput"><code>PRIMARY KEY (id)) ENGINE=INNODB;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE child (id INT, parent_id INT,</code></strong>
       <strong class="userinput"><code>INDEX par_ind (parent_id),</code></strong>
       <strong class="userinput"><code>CONSTRAINT fk1</code></strong>
       <strong class="userinput"><code>FOREIGN KEY (parent_id) REFERENCES parent(id)</code></strong>
       <strong class="userinput"><code>ON DELETE CASCADE) ENGINE=INNODB;</code></strong>
</pre></li><li class="listitem"><p>
            After the parent and child tables are created, query
            <a class="link" href="information-schema-innodb-foreign-table.html" title="26.4.12 The INFORMATION_SCHEMA INNODB_FOREIGN Table"><code class="literal">INNODB_FOREIGN</code></a> and locate the
            foreign key data for the <code class="literal">test/child</code> and
            <code class="literal">test/parent</code> foreign key relationship:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_FOREIGN \G</code></strong>
*************************** 1. row ***************************
      ID: test/fk1
FOR_NAME: test/child
REF_NAME: test/parent
  N_COLS: 1
    TYPE: 1
</pre><p>
            Metadata includes the foreign key <code class="literal">ID</code>
            (<code class="literal">fk1</code>), which is named for the
            <code class="literal">CONSTRAINT</code> that was defined on the child
            table. The <code class="literal">FOR_NAME</code> is the name of the
            child table where the foreign key is defined.
            <code class="literal">REF_NAME</code> is the name of the parent table
            (the <span class="quote">“<span class="quote">referenced</span>”</span> table).
            <code class="literal">N_COLS</code> is the number of columns in the
            foreign key index. <code class="literal">TYPE</code> is a numerical
            value representing bit flags that provide additional
            information about the foreign key column. In this case, the
            <code class="literal">TYPE</code> value is 1, which indicates that the
            <code class="literal">ON DELETE CASCADE</code> option was specified
            for the foreign key. See the
            <a class="link" href="information-schema-innodb-foreign-table.html" title="26.4.12 The INFORMATION_SCHEMA INNODB_FOREIGN Table"><code class="literal">INNODB_FOREIGN</code></a> table definition
            for more information about <code class="literal">TYPE</code> values.
          </p></li><li class="listitem"><p>
            Using the foreign key <code class="literal">ID</code>, query
            <a class="link" href="information-schema-innodb-foreign-cols-table.html" title="26.4.13 The INFORMATION_SCHEMA INNODB_FOREIGN_COLS Table"><code class="literal">INNODB_FOREIGN_COLS</code></a> to view
            data about the columns of the foreign key.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_FOREIGN_COLS WHERE ID = 'test/fk1' \G</code></strong>
*************************** 1. row ***************************
          ID: test/fk1
FOR_COL_NAME: parent_id
REF_COL_NAME: id
         POS: 0
</pre><p>
            <code class="literal">FOR_COL_NAME</code> is the name of the foreign
            key column in the child table, and
            <code class="literal">REF_COL_NAME</code> is the name of the
            referenced column in the parent table. The
            <code class="literal">POS</code> value is the ordinal position of the
            key field within the foreign key index, starting at zero.
          </p></li></ol></div></div></div><br class="example-break" /><div class="example"><a id="innodb-information-schema-system-tables-join-example"></a><p class="title"><strong>Example 15.4 Joining InnoDB INFORMATION_SCHEMA Schema Object Tables</strong></p><div class="example-contents"><p>
        This example demonstrates joining three
        <code class="literal">InnoDB</code> <code class="literal">INFORMATION_SCHEMA</code>
        schema object tables
        (<a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INNODB_TABLES</code></a>,
        <a class="link" href="information-schema-innodb-tablespaces-table.html" title="26.4.24 The INFORMATION_SCHEMA INNODB_TABLESPACES Table"><code class="literal">INNODB_TABLESPACES</code></a>, and
        <a class="link" href="information-schema-innodb-tablestats-table.html" title="26.4.26 The INFORMATION_SCHEMA INNODB_TABLESTATS View"><code class="literal">INNODB_TABLESTATS</code></a>) to gather file
        format, row format, page size, and index size information about
        tables in the employees sample database.
      </p><p>
        The following table aliases are used to shorten the query
        string:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="information-schema-innodb-tables-table.html" title="26.4.23 The INFORMATION_SCHEMA INNODB_TABLES Table"><code class="literal">INFORMATION_SCHEMA.INNODB_TABLES</code></a>:
            a
          </p></li><li class="listitem"><p>
            <a class="link" href="information-schema-innodb-tablespaces-table.html" title="26.4.24 The INFORMATION_SCHEMA INNODB_TABLESPACES Table"><code class="literal">INFORMATION_SCHEMA.INNODB_TABLESPACES</code></a>:
            b
          </p></li><li class="listitem"><p>
            <a class="link" href="information-schema-innodb-tablestats-table.html" title="26.4.26 The INFORMATION_SCHEMA INNODB_TABLESTATS View"><code class="literal">INFORMATION_SCHEMA.INNODB_TABLESTATS</code></a>:
            c
          </p></li></ul></div><p>
        An <a class="link" href="flow-control-functions.html#function_if"><code class="literal">IF()</code></a> control flow function is
        used to account for compressed tables. If a table is compressed,
        the index size is calculated using
        <code class="literal">ZIP_PAGE_SIZE</code> rather than
        <code class="literal">PAGE_SIZE</code>.
        <code class="literal">CLUST_INDEX_SIZE</code> and
        <code class="literal">OTHER_INDEX_SIZE</code>, which are reported in
        bytes, are divided by <code class="literal">1024*1024</code> to provide
        index sizes in megabytes (MBs). MB values are rounded to zero
        decimal spaces using the <a class="link" href="mathematical-functions.html#function_round"><code class="literal">ROUND()</code></a>
        function.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT a.NAME, a.ROW_FORMAT,</code></strong>
        <strong class="userinput"><code>@page_size :=</code></strong>
         <strong class="userinput"><code>IF(a.ROW_FORMAT='Compressed',</code></strong>
          <strong class="userinput"><code>b.ZIP_PAGE_SIZE, b.PAGE_SIZE)</code></strong>
          <strong class="userinput"><code>AS page_size,</code></strong>
         <strong class="userinput"><code>ROUND((@page_size * c.CLUST_INDEX_SIZE)</code></strong>
          <strong class="userinput"><code>/(1024*1024)) AS pk_mb,</code></strong>
         <strong class="userinput"><code>ROUND((@page_size * c.OTHER_INDEX_SIZE)</code></strong>
          <strong class="userinput"><code>/(1024*1024)) AS secidx_mb</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.INNODB_TABLES a</code></strong>
       <strong class="userinput"><code>INNER JOIN INFORMATION_SCHEMA.INNODB_TABLESPACES b on a.NAME = b.NAME</code></strong>
       <strong class="userinput"><code>INNER JOIN INFORMATION_SCHEMA.INNODB_TABLESTATS c on b.NAME = c.NAME</code></strong>
       <strong class="userinput"><code>WHERE a.NAME LIKE 'employees/%'</code></strong>
       <strong class="userinput"><code>ORDER BY a.NAME DESC;</code></strong>
+------------------------+------------+-----------+-------+-----------+
| NAME                   | ROW_FORMAT | page_size | pk_mb | secidx_mb |
+------------------------+------------+-----------+-------+-----------+
| employees/titles       | Dynamic    |     16384 |    20 |        11 |
| employees/salaries     | Dynamic    |     16384 |    93 |        34 |
| employees/employees    | Dynamic    |     16384 |    15 |         0 |
| employees/dept_manager | Dynamic    |     16384 |     0 |         0 |
| employees/dept_emp     | Dynamic    |     16384 |    12 |        10 |
| employees/departments  | Dynamic    |     16384 |     0 |         0 |
+------------------------+------------+-----------+-------+-----------+
</pre></div></div><br class="example-break" /></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="innodb-information-schema-internal-data.html">Previous <span class="navHint"> Persistence and Consistency of InnoDB Transaction and Locking
        Information </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="innodb-information-schema.html">Up <span class="navHint"> InnoDB INFORMATION_SCHEMA Tables </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="innodb-information-schema-fulltext_index-tables.html">Next <span class="navHint"> InnoDB INFORMATION_SCHEMA FULLTEXT Index Tables </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>