<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.17.3 Functions That Search JSON Values</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="json-functions.html" title="12.17 JSON Functions" /><link rel="prev" href="json-creation-functions.html" title="12.17.2 Functions That Create JSON Values" /><link rel="next" href="json-modification-functions.html" title="12.17.4 Functions That Modify JSON Values" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="json-search-functions.html#json-search-functions">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="json-creation-functions.html">Previous <span class="navHint"> Functions That Create JSON Values </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="json-functions.html">Up <span class="navHint"> JSON Functions </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="json-modification-functions.html">Next <span class="navHint"> Functions That Modify JSON Values </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="json-search-functions"></a>12.17.3 Functions That Search JSON Values</h3></div></div></div><p>
      The functions in this section perform search or comparison
      operations on JSON values to extract data from them, report
      whether data exists at a location within them, or report the path
      to data within them. The <a class="link" href="json-search-functions.html#operator_member-of"><code class="literal">MEMBER OF()</code></a>
      operator is also documented herein.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="function_json-contains"></a><p>
          <a class="link" href="json-search-functions.html#function_json-contains"><code class="literal">JSON_CONTAINS(<em class="replaceable"><code>target</code></em>,
          <em class="replaceable"><code>candidate</code></em>[,
          <em class="replaceable"><code>path</code></em>])</code></a>
        </p><a id="idm45828921769424" class="indexterm"></a><p>
          Indicates by returning 1 or 0 whether a given
          <em class="replaceable"><code>candidate</code></em> JSON document is
          contained within a <em class="replaceable"><code>target</code></em> JSON
          document, or—if a <em class="replaceable"><code>path</code></em>
          argument was supplied—whether the candidate is found at
          a specific path within the target. Returns
          <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code>, or if the path argument does not
          identify a section of the target document. An error occurs if
          <em class="replaceable"><code>target</code></em> or
          <em class="replaceable"><code>candidate</code></em> is not a valid JSON
          document, or if the <em class="replaceable"><code>path</code></em> argument
          is not a valid path expression or contains a
          <code class="literal">*</code> or <code class="literal">**</code> wildcard.
        </p><p>
          To check only whether any data exists at the path, use
          <a class="link" href="json-search-functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH()</code></a> instead.
        </p><p>
          The following rules define containment:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              A candidate scalar is contained in a target scalar if and
              only if they are comparable and are equal. Two scalar
              values are comparable if they have the same
              <a class="link" href="json-attribute-functions.html#function_json-type"><code class="literal">JSON_TYPE()</code></a> types, with the
              exception that values of types <code class="literal">INTEGER</code>
              and <code class="literal">DECIMAL</code> are also comparable to each
              other.
            </p></li><li class="listitem"><p>
              A candidate array is contained in a target array if and
              only if every element in the candidate is contained in
              some element of the target.
            </p></li><li class="listitem"><p>
              A candidate nonarray is contained in a target array if and
              only if the candidate is contained in some element of the
              target.
            </p></li><li class="listitem"><p>
              A candidate object is contained in a target object if and
              only if for each key in the candidate there is a key with
              the same name in the target and the value associated with
              the candidate key is contained in the value associated
              with the target key.
            </p></li></ul></div><p>
          Otherwise, the candidate value is not contained in the target
          document.
        </p><p>
          Starting with MySQL 8.0.17, queries using
          <code class="literal">JSON_CONTAINS()</code> on
          <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables can be optimized
          using multi-valued indexes; see
          <a class="xref" href="create-index.html#create-index-multi-valued" title="Multi-Valued Indexes">Multi-Valued Indexes</a>, for more
          information.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @j = '{"a": 1, "b": 2, "c": {"d": 4}}';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @j2 = '1';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.a');</code></strong>
+-------------------------------+
| JSON_CONTAINS(@j, @j2, '$.a') |
+-------------------------------+
|                             1 |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.b');</code></strong>
+-------------------------------+
| JSON_CONTAINS(@j, @j2, '$.b') |
+-------------------------------+
|                             0 |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SET @j2 = '{"d": 4}';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.a');</code></strong>
+-------------------------------+
| JSON_CONTAINS(@j, @j2, '$.a') |
+-------------------------------+
|                             0 |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS(@j, @j2, '$.c');</code></strong>
+-------------------------------+
| JSON_CONTAINS(@j, @j2, '$.c') |
+-------------------------------+
|                             1 |
+-------------------------------+
</pre></li><li class="listitem"><a id="function_json-contains-path"></a><p>
          <a class="link" href="json-search-functions.html#function_json-contains-path"><code class="literal">JSON_CONTAINS_PATH(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>one_or_all</code></em>,
          <em class="replaceable"><code>path</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...)</code></a>
        </p><a id="idm45828921732720" class="indexterm"></a><p>
          Returns 0 or 1 to indicate whether a JSON document contains
          data at a given path or paths. Returns <code class="literal">NULL</code>
          if any argument is <code class="literal">NULL</code>. An error occurs if
          the <em class="replaceable"><code>json_doc</code></em> argument is not a
          valid JSON document, any <em class="replaceable"><code>path</code></em>
          argument is not a valid path expression, or
          <em class="replaceable"><code>one_or_all</code></em> is not
          <code class="literal">'one'</code> or <code class="literal">'all'</code>.
        </p><p>
          To check for a specific value at a path, use
          <a class="link" href="json-search-functions.html#function_json-contains"><code class="literal">JSON_CONTAINS()</code></a> instead.
        </p><p>
          The return value is 0 if no specified path exists within the
          document. Otherwise, the return value depends on the
          <em class="replaceable"><code>one_or_all</code></em> argument:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">'one'</code>: 1 if at least one path exists
              within the document, 0 otherwise.
            </p></li><li class="listitem"><p>
              <code class="literal">'all'</code>: 1 if all paths exist within the
              document, 0 otherwise.
            </p></li></ul></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @j = '{"a": 1, "b": 2, "c": {"d": 4}}';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.a', '$.e');</code></strong>
+---------------------------------------------+
| JSON_CONTAINS_PATH(@j, 'one', '$.a', '$.e') |
+---------------------------------------------+
|                                           1 |
+---------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'all', '$.a', '$.e');</code></strong>
+---------------------------------------------+
| JSON_CONTAINS_PATH(@j, 'all', '$.a', '$.e') |
+---------------------------------------------+
|                                           0 |
+---------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.c.d');</code></strong>
+----------------------------------------+
| JSON_CONTAINS_PATH(@j, 'one', '$.c.d') |
+----------------------------------------+
|                                      1 |
+----------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_CONTAINS_PATH(@j, 'one', '$.a.d');</code></strong>
+----------------------------------------+
| JSON_CONTAINS_PATH(@j, 'one', '$.a.d') |
+----------------------------------------+
|                                      0 |
+----------------------------------------+
</pre></li><li class="listitem"><a id="function_json-extract"></a><p>
          <a class="link" href="json-search-functions.html#function_json-extract"><code class="literal">JSON_EXTRACT(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...)</code></a>
        </p><a id="idm45828921705936" class="indexterm"></a><p>
          Returns data from a JSON document, selected from the parts of
          the document matched by the <em class="replaceable"><code>path</code></em>
          arguments. Returns <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code> or no paths locate a value in the
          document. An error occurs if the
          <em class="replaceable"><code>json_doc</code></em> argument is not a valid
          JSON document or any <em class="replaceable"><code>path</code></em> argument
          is not a valid path expression.
        </p><p>
          The return value consists of all values matched by the
          <em class="replaceable"><code>path</code></em> arguments. If it is possible
          that those arguments could return multiple values, the matched
          values are autowrapped as an array, in the order corresponding
          to the paths that produced them. Otherwise, the return value
          is the single matched value.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]');</code></strong>
+--------------------------------------------+
| JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]') |
+--------------------------------------------+
| 20                                         |
+--------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]', '$[0]');</code></strong>
+----------------------------------------------------+
| JSON_EXTRACT('[10, 20, [30, 40]]', '$[1]', '$[0]') |
+----------------------------------------------------+
| [20, 10]                                           |
+----------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_EXTRACT('[10, 20, [30, 40]]', '$[2][*]');</code></strong>
+-----------------------------------------------+
| JSON_EXTRACT('[10, 20, [30, 40]]', '$[2][*]') |
+-----------------------------------------------+
| [30, 40]                                      |
+-----------------------------------------------+
</pre><p>
          MySQL supports the
          <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>
          operator as shorthand for this function as used with 2
          arguments where the left hand side is a
          <a class="link" href="json.html" title="11.5 The JSON Data Type"><code class="literal">JSON</code></a> column identifier (not an
          expression) and the right hand side is the JSON path to be
          matched within the column.
        </p></li><li class="listitem"><a id="operator_json-column-path"></a><p>
          <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal"><em class="replaceable"><code>column</code></em>-&gt;<em class="replaceable"><code>path</code></em></code></a>
        </p><a id="idm45828921684688" class="indexterm"></a><p>
          The
          <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>
          operator serves as an alias for the
          <a class="link" href="json-search-functions.html#function_json-extract"><code class="literal">JSON_EXTRACT()</code></a> function when
          used with two arguments, a column identifier on the left and a
          JSON path (a string literal) on the right that is evaluated
          against the JSON document (the column value). You can use such
          expressions in place of column references wherever they occur
          in SQL statements.
        </p><p>
          The two <a class="link" href="select.html" title="13.2.13 SELECT Statement"><code class="literal">SELECT</code></a> statements shown
          here produce the same output:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT c, JSON_EXTRACT(c, "$.id"), g</code></strong>
     &gt; <strong class="userinput"><code>FROM jemp</code></strong>
     &gt; <strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong>
     &gt; <strong class="userinput"><code>ORDER BY JSON_EXTRACT(c, "$.name");</code></strong>
+-------------------------------+-----------+------+
| c                             | c-&gt;"$.id" | g    |
+-------------------------------+-----------+------+
| {"id": "3", "name": "Barney"} | "3"       |    3 |
| {"id": "4", "name": "Betty"}  | "4"       |    4 |
| {"id": "2", "name": "Wilma"}  | "2"       |    2 |
+-------------------------------+-----------+------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT c, c-&gt;"$.id", g</code></strong>
     &gt; <strong class="userinput"><code>FROM jemp</code></strong>
     &gt; <strong class="userinput"><code>WHERE c-&gt;"$.id" &gt; 1</code></strong>
     &gt; <strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong>
+-------------------------------+-----------+------+
| c                             | c-&gt;"$.id" | g    |
+-------------------------------+-----------+------+
| {"id": "3", "name": "Barney"} | "3"       |    3 |
| {"id": "4", "name": "Betty"}  | "4"       |    4 |
| {"id": "2", "name": "Wilma"}  | "2"       |    2 |
+-------------------------------+-----------+------+
3 rows in set (0.00 sec)
</pre><p>
          This functionality is not limited to
          <code class="literal">SELECT</code>, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE jemp ADD COLUMN n INT;</code></strong>
Query OK, 0 rows affected (0.68 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>UPDATE jemp SET n=1 WHERE c-&gt;"$.id" = "4";</code></strong>
Query OK, 1 row affected (0.04 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT c, c-&gt;"$.id", g, n</code></strong>
     &gt; <strong class="userinput"><code>FROM jemp</code></strong>
     &gt; <strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong>
     &gt; <strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong>
+-------------------------------+-----------+------+------+
| c                             | c-&gt;"$.id" | g    | n    |
+-------------------------------+-----------+------+------+
| {"id": "3", "name": "Barney"} | "3"       |    3 | NULL |
| {"id": "4", "name": "Betty"}  | "4"       |    4 |    1 |
| {"id": "2", "name": "Wilma"}  | "2"       |    2 | NULL |
+-------------------------------+-----------+------+------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>DELETE FROM jemp WHERE c-&gt;"$.id" = "4";</code></strong>
Query OK, 1 row affected (0.04 sec)

mysql&gt; <strong class="userinput"><code>SELECT c, c-&gt;"$.id", g, n</code></strong>
     &gt; <strong class="userinput"><code>FROM jemp</code></strong>
     &gt; <strong class="userinput"><code>WHERE JSON_EXTRACT(c, "$.id") &gt; 1</code></strong>
     &gt; <strong class="userinput"><code>ORDER BY c-&gt;"$.name";</code></strong>
+-------------------------------+-----------+------+------+
| c                             | c-&gt;"$.id" | g    | n    |
+-------------------------------+-----------+------+------+
| {"id": "3", "name": "Barney"} | "3"       |    3 | NULL |
| {"id": "2", "name": "Wilma"}  | "2"       |    2 | NULL |
+-------------------------------+-----------+------+------+
2 rows in set (0.00 sec)
</pre><p>
          (See <a class="xref" href="create-table-secondary-indexes.html#json-column-indirect-index" title="Indexing a Generated Column to Provide a JSON Column Index">Indexing a Generated Column to Provide a JSON Column Index</a>, for the
          statements used to create and populate the table just shown.)
        </p><p>
          This also works with JSON array values, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE tj10 (a JSON, b INT);</code></strong>
Query OK, 0 rows affected (0.26 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO tj10</code></strong>
     &gt; <strong class="userinput"><code>VALUES ("[3,10,5,17,44]", 33), ("[3,10,5,17,[22,44,66]]", 0);</code></strong>
Query OK, 1 row affected (0.04 sec)

mysql&gt; <strong class="userinput"><code>SELECT a-&gt;"$[4]" FROM tj10;</code></strong>
+--------------+
| a-&gt;"$[4]"    |
+--------------+
| 44           |
| [22, 44, 66] |
+--------------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM tj10 WHERE a-&gt;"$[0]" = 3;</code></strong>
+------------------------------+------+
| a                            | b    |
+------------------------------+------+
| [3, 10, 5, 17, 44]           |   33 |
| [3, 10, 5, 17, [22, 44, 66]] |    0 |
+------------------------------+------+
2 rows in set (0.00 sec)
</pre><p>
          Nested arrays are supported. An expression using
          <code class="literal">-&gt;</code> evaluates as <code class="literal">NULL</code>
          if no matching key is found in the target JSON document, as
          shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM tj10 WHERE a-&gt;"$[4][1]" IS NOT NULL;</code></strong>
+------------------------------+------+
| a                            | b    |
+------------------------------+------+
| [3, 10, 5, 17, [22, 44, 66]] |    0 |
+------------------------------+------+

mysql&gt; <strong class="userinput"><code>SELECT a-&gt;"$[4][1]" FROM tj10;</code></strong>
+--------------+
| a-&gt;"$[4][1]" |
+--------------+
| NULL         |
| 44           |
+--------------+
2 rows in set (0.00 sec)
</pre><p>
          This is the same behavior as seen in such cases when using
          <code class="literal">JSON_EXTRACT()</code>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_EXTRACT(a, "$[4][1]") FROM tj10;</code></strong>
+----------------------------+
| JSON_EXTRACT(a, "$[4][1]") |
+----------------------------+
| NULL                       |
| 44                         |
+----------------------------+
2 rows in set (0.00 sec)
</pre></li><li class="listitem"><a id="operator_json-inline-path"></a><p>
          <a class="link" href="json-search-functions.html#operator_json-inline-path"><code class="literal"><em class="replaceable"><code>column</code></em>-&gt;&gt;<em class="replaceable"><code>path</code></em></code></a>
        </p><a id="idm45828921634016" class="indexterm"></a><p>
          This is an improved, unquoting extraction operator. Whereas
          the <code class="literal">-&gt;</code> operator simply extracts a value,
          the <code class="literal">-&gt;&gt;</code> operator in addition unquotes
          the extracted result. In other words, given a
          <a class="link" href="json.html" title="11.5 The JSON Data Type"><code class="literal">JSON</code></a> column value
          <em class="replaceable"><code>column</code></em> and a path expression
          <em class="replaceable"><code>path</code></em> (a string literal), the
          following three expressions return the same value:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="json-modification-functions.html#function_json-unquote"><code class="literal">JSON_UNQUOTE(</code></a>
              <a class="link" href="json-search-functions.html#function_json-extract"><code class="literal">JSON_EXTRACT(<em class="replaceable"><code>column</code></em>,
              <em class="replaceable"><code>path</code></em>) )</code></a>
            </p></li><li class="listitem"><p>
              <code class="literal">JSON_UNQUOTE(<em class="replaceable"><code>column</code></em></code>
              <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>
              <code class="literal"><em class="replaceable"><code>path</code></em>)</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>column</code></em>-&gt;&gt;<em class="replaceable"><code>path</code></em></code>
            </p></li></ul></div><p>
          The <code class="literal">-&gt;&gt;</code> operator can be used wherever
          <code class="literal">JSON_UNQUOTE(JSON_EXTRACT())</code> would be
          allowed. This includes (but is not limited to)
          <code class="literal">SELECT</code> lists, <code class="literal">WHERE</code> and
          <code class="literal">HAVING</code> clauses, and <code class="literal">ORDER
          BY</code> and <code class="literal">GROUP BY</code> clauses.
        </p><p>
          The next few statements demonstrate some
          <code class="literal">-&gt;&gt;</code> operator equivalences with other
          expressions in the <a class="link" href="mysql.html" title="4.5.1 mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM jemp WHERE g &gt; 2;</code></strong>
+-------------------------------+------+
| c                             | g    |
+-------------------------------+------+
| {"id": "3", "name": "Barney"} |    3 |
| {"id": "4", "name": "Betty"}  |    4 |
+-------------------------------+------+
2 rows in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT c-&gt;'$.name' AS name</code></strong>
    -&gt;     <strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong>
+----------+
| name     |
+----------+
| "Barney" |
| "Betty"  |
+----------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_UNQUOTE(c-&gt;'$.name') AS name</code></strong>
    -&gt;     <strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong>
+--------+
| name   |
+--------+
| Barney |
| Betty  |
+--------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT c-&gt;&gt;'$.name' AS name</code></strong>
    -&gt;     <strong class="userinput"><code>FROM jemp WHERE g &gt; 2;</code></strong>
+--------+
| name   |
+--------+
| Barney |
| Betty  |
+--------+
2 rows in set (0.00 sec)
</pre><p>
          See <a class="xref" href="create-table-secondary-indexes.html#json-column-indirect-index" title="Indexing a Generated Column to Provide a JSON Column Index">Indexing a Generated Column to Provide a JSON Column Index</a>, for the SQL
          statements used to create and populate the
          <code class="literal">jemp</code> table in the set of examples just
          shown.
        </p><p>
          This operator can also be used with JSON arrays, as shown
          here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE tj10 (a JSON, b INT);</code></strong>
Query OK, 0 rows affected (0.26 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO tj10 VALUES</code></strong>
    -&gt;     <strong class="userinput"><code>('[3,10,5,"x",44]', 33),</code></strong>
    -&gt;     <strong class="userinput"><code>('[3,10,5,17,[22,"y",66]]', 0);</code></strong>
Query OK, 2 rows affected (0.04 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT a-&gt;"$[3]", a-&gt;"$[4][1]" FROM tj10;</code></strong>
+-----------+--------------+
| a-&gt;"$[3]" | a-&gt;"$[4][1]" |
+-----------+--------------+
| "x"       | NULL         |
| 17        | "y"          |
+-----------+--------------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT a-&gt;&gt;"$[3]", a-&gt;&gt;"$[4][1]" FROM tj10;</code></strong>
+------------+---------------+
| a-&gt;&gt;"$[3]" | a-&gt;&gt;"$[4][1]" |
+------------+---------------+
| x          | NULL          |
| 17         | y             |
+------------+---------------+
2 rows in set (0.00 sec)
</pre><p>
          As with
          <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>,
          the <code class="literal">-&gt;&gt;</code> operator is always expanded
          in the output of <a class="link" href="explain.html" title="13.8.2 EXPLAIN Statement"><code class="literal">EXPLAIN</code></a>, as
          the following example demonstrates:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT c-&gt;&gt;'$.name' AS name</code></strong>
    -&gt;     <strong class="userinput"><code>FROM jemp WHERE g &gt; 2\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: jemp
   partitions: NULL
         type: range
possible_keys: i
          key: i
      key_len: 5
          ref: NULL
         rows: 2
     filtered: 100.00
        Extra: Using where
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Note
   Code: 1003
Message: /* select#1 */ select
json_unquote(json_extract(`jtest`.`jemp`.`c`,'$.name')) AS `name` from
`jtest`.`jemp` where (`jtest`.`jemp`.`g` &gt; 2)
1 row in set (0.00 sec)
</pre><p>
          This is similar to how MySQL expands the
          <a class="link" href="json-search-functions.html#operator_json-column-path"><code class="literal">-&gt;</code></a>
          operator in the same circumstances.
        </p></li><li class="listitem"><a id="function_json-keys"></a><p>
          <a class="link" href="json-search-functions.html#function_json-keys"><code class="literal">JSON_KEYS(<em class="replaceable"><code>json_doc</code></em>[,
          <em class="replaceable"><code>path</code></em>])</code></a>
        </p><a id="idm45828921576352" class="indexterm"></a><p>
          Returns the keys from the top-level value of a JSON object as
          a JSON array, or, if a <em class="replaceable"><code>path</code></em>
          argument is given, the top-level keys from the selected path.
          Returns <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code>, the
          <em class="replaceable"><code>json_doc</code></em> argument is not an object,
          or <em class="replaceable"><code>path</code></em>, if given, does not locate
          an object. An error occurs if the
          <em class="replaceable"><code>json_doc</code></em> argument is not a valid
          JSON document or the <em class="replaceable"><code>path</code></em> argument
          is not a valid path expression or contains a
          <code class="literal">*</code> or <code class="literal">**</code> wildcard.
        </p><p>
          The result array is empty if the selected object is empty. If
          the top-level value has nested subobjects, the return value
          does not include keys from those subobjects.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_KEYS('{"a": 1, "b": {"c": 30}}');</code></strong>
+---------------------------------------+
| JSON_KEYS('{"a": 1, "b": {"c": 30}}') |
+---------------------------------------+
| ["a", "b"]                            |
+---------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT JSON_KEYS('{"a": 1, "b": {"c": 30}}', '$.b');</code></strong>
+----------------------------------------------+
| JSON_KEYS('{"a": 1, "b": {"c": 30}}', '$.b') |
+----------------------------------------------+
| ["c"]                                        |
+----------------------------------------------+
</pre></li><li class="listitem"><a id="function_json-overlaps"></a><p>
          <a class="link" href="json-search-functions.html#function_json-overlaps"><code class="literal">JSON_OVERLAPS(<em class="replaceable"><code>json_doc1</code></em>,
          <em class="replaceable"><code>json_doc2</code></em>)</code></a>
        </p><a id="idm45828921557792" class="indexterm"></a><p>
          Compares two JSON documents. Returns true (1) if the two
          document have any key-value pairs or array elements in common.
          If both arguments are scalars, the function performs a simple
          equality test. If either argument is <code class="literal">NULL</code>,
          the function returns <code class="literal">NULL</code>.
        </p><p>
          This function serves as counterpart to
          <a class="link" href="json-search-functions.html#function_json-contains"><code class="literal">JSON_CONTAINS()</code></a>, which requires
          all elements of the array searched for to be present in the
          array searched in. Thus, <code class="literal">JSON_CONTAINS()</code>
          performs an <code class="literal">AND</code> operation on search keys,
          while <code class="literal">JSON_OVERLAPS()</code> performs an
          <code class="literal">OR</code> operation.
        </p><p>
          Queries on JSON columns of <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
          tables using <code class="literal">JSON_OVERLAPS()</code> in the
          <code class="literal">WHERE</code> clause can be optimized using
          multi-valued indexes.
          <a class="xref" href="create-index.html#create-index-multi-valued" title="Multi-Valued Indexes">Multi-Valued Indexes</a>, provides detailed
          information and examples.
        </p><p>
          When comparing two arrays, <code class="literal">JSON_OVERLAPS()</code>
          returns true if they share one or more array elements in
          common, and false if they do not:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS("[1,3,5,7]", "[2,5,7]");</code></strong>
+---------------------------------------+
| JSON_OVERLAPS("[1,3,5,7]", "[2,5,7]") |
+---------------------------------------+
|                                     1 |
+---------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS("[1,3,5,7]", "[2,6,7]");</code></strong>
+---------------------------------------+
| JSON_OVERLAPS("[1,3,5,7]", "[2,6,7]") |
+---------------------------------------+
|                                     1 |
+---------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS("[1,3,5,7]", "[2,6,8]");</code></strong>
+---------------------------------------+
| JSON_OVERLAPS("[1,3,5,7]", "[2,6,8]") |
+---------------------------------------+
|                                     0 |
+---------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          Partial matches are treated as no match, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('[[1,2],[3,4],5]', '[1,[2,3],[4,5]]');</code></strong>
+-----------------------------------------------------+
| JSON_OVERLAPS('[[1,2],[3,4],5]', '[1,[2,3],[4,5]]') |
+-----------------------------------------------------+
|                                                   0 |
+-----------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          When comparing objects, the result is true if they have at
          least one key-value pair in common.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('{"a":1,"b":10,"d":10}', '{"c":1,"e":10,"f":1,"d":10}');</code></strong>
+-----------------------------------------------------------------------+
| JSON_OVERLAPS('{"a":1,"b":10,"d":10}', '{"c":1,"e":10,"f":1,"d":10}') |
+-----------------------------------------------------------------------+
|                                                                     1 |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('{"a":1,"b":10,"d":10}', '{"a":5,"e":10,"f":1,"d":20}');</code></strong>
+-----------------------------------------------------------------------+
| JSON_OVERLAPS('{"a":1,"b":10,"d":10}', '{"a":5,"e":10,"f":1,"d":20}') |
+-----------------------------------------------------------------------+
|                                                                     0 |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          If two scalars are used as the arguments to the function,
          <code class="literal">JSON_OVERLAPS()</code> performs a simple test for
          equality:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('5', '5');</code></strong>
+-------------------------+
| JSON_OVERLAPS('5', '5') |
+-------------------------+
|                       1 |
+-------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('5', '6');</code></strong>
+-------------------------+
| JSON_OVERLAPS('5', '6') |
+-------------------------+
|                       0 |
+-------------------------+
1 row in set (0.00 sec)
</pre><p>
          When comparing a scalar with an array,
          <code class="literal">JSON_OVERLAPS()</code> attempts to treat the
          scalar as an array element. In this example, the second
          argument <code class="literal">6</code> is interpreted as
          <code class="literal">[6]</code>, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('[4,5,6,7]', '6');</code></strong>
+---------------------------------+
| JSON_OVERLAPS('[4,5,6,7]', '6') |
+---------------------------------+
|                               1 |
+---------------------------------+
1 row in set (0.00 sec)
</pre><p>
          The function does not perform type conversions:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('[4,5,"6",7]', '6');</code></strong>
+-----------------------------------+
| JSON_OVERLAPS('[4,5,"6",7]', '6') |
+-----------------------------------+
|                                 0 |
+-----------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT JSON_OVERLAPS('[4,5,6,7]', '"6"');</code></strong>
+-----------------------------------+
| JSON_OVERLAPS('[4,5,6,7]', '"6"') |
+-----------------------------------+
|                                 0 |
+-----------------------------------+
1 row in set (0.00 sec)
</pre><p>
          <code class="literal">JSON_OVERLAPS()</code> was added in MySQL 8.0.17.
        </p></li><li class="listitem"><a id="function_json-search"></a><p>
          <a class="link" href="json-search-functions.html#function_json-search"><code class="literal">JSON_SEARCH(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>one_or_all</code></em>,
          <em class="replaceable"><code>search_str</code></em>[,
          <em class="replaceable"><code>escape_char</code></em>[,
          <em class="replaceable"><code>path</code></em>] ...])</code></a>
        </p><a id="idm45828921511088" class="indexterm"></a><p>
          Returns the path to the given string within a JSON document.
          Returns <code class="literal">NULL</code> if any of the
          <em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>search_str</code></em>, or
          <em class="replaceable"><code>path</code></em> arguments are
          <code class="literal">NULL</code>; no <em class="replaceable"><code>path</code></em>
          exists within the document; or
          <em class="replaceable"><code>search_str</code></em> is not found. An error
          occurs if the <em class="replaceable"><code>json_doc</code></em> argument is
          not a valid JSON document, any <em class="replaceable"><code>path</code></em>
          argument is not a valid path expression,
          <em class="replaceable"><code>one_or_all</code></em> is not
          <code class="literal">'one'</code> or <code class="literal">'all'</code>, or
          <em class="replaceable"><code>escape_char</code></em> is not a constant
          expression.
        </p><p>
          The <em class="replaceable"><code>one_or_all</code></em> argument affects the
          search as follows:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">'one'</code>: The search terminates after the
              first match and returns one path string. It is undefined
              which match is considered first.
            </p></li><li class="listitem"><p>
              <code class="literal">'all'</code>: The search returns all matching
              path strings such that no duplicate paths are included. If
              there are multiple strings, they are autowrapped as an
              array. The order of the array elements is undefined.
            </p></li></ul></div><p>
          Within the <em class="replaceable"><code>search_str</code></em> search string
          argument, the <code class="literal">%</code> and <code class="literal">_</code>
          characters work as for the <a class="link" href="string-comparison-functions.html#operator_like"><code class="literal">LIKE</code></a>
          operator: <code class="literal">%</code> matches any number of
          characters (including zero characters), and
          <code class="literal">_</code> matches exactly one character.
        </p><p>
          To specify a literal <code class="literal">%</code> or
          <code class="literal">_</code> character in the search string, precede
          it by the escape character. The default is
          <code class="literal">\</code> if the
          <em class="replaceable"><code>escape_char</code></em> argument is missing or
          <code class="literal">NULL</code>. Otherwise,
          <em class="replaceable"><code>escape_char</code></em> must be a constant that
          is empty or one character.
        </p><p>
          For more information about matching and escape character
          behavior, see the description of
          <a class="link" href="string-comparison-functions.html#operator_like"><code class="literal">LIKE</code></a> in
          <a class="xref" href="string-comparison-functions.html" title="12.8.1 String Comparison Functions and Operators">Section 12.8.1, “String Comparison Functions and Operators”</a>. For escape
          character handling, a difference from the
          <a class="link" href="string-comparison-functions.html#operator_like"><code class="literal">LIKE</code></a> behavior is that the escape
          character for <a class="link" href="json-search-functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a>
          must evaluate to a constant at compile time, not just at
          execution time. For example, if
          <a class="link" href="json-search-functions.html#function_json-search"><code class="literal">JSON_SEARCH()</code></a> is used in a
          prepared statement and the
          <em class="replaceable"><code>escape_char</code></em> argument is supplied
          using a <code class="literal">?</code> parameter, the parameter value
          might be constant at execution time, but is not at compile
          time.
        </p><p>
          <em class="replaceable"><code>search_str</code></em> and
          <em class="replaceable"><code>path</code></em> are always interpreted as
          utf8mb4 strings, regardless of their actual encoding. This is
          a known issue which is fixed in MySQL 8.0.24 (



          Bug #32449181).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @j = '["abc", [{"k": "10"}, "def"], {"x":"abc"}, {"y":"bcd"}]';</code></strong>

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'one', 'abc');</code></strong>
+-------------------------------+
| JSON_SEARCH(@j, 'one', 'abc') |
+-------------------------------+
| "$[0]"                        |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'abc');</code></strong>
+-------------------------------+
| JSON_SEARCH(@j, 'all', 'abc') |
+-------------------------------+
| ["$[0]", "$[2].x"]            |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'ghi');</code></strong>
+-------------------------------+
| JSON_SEARCH(@j, 'all', 'ghi') |
+-------------------------------+
| NULL                          |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10');</code></strong>
+------------------------------+
| JSON_SEARCH(@j, 'all', '10') |
+------------------------------+
| "$[1][0].k"                  |
+------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');</code></strong>
+-----------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$') |
+-----------------------------------------+
| "$[1][0].k"                             |
+-----------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');</code></strong>
+--------------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$[*]') |
+--------------------------------------------+
| "$[1][0].k"                                |
+--------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');</code></strong>
+---------------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$**.k') |
+---------------------------------------------+
| "$[1][0].k"                                 |
+---------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');</code></strong>
+-------------------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k') |
+-------------------------------------------------+
| "$[1][0].k"                                     |
+-------------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');</code></strong>
+--------------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$[1]') |
+--------------------------------------------+
| "$[1][0].k"                                |
+--------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');</code></strong>
+-----------------------------------------------+
| JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]') |
+-----------------------------------------------+
| "$[1][0].k"                                   |
+-----------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');</code></strong>
+---------------------------------------------+
| JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]') |
+---------------------------------------------+
| "$[2].x"                                    |
+---------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%a%');</code></strong>
+-------------------------------+
| JSON_SEARCH(@j, 'all', '%a%') |
+-------------------------------+
| ["$[0]", "$[2].x"]            |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%');</code></strong>
+-------------------------------+
| JSON_SEARCH(@j, 'all', '%b%') |
+-------------------------------+
| ["$[0]", "$[2].x", "$[3].y"]  |
+-------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');</code></strong>
+---------------------------------------------+
| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]') |
+---------------------------------------------+
| "$[0]"                                      |
+---------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');</code></strong>
+---------------------------------------------+
| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]') |
+---------------------------------------------+
| "$[2].x"                                    |
+---------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');</code></strong>
+---------------------------------------------+
| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]') |
+---------------------------------------------+
| NULL                                        |
+---------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');</code></strong>
+-------------------------------------------+
| JSON_SEARCH(@j, 'all', '%b%', '', '$[1]') |
+-------------------------------------------+
| NULL                                      |
+-------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');</code></strong>
+-------------------------------------------+
| JSON_SEARCH(@j, 'all', '%b%', '', '$[3]') |
+-------------------------------------------+
| "$[3].y"                                  |
+-------------------------------------------+
</pre><p>
          For more information about the JSON path syntax supported by
          MySQL, including rules governing the wildcard operators
          <code class="literal">*</code> and <code class="literal">**</code>, see
          <a class="xref" href="json.html#json-path-syntax" title="JSON Path Syntax">JSON Path Syntax</a>.
        </p></li><li class="listitem"><a id="function_json-value"></a><p>
          <a class="link" href="json-search-functions.html#function_json-value"><code class="literal">JSON_VALUE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em>)</code></a>
        </p><a id="idm45828921445984" class="indexterm"></a><p>
          Extracts a value from a JSON document at the path given in the
          specified document, and returns the extracted value,
          optionally converting it to a desired type. The complete
          syntax is shown here:
        </p><pre class="programlisting">JSON_VALUE(<em class="replaceable"><code>json_doc</code></em>, <em class="replaceable"><code>path</code></em> [RETURNING <em class="replaceable"><code>type</code></em>] [<em class="replaceable"><code>on_empty</code></em>] [<em class="replaceable"><code>on_error</code></em>])

<em class="replaceable"><code>on_empty</code></em>:
    {NULL | ERROR | DEFAULT <em class="replaceable"><code>value</code></em>} ON EMPTY

<em class="replaceable"><code>on_error</code></em>:
    {NULL | ERROR | DEFAULT <em class="replaceable"><code>value</code></em>} ON ERROR
</pre><p>
          <em class="replaceable"><code>json_doc</code></em> is a valid JSON document.
          If this is <code class="literal">NULL</code>, the function returns
          <code class="literal">NULL</code>.
        </p><p>
          <em class="replaceable"><code>path</code></em> is a JSON path pointing to a
          location in the document. This must be a string literal value.
        </p><p>
          <em class="replaceable"><code>type</code></em> is one of the following data
          types:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="floating-point-types.html" title="11.1.4 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="floating-point-types.html" title="11.1.4 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="fixed-point-types.html" title="11.1.3 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>
            </p></li><li class="listitem"><p>
              <code class="literal">SIGNED</code>
            </p></li><li class="listitem"><p>
              <code class="literal">UNSIGNED</code>
            </p></li><li class="listitem"><p>
              <a class="link" href="datetime.html" title="11.2.2 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="time.html" title="11.2.3 The TIME Type"><code class="literal">TIME</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="datetime.html" title="11.2.2 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="year.html" title="11.2.4 The YEAR Type"><code class="literal">YEAR</code></a> (MySQL 8.0.22 and
              later)
            </p><p>
              <code class="literal">YEAR</code> values of one or two digits are
              not supported.
            </p></li><li class="listitem"><p>
              <a class="link" href="char.html" title="11.3.2 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="json.html" title="11.5 The JSON Data Type"><code class="literal">JSON</code></a>
            </p></li></ul></div><p>
          The types just listed are the same as the (non-array) types
          supported by the <a class="link" href="cast-functions.html#function_cast"><code class="literal">CAST()</code></a>
          function.
        </p><p>
          If not specified by a <code class="literal">RETURNING</code> clause, the
          <code class="literal">JSON_VALUE()</code> function's return type is
          <a class="link" href="char.html" title="11.3.2 The CHAR and VARCHAR Types"><code class="literal">VARCHAR(512)</code></a>. When no character
          set is specified for the return type,
          <code class="literal">JSON_VALUE()</code> uses
          <code class="literal">utf8mb4</code> with the binary collation, which is
          case-sensitive; if <code class="literal">utf8mb4</code> is specified as
          the character set for the result, the server uses the default
          collation for this character set, which is not case-sensitive.
        </p><p>
          When the data at the specified path consists of or resolves to
          a JSON null literal, the function returns SQL
          <code class="literal">NULL</code>.
        </p><p>
          <em class="replaceable"><code>on_empty</code></em>, if specified, determines
          how <code class="literal">JSON_VALUE()</code> behaves when no data is
          found at the path given; this clause takes one of the
          following values:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">NULL ON EMPTY</code>: The function returns
              <code class="literal">NULL</code>; this is the default <code class="literal">ON
              EMPTY</code> behavior.
            </p></li><li class="listitem"><p>
              <code class="literal">DEFAULT <em class="replaceable"><code>value</code></em> ON
              EMPTY</code>: the provided
              <em class="replaceable"><code>value</code></em> is returned. The
              value's type must match that of the return type.
            </p></li><li class="listitem"><p>
              <code class="literal">ERROR ON EMPTY</code>: The function throws an
              error.
            </p></li></ul></div><p>
          If used, <em class="replaceable"><code>on_error</code></em> takes one of the
          following values with the corresponding outcome when an error
          occurs, as listed here:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">NULL ON ERROR</code>:
              <code class="literal">JSON_VALUE()</code> returns
              <code class="literal">NULL</code>; this is the default behavior if
              no <code class="literal">ON ERROR</code> clause is used.
            </p></li><li class="listitem"><p>
              <code class="literal">DEFAULT <em class="replaceable"><code>value</code></em> ON
              ERROR</code>: This is the value returned; its value
              must match that of the return type.
            </p></li><li class="listitem"><p>
              <code class="literal">ERROR ON ERROR</code>: An error is thrown.
            </p></li></ul></div><p>
          <code class="literal">ON EMPTY</code>, if used, must precede any
          <code class="literal">ON ERROR</code> clause. Specifying them in the
          wrong order results in a syntax error.
        </p><p><strong>Error handling. </strong>
            In general, errors are handled by
            <code class="literal">JSON_VALUE()</code> as follows:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              All JSON input (document and path) is checked for
              validity. If any of it is not valid, an SQL error is
              thrown without triggering the <code class="literal">ON ERROR</code>
              clause.
            </p></li><li class="listitem"><p>
              <code class="literal">ON ERROR</code> is triggered whenever any of
              the following events occur:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  Attempting to extract an object or an array, such as
                  that resulting from a path that resolves to multiple
                  locations within the JSON document
                </p></li><li class="listitem"><p>
                  Conversion errors, such as attempting to convert
                  <code class="literal">'asdf'</code> to an
                  <code class="literal">UNSIGNED</code> value
                </p></li><li class="listitem"><p>
                  Truncation of values
                </p></li></ul></div></li><li class="listitem"><p>
              A conversion error always triggers a warning even if
              <code class="literal">NULL ON ERROR</code> or <code class="literal">DEFAULT ...
              ON ERROR</code> is specified.
            </p></li><li class="listitem"><p>
              The <code class="literal">ON EMPTY</code> clause is triggered when
              the source JSON document (<em class="replaceable"><code>expr</code></em>)
              contains no data at the specified location
              (<em class="replaceable"><code>path</code></em>).
            </p></li></ul></div><p>
          <code class="literal">JSON_VALUE()</code> was introduced in MySQL
          8.0.21.
        </p><p><strong>Examples. </strong>
            Two simple examples are shown here:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_VALUE('{"fname": "Joe", "lname": "Palmer"}', '$.fname');</code></strong>
+--------------------------------------------------------------+
| JSON_VALUE('{"fname": "Joe", "lname": "Palmer"}', '$.fname') |
+--------------------------------------------------------------+
| Joe                                                          |
+--------------------------------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT JSON_VALUE('{"item": "shoes", "price": "49.95"}', '$.price'</code></strong>
    -&gt; <strong class="userinput"><code>RETURNING DECIMAL(4,2)) AS price;</code></strong>
+-------+
| price |
+-------+
| 49.95 |
+-------+
</pre><p>
          The statement <code class="literal">SELECT
          JSON_VALUE(<em class="replaceable"><code>json_doc</code></em>,
          <em class="replaceable"><code>path</code></em> RETURNING
          <em class="replaceable"><code>type</code></em>)</code> is equivalent to
          the following statement:
        </p><pre class="programlisting">SELECT CAST(
    JSON_UNQUOTE( JSON_EXTRACT(<em class="replaceable"><code>json_doc</code></em>, <em class="replaceable"><code>path</code></em>) )
    AS <em class="replaceable"><code>type</code></em>
);
</pre><p>
          <code class="literal">JSON_VALUE()</code> simplifies creating indexes on
          JSON columns by making it unnecessary in many cases to create
          a generated column and then an index on the generated column.
          You can do this when creating a table <code class="literal">t1</code>
          that has a <a class="link" href="json.html" title="11.5 The JSON Data Type"><code class="literal">JSON</code></a> column by
          creating an index on an expression that uses
          <code class="literal">JSON_VALUE()</code> operating on that column (with
          a path that matches a value in that column), as shown here:
        </p><pre class="programlisting">CREATE TABLE t1(
    j JSON,
    INDEX i1 ( (JSON_VALUE(j, '$.id' RETURNING UNSIGNED)) )
);
</pre><p>
          The following <a class="link" href="explain.html" title="13.8.2 EXPLAIN Statement"><code class="literal">EXPLAIN</code></a> output
          shows that a query against <code class="literal">t1</code> employing the
          index expression in the <code class="literal">WHERE</code> clause uses
          the index thus created:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT * FROM t1</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE JSON_VALUE(j, '$.id' RETURNING UNSIGNED) = 123\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: t1
   partitions: NULL
         type: ref
possible_keys: i1
          key: i1
      key_len: 9
          ref: const
         rows: 1
     filtered: 100.00
        Extra: NULL
</pre><p>
          This achieves much the same effect as creating a table
          <code class="literal">t2</code> with an index on a generated column (see
          <a class="xref" href="create-table-secondary-indexes.html#json-column-indirect-index" title="Indexing a Generated Column to Provide a JSON Column Index">Indexing a Generated Column to Provide a JSON Column Index</a>), like this one:
        </p><pre class="programlisting">CREATE TABLE t2 (
    j JSON,
    g INT GENERATED ALWAYS AS (j-&gt;"$.id"),
    INDEX i1 (g)
);
</pre><p>
          The <a class="link" href="explain.html" title="13.8.2 EXPLAIN Statement"><code class="literal">EXPLAIN</code></a> output for a query
          against this table, referencing the generated column, shows
          that the index is used in the same way as for the previous
          query against table <code class="literal">t1</code>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT * FROM t2 WHERE g  = 123\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: t2
   partitions: NULL
         type: ref
possible_keys: i1
          key: i1
      key_len: 5
          ref: const
         rows: 1
     filtered: 100.00
        Extra: NULL
</pre><p>
          For information about using indexes on generated columns for
          indirect indexing of <a class="link" href="json.html" title="11.5 The JSON Data Type"><code class="literal">JSON</code></a>
          columns, see <a class="xref" href="create-table-secondary-indexes.html#json-column-indirect-index" title="Indexing a Generated Column to Provide a JSON Column Index">Indexing a Generated Column to Provide a JSON Column Index</a>.
        </p></li><li class="listitem"><a id="operator_member-of"></a><p>
          <a class="link" href="json-search-functions.html#operator_member-of"><code class="literal"><em class="replaceable"><code>value</code></em>
          MEMBER OF(<em class="replaceable"><code>json_array</code></em>)</code></a>
        </p><a id="idm45828921330160" class="indexterm"></a><p>
          Returns true (1) if <em class="replaceable"><code>value</code></em> is an
          element of <em class="replaceable"><code>json_array</code></em>, otherwise
          returns false (0). <em class="replaceable"><code>value</code></em> must be a
          scalar or a JSON document; if it is a scalar, the operator
          attempts to treat it as an element of a JSON array. If
          <em class="replaceable"><code>value</code></em> or
          <em class="replaceable"><code>json_array</code></em> is
          <em class="replaceable"><code>NULL</code></em>, the function returns
          <em class="replaceable"><code>NULL</code></em>.
        </p><p>
          Queries using <code class="literal">MEMBER OF()</code> on JSON columns
          of <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables in the
          <code class="literal">WHERE</code> clause can be optimized using
          multi-valued indexes. See
          <a class="xref" href="create-index.html#create-index-multi-valued" title="Multi-Valued Indexes">Multi-Valued Indexes</a>, for detailed
          information and examples.
        </p><p>
          Simple scalars are treated as array values, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 17 MEMBER OF('[23, "abc", 17, "ab", 10]');</code></strong>
+-------------------------------------------+
| 17 MEMBER OF('[23, "abc", 17, "ab", 10]') |
+-------------------------------------------+
|                                         1 |
+-------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT 'ab' MEMBER OF('[23, "abc", 17, "ab", 10]');</code></strong>
+---------------------------------------------+
| 'ab' MEMBER OF('[23, "abc", 17, "ab", 10]') |
+---------------------------------------------+
|                                           1 |
+---------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          Partial matches of array element values do not match:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 7 MEMBER OF('[23, "abc", 17, "ab", 10]');</code></strong>
+------------------------------------------+
| 7 MEMBER OF('[23, "abc", 17, "ab", 10]') |
+------------------------------------------+
|                                        0 |
+------------------------------------------+
1 row in set (0.00 sec)
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'a' MEMBER OF('[23, "abc", 17, "ab", 10]');</code></strong>
+--------------------------------------------+
| 'a' MEMBER OF('[23, "abc", 17, "ab", 10]') |
+--------------------------------------------+
|                                          0 |
+--------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          Conversions to and from string types are not performed:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>17 MEMBER OF('[23, "abc", "17", "ab", 10]'),</code></strong>
    -&gt; <strong class="userinput"><code>"17" MEMBER OF('[23, "abc", 17, "ab", 10]')\G</code></strong>
*************************** 1. row ***************************
17 MEMBER OF('[23, "abc", "17", "ab", 10]'): 0
"17" MEMBER OF('[23, "abc", 17, "ab", 10]'): 0
1 row in set (0.00 sec)
</pre><p>
          To use this operator with a value which itself an array, it is
          necessary to cast it explicitly as a JSON array. You can do
          this with <a class="link" href="cast-functions.html#function_cast"><code class="literal">CAST(... AS JSON)</code></a>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST('[4,5]' AS JSON) MEMBER OF('[[3,4],[4,5]]');</code></strong>
+--------------------------------------------------+
| CAST('[4,5]' AS JSON) MEMBER OF('[[3,4],[4,5]]') |
+--------------------------------------------------+
|                                                1 |
+--------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          It is also possible to perform the necessary cast using the
          <a class="link" href="json-creation-functions.html#function_json-array"><code class="literal">JSON_ARRAY()</code></a> function, like
          this:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT JSON_ARRAY(4,5) MEMBER OF('[[3,4],[4,5]]');</code></strong>
+--------------------------------------------+
| JSON_ARRAY(4,5) MEMBER OF('[[3,4],[4,5]]') |
+--------------------------------------------+
|                                          1 |
+--------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          Any JSON objects used as values to be tested or which appear
          in the target array must be coerced to the correct type using
          <code class="literal">CAST(... AS JSON)</code> or
          <a class="link" href="json-creation-functions.html#function_json-object"><code class="literal">JSON_OBJECT()</code></a>. In addition, a
          target array containing JSON objects must itself be cast using
          <code class="literal">JSON_ARRAY</code>. This is demonstrated in the
          following sequence of statements:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @a = CAST('{"a":1}' AS JSON);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET @b = JSON_OBJECT("b", 2);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET @c = JSON_ARRAY(17, @b, "abc", @a, 23);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @a MEMBER OF(@c), @b MEMBER OF(@c);</code></strong>
+------------------+------------------+
| @a MEMBER OF(@c) | @b MEMBER OF(@c) |
+------------------+------------------+
|                1 |                1 |
+------------------+------------------+
1 row in set (0.00 sec)
</pre><p>
          The <code class="literal">MEMBER OF()</code> operator was added in MySQL
          8.0.17.
        </p></li></ul></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="json-creation-functions.html">Previous <span class="navHint"> Functions That Create JSON Values </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="json-functions.html">Up <span class="navHint"> JSON Functions </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="json-modification-functions.html">Next <span class="navHint"> Functions That Modify JSON Values </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>