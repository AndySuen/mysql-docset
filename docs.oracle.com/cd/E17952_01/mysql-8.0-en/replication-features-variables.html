<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>17.5.1.39 Replication and Variables</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="replication-features.html" title="17.5.1 Replication Features and Issues" /><link rel="prev" href="replication-features-user-names.html" title="17.5.1.38 Replication and User Name Length" /><link rel="next" href="replication-features-views.html" title="17.5.1.40 Replication and Views" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="replication-features-variables.html#replication-features-variables">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="replication-features-user-names.html">Previous <span class="navHint"> Replication and User Name Length </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="replication-features.html">Up <span class="navHint"> Replication Features and Issues </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="replication-features-views.html">Next <span class="navHint"> Replication and Views </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="replication-features-variables"></a>17.5.1.39 Replication and Variables</h4></div></div></div><a id="idm45828855917664" class="indexterm"></a><a id="idm45828855916176" class="indexterm"></a><a id="idm45828855914688" class="indexterm"></a><a id="idm45828855913200" class="indexterm"></a><a id="idm45828855911712" class="indexterm"></a><p>
        System variables are not replicated correctly when using
        <code class="literal">STATEMENT</code> mode, except for the following
        variables when they are used with session scope:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="replication-options-source.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="replication-options-source.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_database"><code class="literal">collation_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="literal">collation_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_identity"><code class="literal">identity</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_last_insert_id"><code class="literal">last_insert_id</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_pseudo_thread_id"><code class="literal">pseudo_thread_id</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_time_zone"><code class="literal">time_zone</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_timestamp"><code class="literal">timestamp</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_unique_checks"><code class="literal">unique_checks</code></a>
          </p></li></ul></div><p>
        When <code class="literal">MIXED</code> mode is used, the variables in the
        preceding list, when used with session scope, cause a switch
        from statement-based to row-based logging. See
        <a class="xref" href="binary-log-mixed.html" title="5.4.4.3 Mixed Binary Logging Format">Section 5.4.4.3, “Mixed Binary Logging Format”</a>.
      </p><p>
        <a class="link" href="server-system-variables.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> is also replicated
        except for the
        <a class="link" href="sql-mode.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a> mode; the
        replica always preserves its own value for
        <a class="link" href="sql-mode.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a>, regardless
        of changes to it on the source. This is true for all replication
        formats.
      </p><p>
        However, when <a class="link" href="mysqlbinlog.html" title="4.6.9 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> parses a
        <code class="literal">SET @@sql_mode =
        <em class="replaceable"><code>mode</code></em></code> statement, the full
        <em class="replaceable"><code>mode</code></em> value, including
        <a class="link" href="sql-mode.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a>, is passed to
        the receiving server. For this reason, replication of such a
        statement may not be safe when <code class="literal">STATEMENT</code> mode
        is in use.
      </p><p>
        The <a class="link" href="server-system-variables.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a>
        system variable is not replicated, regardless of the logging
        mode; this is intended to facilitate replication between
        different storage engines.
      </p><p>
        The <a class="link" href="server-system-variables.html#sysvar_read_only"><code class="literal">read_only</code></a> system variable
        is not replicated. In addition, the enabling this variable has
        different effects with regard to temporary tables, table
        locking, and the <a class="link" href="set-password.html" title="13.7.1.10 SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a>
        statement in different MySQL versions.
      </p><p>
        The <a class="link" href="server-system-variables.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> system
        variable is not replicated. Increasing the value of this
        variable on the source without doing so on the replica can lead
        eventually to <span class="errortext">Table is full</span> errors on the
        replica when trying to execute
        <a class="link" href="insert.html" title="13.2.7 INSERT Statement"><code class="literal">INSERT</code></a> statements on a
        <a class="link" href="memory-storage-engine.html" title="16.3 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> table on the source that is
        thus permitted to grow larger than its counterpart on the
        replica. For more information, see
        <a class="xref" href="replication-features-memory.html" title="17.5.1.21 Replication and MEMORY Tables">Section 17.5.1.21, “Replication and MEMORY Tables”</a>.
      </p><p>
        In statement-based replication, session variables are not
        replicated properly when used in statements that update tables.
        For example, the following sequence of statements does not
        insert the same data on the source and the replica:
      </p><pre class="programlisting">SET max_join_size=1000;
INSERT INTO mytable VALUES(@@max_join_size);
</pre><p>
        This does not apply to the common sequence:
      </p><pre class="programlisting">SET time_zone=...;
INSERT INTO mytable VALUES(CONVERT_TZ(..., ..., @@time_zone));
</pre><p>
        Replication of session variables is not a problem when row-based
        replication is being used, in which case, session variables are
        always replicated safely. See
        <a class="xref" href="replication-formats.html" title="17.2.1 Replication Formats">Section 17.2.1, “Replication Formats”</a>.
      </p><p>
        The following session variables are written to the binary log
        and honored by the replica when parsing the binary log,
        regardless of the logging format:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_unique_checks"><code class="literal">unique_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_database"><code class="literal">collation_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="literal">collation_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-system-variables.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          Even though session variables relating to character sets and
          collations are written to the binary log, replication between
          different character sets is not supported.
        </p></div><p>
        To help reduce possible confusion, we recommend that you always
        use the same setting for the
        <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable on both source and replica, especially when you are
        running MySQL on platforms with case-sensitive file systems. The
        <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> setting
        can only be configured when initializing the server.
      </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="replication-features-user-names.html">Previous <span class="navHint"> Replication and User Name Length </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="replication-features.html">Up <span class="navHint"> Replication Features and Issues </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="replication-features-views.html">Next <span class="navHint"> Replication and Views </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>