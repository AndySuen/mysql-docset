<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.4.7.2 Installing or Uninstalling MySQL Enterprise Firewall</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="firewall.html" title="6.4.7 MySQL Enterprise Firewall" /><link rel="prev" href="firewall-elements.html" title="6.4.7.1 Elements of MySQL Enterprise Firewall" /><link rel="next" href="firewall-usage.html" title="6.4.7.3 Using MySQL Enterprise Firewall" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="firewall-installation.html#firewall-installation">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="firewall-elements.html">Previous <span class="navHint"> Elements of MySQL Enterprise Firewall </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="firewall.html">Up <span class="navHint"> MySQL Enterprise Firewall </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="firewall-usage.html">Next <span class="navHint"> Using MySQL Enterprise Firewall </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="firewall-installation"></a>6.4.7.2 Installing or Uninstalling MySQL Enterprise Firewall</h4></div></div></div><a id="idm45828961560016" class="indexterm"></a><a id="idm45828961558544" class="indexterm"></a><p>
        MySQL Enterprise Firewall installation is a one-time operation that installs the
        elements described in <a class="xref" href="firewall-elements.html" title="6.4.7.1 Elements of MySQL Enterprise Firewall">Section 6.4.7.1, “Elements of MySQL Enterprise Firewall”</a>.
        Installation can be performed using a graphical interface or
        manually:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On Windows, MySQL Installer includes an option to enable MySQL Enterprise Firewall for
            you.
          </p></li><li class="listitem"><p>
            MySQL Workbench 6.3.4 or higher can install MySQL Enterprise Firewall, enable or
            disable an installed firewall, or uninstall the firewall.
          </p></li><li class="listitem"><p>
            Manual MySQL Enterprise Firewall installation involves running a script located
            in the <code class="filename">share</code> directory of your MySQL
            installation.
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          Read this entire section before following its instructions.
          Parts of the procedure differ depending on your environment.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          If installed, MySQL Enterprise Firewall involves some minimal overhead even when
          disabled. To avoid this overhead, do not install the firewall
          unless you plan to use it.
        </p></div><p>
        For usage instructions, see <a class="xref" href="firewall-usage.html" title="6.4.7.3 Using MySQL Enterprise Firewall">Section 6.4.7.3, “Using MySQL Enterprise Firewall”</a>.
        For reference information, see
        <a class="xref" href="firewall-reference.html" title="6.4.7.4 MySQL Enterprise Firewall Reference">Section 6.4.7.4, “MySQL Enterprise Firewall Reference”</a>.
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="firewall-installation.html#firewall-install" title="Installing MySQL Enterprise Firewall">Installing MySQL Enterprise Firewall</a></p></li><li class="listitem"><p><a class="xref" href="firewall-installation.html#firewall-uninstall" title="Uninstalling MySQL Enterprise Firewall">Uninstalling MySQL Enterprise Firewall</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="firewall-install"></a>Installing MySQL Enterprise Firewall</h5></div></div></div><p>
          If MySQL Enterprise Firewall is already installed from an older version of MySQL,
          uninstall it using the instructions given later in this
          section and then restart your server before installing the
          current version. In this case, it is also necessary to
          register your configuration again.
        </p><p>
          On Windows, you can use MySQL Installer to install MySQL Enterprise Firewall, as shown in
          <a class="xref" href="firewall-installation.html#firewall-installation-windows-installer" title="Figure 6.2 MySQL Enterprise Firewall Installation on Windows">Figure 6.2, “MySQL Enterprise Firewall Installation on Windows”</a>.
          Check the <span class="guilabel">Enable MySQL Enterprise
          Firewall</span> check box. (<span class="guilabel">Open Firewall port
          for network access</span> has a different purpose. It
          refers to Windows Firewall and controls whether Windows blocks
          the TCP/IP port on which the MySQL server listens for client
          connections.)
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
            There is an issue for MySQL 8.0.19 installed using MySQL Installer that
            prevents the server from starting if MySQL Enterprise Firewall is selected
            during the server configuration steps. If the server startup
            operation fails, click <span class="guibutton">Cancel</span> to end
            the configuration process and return to the dashboard. You
            must uninstall the server.
          </p><p>
            The workaround is to run MySQL Installer without MySQL Enterprise Firewall selected. (That
            is, do not select the <span class="guilabel">Enable MySQL Enterprise
            Firewall</span> check box.) Then install MySQL Enterprise Firewall
            afterward using the instructions for manual installation
            later in this section. This problem is corrected in MySQL
            8.0.20.
          </p></div><div class="figure"><a id="firewall-installation-windows-installer"></a><p class="title"><strong>Figure 6.2 MySQL Enterprise Firewall Installation on Windows</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/firewall-8-windows-installer-option.png" width="789" height="598" alt="Content is described in the surrounding text." /></div></div></div><br class="figure-break" /><p>
          To install MySQL Enterprise Firewall using MySQL Workbench 6.3.4 or higher, see
          <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/workbench-en/wb-mysql-firewall.html" target="_top">MySQL Enterprise Firewall Interface</a>.
        </p><p>
          To install MySQL Enterprise Firewall manually, look in the
          <code class="filename">share</code> directory of your MySQL
          installation and choose the script that is appropriate for
          your platform. The available scripts differ in the suffix used
          to refer to the plugin library file:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="filename">win_install_firewall.sql</code>: Choose this
              script for Windows systems that use
              <code class="filename">.dll</code> as the file name suffix.
            </p></li><li class="listitem"><p>
              <code class="filename">linux_install_firewall.sql</code>: Choose
              this script for Linux and similar systems that use
              <code class="filename">.so</code> as the file name suffix.
            </p></li></ul></div><p>
          The installation script creates stored procedures in the
          default database, so choose a database to use. Then run the
          script as follows, naming the chosen database on the command
          line. The example here uses the <code class="literal">mysql</code>
          system database and the Linux installation script. Make the
          appropriate substitutions for your system.
        </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysql -u root -p mysql &lt; linux_install_firewall.sql</code></strong>
Enter password: <em class="replaceable"><code>(enter root password here)</code></em>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            To use MySQL Enterprise Firewall in the context of source/replica replication,
            Group Replication, or InnoDB Cluster, you must prepare the
            replica nodes prior to running the installation script on
            the source node. This is necessary because the
            <a class="link" href="install-plugin.html" title="13.7.4.4 INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> statements in
            the script are not replicated.
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                On each replica node, extract the
                <a class="link" href="install-plugin.html" title="13.7.4.4 INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> statements
                from the installation script and execute them manually.
              </p></li><li class="listitem"><p>
                On the source node, run the installation script as
                described previously.
              </p></li></ol></div></div><p>
          Installing MySQL Enterprise Firewall either using a graphical interface or
          manually should enable the firewall. To verify that, connect
          to the server and execute this statement:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GLOBAL VARIABLES LIKE 'mysql_firewall_mode';</code></strong>
+---------------------+-------+
| Variable_name       | Value |
+---------------------+-------+
| mysql_firewall_mode | ON    |
+---------------------+-------+
</pre><p>
          If the plugin fails to initialize, check the server error log
          for diagnostic messages.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="firewall-uninstall"></a>Uninstalling MySQL Enterprise Firewall</h5></div></div></div><p>
          MySQL Enterprise Firewall can be uninstalled using MySQL Workbench or manually.
        </p><p>
          To uninstall MySQL Enterprise Firewall using MySQL Workbench 6.3.4 or higher, see
          <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/workbench-en/wb-mysql-firewall.html" target="_top">MySQL Enterprise Firewall Interface</a>, in
          <a class="xref" href="workbench.html" title="Chapter 31 MySQL Workbench">Chapter 31, <em>MySQL Workbench</em></a>.
        </p><p>
          To uninstall MySQL Enterprise Firewall manually, execute the following
          statements. Statements use <code class="literal">IF EXISTS</code>
          because, depending on the previously installed firewall
          version, some objects might not exist or might be dropped
          implicitly by uninstalling the plugin that installed them.
        </p><pre class="programlisting">DROP TABLE IF EXISTS mysql.firewall_group_allowlist;
DROP TABLE IF EXISTS mysql.firewall_groups;
DROP TABLE IF EXISTS mysql.firewall_membership;
DROP TABLE IF EXISTS mysql.firewall_users;
DROP TABLE IF EXISTS mysql.firewall_whitelist;

UNINSTALL PLUGIN MYSQL_FIREWALL;
UNINSTALL PLUGIN MYSQL_FIREWALL_USERS;
UNINSTALL PLUGIN MYSQL_FIREWALL_WHITELIST;

DROP FUNCTION IF EXISTS firewall_group_delist;
DROP FUNCTION IF EXISTS firewall_group_enlist;
DROP FUNCTION IF EXISTS mysql_firewall_flush_status;
DROP FUNCTION IF EXISTS normalize_statement;
DROP FUNCTION IF EXISTS read_firewall_group_allowlist;
DROP FUNCTION IF EXISTS read_firewall_groups;
DROP FUNCTION IF EXISTS read_firewall_users;
DROP FUNCTION IF EXISTS read_firewall_whitelist;
DROP FUNCTION IF EXISTS set_firewall_group_mode;
DROP FUNCTION IF EXISTS set_firewall_mode;

DROP PROCEDURE IF EXISTS mysql.sp_firewall_group_delist;
DROP PROCEDURE IF EXISTS mysql.sp_firewall_group_enlist;
DROP PROCEDURE IF EXISTS mysql.sp_reload_firewall_group_rules;
DROP PROCEDURE IF EXISTS mysql.sp_reload_firewall_rules;
DROP PROCEDURE IF EXISTS mysql.sp_set_firewall_group_mode;
DROP PROCEDURE IF EXISTS mysql.sp_set_firewall_group_mode_and_user;
DROP PROCEDURE IF EXISTS mysql.sp_set_firewall_mode;
</pre></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="firewall-elements.html">Previous <span class="navHint"> Elements of MySQL Enterprise Firewall </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="firewall.html">Up <span class="navHint"> MySQL Enterprise Firewall </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="firewall-usage.html">Next <span class="navHint"> Using MySQL Enterprise Firewall </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>