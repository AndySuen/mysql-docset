<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.12.4 Online DDL Memory Management</title><link rel="stylesheet" type="text/css" href="mvl-otn.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual" /><link rel="up" href="innodb-online-ddl.html" title="15.12 InnoDB and Online DDL" /><link rel="prev" href="innodb-online-ddl-space-requirements.html" title="15.12.3 Online DDL Space Requirements" /><link rel="next" href="online-ddl-parallel-thread-configuration.html" title="15.12.5 Configuring Parallel Threads for Online DDL Operations" /><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="online-ddl-memory-management.html#online-ddl-memory-management">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page [access key: p]" href="innodb-online-ddl-space-requirements.html">Previous <span class="navHint"> Online DDL Space Requirements </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page [access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation [access key: u]" href="innodb-online-ddl.html">Up <span class="navHint"> InnoDB and Online DDL </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page [access key: n]" href="online-ddl-parallel-thread-configuration.html">Next <span class="navHint"> Configuring Parallel Threads for Online DDL Operations </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="online-ddl-memory-management"></a>15.12.4 Online DDL Memory Management</h3></div></div></div><p>
      Online DDL operations that create or rebuild secondary indexes
      allocate temporary buffers during different phases of index
      creation. The
      <a class="link" href="innodb-parameters.html#sysvar_innodb_ddl_buffer_size"><code class="literal">innodb_ddl_buffer_size</code></a> variable,
      introduced in MySQL 8.0.27, defines the maximum buffer size for
      online DDL operations. The default setting is 1048576 bytes (1
      MB). The setting applies to buffers created by threads executing
      online DDL operations. Defining an appropriate buffer size limit
      avoids potential out of memory errors for online DDL operations
      that create or rebuild secondary indexes. The maximum buffer size
      per DDL thread is the maximum buffer size divided by the number of
      DDL threads
      (<a class="link" href="innodb-parameters.html#sysvar_innodb_ddl_buffer_size"><code class="literal">innodb_ddl_buffer_size</code></a>/<a class="link" href="innodb-parameters.html#sysvar_innodb_ddl_threads"><code class="literal">innodb_ddl_threads</code></a>).
    </p><p>
      Prior to MySQL 8.0.27,
      <a class="link" href="innodb-parameters.html#sysvar_innodb_sort_buffer_size"><code class="literal">innodb_sort_buffer_size</code></a> variable
      defines the buffer size for online DDL operations that create or
      rebuild secondary indexes.
    </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="innodb-online-ddl-space-requirements.html">Previous <span class="navHint"> Online DDL Space Requirements </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="innodb-online-ddl.html">Up <span class="navHint"> InnoDB and Online DDL </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="online-ddl-parallel-thread-configuration.html">Next <span class="navHint"> Configuring Parallel Threads for Online DDL Operations </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>