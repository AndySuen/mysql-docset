<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2302"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/23.6.16.53%C2%A0The%20ndbinfo%20server_locks%20Table"></a><title>23.6.16.53&nbsp;The ndbinfo server_locks Table</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="mysql-cluster-ndbinfo.html" title="23.6.16&nbsp;ndbinfo: The NDB Cluster Information Database"/><link rel="prev" href="mysql-cluster-ndbinfo-restart-info.html" title="23.6.16.52&nbsp;The ndbinfo restart_info Table"/><link rel="next" href="mysql-cluster-ndbinfo-server-operations.html" title="23.6.16.54&nbsp;The ndbinfo server_operations Table"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-cluster-ndbinfo-server-locks.html#mysql-cluster-ndbinfo-server-locks">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="mysql-cluster-ndbinfo-restart-info.html">Previous <span class="navHint"> The ndbinfo restart_info Table </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="mysql-cluster-ndbinfo.html">Up <span class="navHint"> ndbinfo: The NDB Cluster Information Database </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="mysql-cluster-ndbinfo-server-operations.html">Next <span class="navHint"> The ndbinfo server_operations Table </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-2301"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/23.6.16.53%C2%A0The%20ndbinfo%20server_locks%20Table"></a><h4 class="title"><a id="mysql-cluster-ndbinfo-server-locks"></a>23.6.16.53&nbsp;The ndbinfo server_locks Table</h4></div></div></div><a id="idm45828805776624" class="indexterm"></a><p>
        The <code class="literal">server_locks</code> table is similar in
        structure to the <code class="literal">cluster_locks</code> table, and
        provides a subset of the information found in the latter table,
        but which is specific to the SQL node (MySQL server) where it
        resides. (The <code class="literal">cluster_locks</code> table provides
        information about all locks in the cluster.) More precisely,
        <code class="literal">server_locks</code> contains information about locks
        requested by threads belonging to the current
        <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> instance, and serves as a companion
        table to <a class="link" href="mysql-cluster-ndbinfo-server-operations.html" title="23.6.16.54&nbsp;The ndbinfo server_operations Table"><code class="literal">server_operations</code></a>.
        This may be useful for correlating locking patterns with
        specific MySQL user sessions, queries, or use cases.
      </p><p>
        The <code class="literal">server_locks</code> table contains the following
        columns:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">mysql_connection_id</code>
          </p><p>
            MySQL connection ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ID of reporting node
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ID of reporting LDM instance
          </p></li><li class="listitem"><p>
            <code class="literal">tableid</code>
          </p><p>
            ID of table containing this row
          </p></li><li class="listitem"><p>
            <code class="literal">fragmentid</code>
          </p><p>
            ID of fragment containing locked row
          </p></li><li class="listitem"><p>
            <code class="literal">rowid</code>
          </p><p>
            ID of locked row
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            Transaction ID
          </p></li><li class="listitem"><p>
            <code class="literal">mode</code>
          </p><p>
            Lock request mode
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            Lock state
          </p></li><li class="listitem"><p>
            <code class="literal">detail</code>
          </p><p>
            Whether this is first holding lock in row lock queue
          </p></li><li class="listitem"><p>
            <code class="literal">op</code>
          </p><p>
            Operation type
          </p></li><li class="listitem"><p>
            <code class="literal">duration_millis</code>
          </p><p>
            Milliseconds spent waiting or holding lock
          </p></li><li class="listitem"><p>
            <code class="literal">lock_num</code>
          </p><p>
            ID of lock object
          </p></li><li class="listitem"><p>
            <code class="literal">waiting_for</code>
          </p><p>
            Waiting for lock with this ID
          </p></li></ul></div><h5><a id="idm45828805740656"></a>Notes</h5><p>
        The <code class="literal">mysql_connection_id</code> column shows the
        MySQL connection or thread ID as shown by
        <a class="link" href="show-processlist.html" title="13.7.7.29&nbsp;SHOW PROCESSLIST Statement"><code class="literal">SHOW PROCESSLIST</code></a>.
      </p><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster-ndbinfo-threadblocks.html" title="23.6.16.61&nbsp;The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        The <code class="literal">tableid</code> is assigned to the table by
        <code class="literal">NDB</code>; the same ID is used for this table in
        other <code class="literal">ndbinfo</code> tables, as well as in the
        output of <a class="link" href="mysql-cluster-programs-ndb-show-tables.html" title="23.5.27&nbsp;ndb_show_tables &mdash; Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The transaction ID shown in the <code class="literal">transid</code>
        column is the identifier generated by the NDB API for the
        transaction requesting or holding the current lock.
      </p><p>
        The <code class="literal">mode</code> column shows the lock mode, which is
        always one of <code class="literal">S</code> (shared lock) or
        <code class="literal">X</code> (exclusive lock). If a transaction has an
        exclusive lock on a given row, all other locks on that row have
        the same transaction ID.
      </p><p>
        The <code class="literal">state</code> column shows the lock state. Its
        value is always one of <code class="literal">H</code> (holding) or
        <code class="literal">W</code> (waiting). A waiting lock request waits for
        a lock held by a different transaction.
      </p><p>
        The <code class="literal">detail</code> column indicates whether this lock
        is the first holding lock in the affected row&#39;s lock queue,
        in which case it contains a <code class="literal">*</code> (asterisk
        character); otherwise, this column is empty. This information
        can be used to help identify the unique entries in a list of
        lock requests.
      </p><p>
        The <code class="literal">op</code> column shows the type of operation
        requesting the lock. This is always one of the values
        <code class="literal">READ</code>, <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
        <code class="literal">SCAN</code>, or <code class="literal">REFRESH</code>.
      </p><p>
        The <code class="literal">duration_millis</code> column shows the number
        of milliseconds for which this lock request has been waiting or
        holding the lock. This is reset to 0 when a lock is granted for
        a waiting request.
      </p><p>
        The lock ID (<code class="literal">lockid</code> column) is unique to this
        node and block instance.
      </p><p>
        If the <code class="literal">lock_state</code> column&#39;s value is
        <code class="literal">W</code>, this lock is waiting to be granted, and
        the <code class="literal">waiting_for</code> column shows the lock ID of
        the lock object this request is waiting for. Otherwise,
        <code class="literal">waiting_for</code> is empty.
        <code class="literal">waiting_for</code> can refer only to locks on the
        same row (as identified by <code class="literal">node_id</code>,
        <code class="literal">block_instance</code>, <code class="literal">tableid</code>,
        <code class="literal">fragmentid</code>, and <code class="literal">rowid</code>).
      </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-cluster-ndbinfo-restart-info.html">Previous <span class="navHint"> The ndbinfo restart_info Table </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="mysql-cluster-ndbinfo.html">Up <span class="navHint"> ndbinfo: The NDB Cluster Information Database </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysql-cluster-ndbinfo-server-operations.html">Next <span class="navHint"> The ndbinfo server_operations Table </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>