<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2441"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/23.5.3%C2%A0ndbmtd%20%E2%80%94%20The%20NDB%20Cluster%20Data%20Node%20Daemon%20%28Multi-Threaded%29"></a><title>23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="mysql-cluster-programs.html" title="23.5&nbsp;NDB Cluster Programs"/><link rel="prev" href="mysql-cluster-programs-ndbinfo-select-all.html" title="23.5.2&nbsp;ndbinfo_select_all &mdash; Select From ndbinfo Tables"/><link rel="next" href="mysql-cluster-programs-ndb-mgmd.html" title="23.5.4&nbsp;ndb_mgmd &mdash; The NDB Cluster Management Server Daemon"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-cluster-programs-ndbmtd.html#mysql-cluster-programs-ndbmtd">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="mysql-cluster-programs-ndbinfo-select-all.html">Previous <span class="navHint"> ndbinfo_select_all &mdash; Select From ndbinfo Tables </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="mysql-cluster-programs.html">Up <span class="navHint"> NDB Cluster Programs </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="mysql-cluster-programs-ndb-mgmd.html">Next <span class="navHint"> ndb_mgmd &mdash; The NDB Cluster Management Server Daemon </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql-cluster-programs-ndbmtd"></a>23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)</h3></div></div></div><a id="idm45828826928672" class="indexterm"></a><a id="idm45828826927792" class="indexterm"></a><a id="idm45828826926528" class="indexterm"></a><a id="idm45828826925264" class="indexterm"></a><a id="idm45828826924384" class="indexterm"></a><p>
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is a multithreaded version of
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, the process that is used to handle all
        the data in tables using the
        <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine.
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is intended for use on host computers
        having multiple CPU cores. Except where otherwise noted,
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> functions in the same way as
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>; therefore, in this section, we
        concentrate on the ways in which <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        differs from <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, and you should consult
        <a class="xref" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon">Section&nbsp;23.5.1, &ldquo;ndbd &mdash; The NDB Cluster Data Node Daemon&rdquo;</a>, for additional
        information about running NDB Cluster data nodes that apply to
        both the single-threaded and multithreaded versions of the data
        node process.
      </p><p>
        Command-line options and configuration parameters used with
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> also apply to <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>.
        For more information about these options and parameters, see
        <a class="xref" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon">Section&nbsp;23.5.1, &ldquo;ndbd &mdash; The NDB Cluster Data Node Daemon&rdquo;</a>, and
        <a class="xref" href="mysql-cluster-ndbd-definition.html" title="23.4.3.6&nbsp;Defining NDB Cluster Data Nodes">Section&nbsp;23.4.3.6, &ldquo;Defining NDB Cluster Data Nodes&rdquo;</a>, respectively.
      </p><p>
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> is also file system-compatible with
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>. In other words, a data node running
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> can be stopped, the binary replaced with
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>, and then restarted without any loss
        of data. (However, when doing this, you must make sure that
        <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        is set to an appropriate value before restarting the node if you
        wish for <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> to run in multithreaded
        fashion.) Similarly, an <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> binary can be
        replaced with <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> simply by stopping the
        node and then starting <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> in place of the
        multithreaded binary. It is not necessary when switching between
        the two to start the data node binary using
        <a class="link" href="mysql-cluster-programs-ndbd.html#option_ndbd_initial"><code class="option">--initial</code></a>.
      </p><p>
        Using <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> differs from using
        <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> in two key respects:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Because <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> runs by default in
            single-threaded mode (that is, it behaves like
            <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>), you must configure it to use
            multiple threads. This can be done by setting an appropriate
            value in the <code class="filename">config.ini</code> file for the
            <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
            configuration parameter or the
            <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbmtd-threadconfig"><code class="literal">ThreadConfig</code></a>
            configuration parameter. Using
            <code class="literal">MaxNoOfExecutionThreads</code> is simpler, but
            <code class="literal">ThreadConfig</code> offers more flexibility. For
            more information about these configuration parameters and
            their use, see
            <a class="xref" href="mysql-cluster-ndbd-definition.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="Multi-Threading Configuration Parameters (ndbmtd)">Multi-Threading Configuration Parameters (ndbmtd)</a>.
          </p></li><li class="listitem"><p>
            Trace files are generated by critical errors in
            <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> processes in a somewhat different
            fashion from how these are generated by
            <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> failures. These differences are
            discussed in more detail in the next few paragraphs.
          </p></li></ol></div><a id="idm45828826885552" class="indexterm"></a><a id="idm45828826884160" class="indexterm"></a><a id="idm45828826882768" class="indexterm"></a><a id="idm45828826881376" class="indexterm"></a><a id="idm45828826879984" class="indexterm"></a><p>
        Like <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>, <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        generates a set of log files which are placed in the directory
        specified by <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a> in
        the <code class="filename">config.ini</code> configuration file. Except
        for trace files, these are generated in the same way and have
        the same names as those generated by <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>.
      </p><p>
        In the event of a critical error, <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>
        generates trace files describing what happened just prior to the
        error&#39; occurrence. These files, which can be found in the
        data node&#39;s
        <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>, are useful for
        analysis of problems by the NDB Cluster Development and Support
        teams. One trace file is generated for each
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> thread. The names of these files have
        the following pattern:
      </p><pre class="programlisting"><code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.<em class="replaceable"><code>trace_id</code></em>_t<em class="replaceable"><code>thread_id</code></em></code>,
</pre><p>
        In this pattern, <em class="replaceable"><code>node_id</code></em> stands for
        the data node&#39;s unique node ID in the cluster,
        <em class="replaceable"><code>trace_id</code></em> is a trace sequence number,
        and <em class="replaceable"><code>thread_id</code></em> is the thread ID. For
        example, in the event of the failure of an
        <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> process running as an NDB Cluster data
        node having the node ID 3 and with
        <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbmtd-maxnoofexecutionthreads"><code class="literal">MaxNoOfExecutionThreads</code></a>
        equal to 4, four trace files are generated in the data
        node&#39;s data directory. If the is the first time this node
        has failed, then these files are named
        <code class="filename">ndb_3_trace.log.1_t1</code>,
        <code class="filename">ndb_3_trace.log.1_t2</code>,
        <code class="filename">ndb_3_trace.log.1_t3</code>, and
        <code class="filename">ndb_3_trace.log.1_t4</code>. Internally, these
        trace files follow the same format as <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a>
        trace files.
      </p><p>
        The <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> exit codes and messages that are
        generated when a data node process shuts down prematurely are
        also used by <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a>. See
        <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-node-error-messages.html" target="_top">Data Node Error Messages</a>, for a listing of
        these.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          It is possible to use <a class="link" href="mysql-cluster-programs-ndbd.html" title="23.5.1&nbsp;ndbd &mdash; The NDB Cluster Data Node Daemon"><span class="command"><strong>ndbd</strong></span></a> and
          <a class="link" href="mysql-cluster-programs-ndbmtd.html" title="23.5.3&nbsp;ndbmtd &mdash; The NDB Cluster Data Node Daemon (Multi-Threaded)"><span class="command"><strong>ndbmtd</strong></span></a> concurrently on different data nodes
          in the same NDB Cluster. However, such configurations have not
          been tested extensively; thus, we cannot recommend doing so in
          a production setting at this time.
        </p></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-cluster-programs-ndbinfo-select-all.html">Previous <span class="navHint"> ndbinfo_select_all &mdash; Select From ndbinfo Tables </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="mysql-cluster-programs.html">Up <span class="navHint"> NDB Cluster Programs </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysql-cluster-programs-ndb-mgmd.html">Next <span class="navHint"> ndb_mgmd &mdash; The NDB Cluster Management Server Daemon </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>