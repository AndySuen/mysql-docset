<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-1984"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/4.6.4%C2%A0myisamchk%20%E2%80%94%20MyISAM%20Table-Maintenance%20Utility"></a><title>4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="programs-admin-utils.html" title="4.6&nbsp;Administrative and Utility Programs"/><link rel="prev" href="myisam-ftdump.html" title="4.6.3&nbsp;myisam_ftdump &mdash; Display Full-Text Index information"/><link rel="next" href="myisamchk-general-options.html" title="4.6.4.1&nbsp;myisamchk General Options"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="myisamchk.html#myisamchk">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="myisam-ftdump.html">Previous <span class="navHint"> myisam_ftdump &mdash; Display Full-Text Index information </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="programs-admin-utils.html">Up <span class="navHint"> Administrative and Utility Programs </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="myisamchk-general-options.html">Next <span class="navHint"> myisamchk General Options </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="myisamchk"></a>4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="myisamchk-general-options.html">4.6.4.1 myisamchk General Options</a></span></li><li><span class="section"><a href="myisamchk-check-options.html">4.6.4.2 myisamchk Check Options</a></span></li><li><span class="section"><a href="myisamchk-repair-options.html">4.6.4.3 myisamchk Repair Options</a></span></li><li><span class="section"><a href="myisamchk-other-options.html">4.6.4.4 Other myisamchk Options</a></span></li><li><span class="section"><a href="myisamchk-table-info.html">4.6.4.5 Obtaining Table Information with myisamchk</a></span></li><li><span class="section"><a href="myisamchk-memory.html">4.6.4.6 myisamchk Memory Usage</a></span></li></ul></div><a id="idm45829034929536" class="indexterm"></a><p>
        The <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> utility gets information about
        your database tables or checks, repairs, or optimizes them.
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> works with
        <code class="literal">MyISAM</code> tables (tables that have
        <code class="filename">.MYD</code> and <code class="filename">.MYI</code> files
        for storing data and indexes).
      </p><p>
        You can also use the <a class="link" href="check-table.html" title="13.7.3.2&nbsp;CHECK TABLE Statement"><code class="literal">CHECK TABLE</code></a>
        and <a class="link" href="repair-table.html" title="13.7.3.5&nbsp;REPAIR TABLE Statement"><code class="literal">REPAIR TABLE</code></a> statements to
        check and repair <code class="literal">MyISAM</code> tables. See
        <a class="xref" href="check-table.html" title="13.7.3.2&nbsp;CHECK TABLE Statement">Section&nbsp;13.7.3.2, &ldquo;CHECK TABLE Statement&rdquo;</a>, and
        <a class="xref" href="repair-table.html" title="13.7.3.5&nbsp;REPAIR TABLE Statement">Section&nbsp;13.7.3.5, &ldquo;REPAIR TABLE Statement&rdquo;</a>.
      </p><p>
        The use of <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> with partitioned tables
        is not supported.
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Caution</div><p>
          It is best to make a backup of a table before performing a
          table repair operation; under some circumstances the operation
          might cause data loss. Possible causes include but are not
          limited to file system errors.
        </p></div><p>
        Invoke <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> like this:
      </p><pre class="programlisting">myisamchk [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>tbl_name</code></em> ...
</pre><p>
        The <em class="replaceable"><code>options</code></em> specify what you want
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> to do. They are described in the
        following sections. You can also get a list of options by
        invoking <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk --help</strong></span></a>.
      </p><p>
        With no options, <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> simply checks your
        table as the default operation. To get more information or to
        tell <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> to take corrective action,
        specify options as described in the following discussion.
      </p><p>
        <em class="replaceable"><code>tbl_name</code></em> is the database table you
        want to check or repair. If you run <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>
        somewhere other than in the database directory, you must specify
        the path to the database directory, because
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> has no idea where the database is
        located. In fact, <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> does not actually
        care whether the files you are working on are located in a
        database directory. You can copy the files that correspond to a
        database table into some other location and perform recovery
        operations on them there.
      </p><p>
        You can name several tables on the <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>
        command line if you wish. You can also specify a table by naming
        its index file (the file with the <code class="filename">.MYI</code>
        suffix). This enables you to specify all tables in a directory
        by using the pattern <code class="filename">*.MYI</code>. For example, if
        you are in a database directory, you can check all the
        <code class="literal">MyISAM</code> tables in that directory like this:
      </p><pre class="programlisting">myisamchk *.MYI
</pre><p>
        If you are not in the database directory, you can check all the
        tables there by specifying the path to the directory:
      </p><pre class="programlisting">myisamchk <em class="replaceable"><code>/path/to/database_dir/</code></em>*.MYI
</pre><p>
        You can even check all tables in all databases by specifying a
        wildcard with the path to the MySQL data directory:
      </p><pre class="programlisting">myisamchk <em class="replaceable"><code>/path/to/datadir/*/*</code></em>.MYI
</pre><p>
        The recommended way to quickly check all
        <code class="literal">MyISAM</code> tables is:
      </p><pre class="programlisting">myisamchk --silent --fast <em class="replaceable"><code>/path/to/datadir/*/*</code></em>.MYI
</pre><p>
        If you want to check all <code class="literal">MyISAM</code> tables and
        repair any that are corrupted, you can use the following
        command:
      </p><pre class="programlisting">myisamchk --silent --force --fast --update-state \
          --key_buffer_size=64M --myisam_sort_buffer_size=64M \
          --read_buffer_size=1M --write_buffer_size=1M \
          <em class="replaceable"><code>/path/to/datadir/*/*</code></em>.MYI
</pre><p>
        This command assumes that you have more than 64MB free. For more
        information about memory allocation with
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>, see
        <a class="xref" href="myisamchk-memory.html" title="4.6.4.6&nbsp;myisamchk Memory Usage">Section&nbsp;4.6.4.6, &ldquo;myisamchk Memory Usage&rdquo;</a>.
      </p><p>
        For additional information about using
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>, see
        <a class="xref" href="myisam-table-maintenance.html" title="7.6&nbsp;MyISAM Table Maintenance and Crash Recovery">Section&nbsp;7.6, &ldquo;MyISAM Table Maintenance and Crash Recovery&rdquo;</a>.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          <span class="emphasis"><em>You must ensure that no other program is using the
          tables while you are running
          <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a></em></span>. The most effective
          means of doing so is to shut down the MySQL server while
          running <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>, or to lock all tables
          that <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> is being used on.
        </p><p>
          Otherwise, when you run <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>, it may
          display the following error message:
        </p><pre class="programlisting">warning: clients are using or haven&#39;t closed the table properly
</pre><p>
          This means that you are trying to check a table that has been
          updated by another program (such as the
          <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server) that hasn&#39;t yet closed the
          file or that has died without closing the file properly, which
          can sometimes lead to the corruption of one or more
          <code class="literal">MyISAM</code> tables.
        </p><p>
          If <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is running, you must force it to
          flush any table modifications that are still buffered in
          memory by using <a class="link" href="flush.html#flush-tables"><code class="literal">FLUSH TABLES</code></a>.
          You should then ensure that no one is using the tables while
          you are running <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a>
        </p><p>
          However, the easiest way to avoid this problem is to use
          <a class="link" href="check-table.html" title="13.7.3.2&nbsp;CHECK TABLE Statement"><code class="literal">CHECK TABLE</code></a> instead of
          <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> to check tables. See
          <a class="xref" href="check-table.html" title="13.7.3.2&nbsp;CHECK TABLE Statement">Section&nbsp;13.7.3.2, &ldquo;CHECK TABLE Statement&rdquo;</a>.
        </p></div><p>
        <a class="link" href="myisamchk.html" title="4.6.4&nbsp;myisamchk &mdash; MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> supports the following options,
        which can be specified on the command line or in the
        <code class="literal">[myisamchk]</code> group of an option file. For
        information about option files used by MySQL programs, see
        <a class="xref" href="option-files.html" title="4.2.2.2&nbsp;Using Option Files">Section&nbsp;4.2.2.2, &ldquo;Using Option Files&rdquo;</a>.
      </p><div class="table"><a id="idm45829034859504"></a><p class="title"><strong>Table&nbsp;4.19&nbsp;myisamchk Options</strong></p><div class="table-contents"><table frame="box" rules="all" summary="Command-line options available for myisamchk."><colgroup><col style="width: 35%"/><col style="width: 64%"/></colgroup><thead><tr><th>Option Name</th>
<th>Description</th>
</tr></thead><tbody><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_analyze">--analyze</a></td>
<td>Analyze the distribution of key values</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_backup">--backup</a></td>
<td>Make a backup of the .MYD file as file_name-time.BAK</td>
</tr><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_block-search">--block-search</a></td>
<td>Find the record that a block at the given offset belongs to</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_check">--check</a></td>
<td>Check the table for errors</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_check-only-changed">--check-only-changed</a></td>
<td>Check only tables that have changed since the last check</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_correct-checksum">--correct-checksum</a></td>
<td>Correct the checksum information for the table</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_data-file-length">--data-file-length</a></td>
<td>Maximum length of the data file (when re-creating data file when it is full)</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_debug">--debug</a></td>
<td>Write debugging log</td>
</tr><tr><td>--decode_bits</td>
<td>Decode_bits</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_defaults-extra-file">--defaults-extra-file</a></td>
<td>Read named option file in addition to usual option files</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_defaults-file">--defaults-file</a></td>
<td>Read only named option file</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_defaults-group-suffix">--defaults-group-suffix</a></td>
<td>Option group suffix value</td>
</tr><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_description">--description</a></td>
<td>Print some descriptive information about the table</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_extend-check">--extend-check</a></td>
<td>Do very thorough table check or repair that tries to recover every possible row from the data file</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_fast">--fast</a></td>
<td>Check only tables that haven&#39;t been closed properly</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_force">--force</a></td>
<td>Do a repair operation automatically if myisamchk finds any errors in the table</td>
</tr><tr><td>--force</td>
<td>Overwrite old temporary files. For use with the -r or -o option</td>
</tr><tr><td>--ft_max_word_len</td>
<td>Maximum word length for FULLTEXT indexes</td>
</tr><tr><td>--ft_min_word_len</td>
<td>Minimum word length for FULLTEXT indexes</td>
</tr><tr><td>--ft_stopword_file</td>
<td>Use stopwords from this file instead of built-in list</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_HELP">--HELP</a></td>
<td>Display help message and exit</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_help">--help</a></td>
<td>Display help message and exit</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_information">--information</a></td>
<td>Print informational statistics about the table that is checked</td>
</tr><tr><td>--key_buffer_size</td>
<td>Size of buffer used for index blocks for MyISAM tables</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_keys-used">--keys-used</a></td>
<td>A bit-value that indicates which indexes to update</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_max-record-length">--max-record-length</a></td>
<td>Skip rows larger than the given length if myisamchk cannot allocate memory to hold them</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_medium-check">--medium-check</a></td>
<td>Do a check that is faster than an --extend-check operation</td>
</tr><tr><td>--myisam_block_size</td>
<td>Block size to be used for MyISAM index pages</td>
</tr><tr><td>--myisam_sort_buffer_size</td>
<td>The buffer that is allocated when sorting the index when doing a REPAIR or when creating indexes with CREATE INDEX or ALTER TABLE</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_no-defaults">--no-defaults</a></td>
<td>Read no option files</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_parallel-recover">--parallel-recover</a></td>
<td>Uses the same technique as -r and -n, but creates all the keys in parallel, using different threads (beta)</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_print-defaults">--print-defaults</a></td>
<td>Print default options</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_quick">--quick</a></td>
<td>Achieve a faster repair by not modifying the data file</td>
</tr><tr><td>--read_buffer_size</td>
<td>Each thread that does a sequential scan allocates a buffer of this size for each table it scans</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_read-only">--read-only</a></td>
<td>Do not mark the table as checked</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_recover">--recover</a></td>
<td>Do a repair that can fix almost any problem except unique keys that aren&#39;t unique</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_safe-recover">--safe-recover</a></td>
<td>Do a repair using an old recovery method that reads through all rows in order and updates all index trees based on the rows found</td>
</tr><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_set-auto-increment">--set-auto-increment</a></td>
<td>Force AUTO_INCREMENT numbering for new records to start at the given value</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_set-collation">--set-collation</a></td>
<td>Specify the collation to use for sorting table indexes</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_silent">--silent</a></td>
<td>Silent mode</td>
</tr><tr><td>--sort_buffer_size</td>
<td>The buffer that is allocated when sorting the index when doing a REPAIR or when creating indexes with CREATE INDEX or ALTER TABLE</td>
</tr><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_sort-index">--sort-index</a></td>
<td>Sort the index tree blocks in high-low order</td>
</tr><tr><td>--sort_key_blocks</td>
<td>sort_key_blocks</td>
</tr><tr><td><a class="link" href="myisamchk-other-options.html#option_myisamchk_sort-records">--sort-records</a></td>
<td>Sort records according to a particular index</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_sort-recover">--sort-recover</a></td>
<td>Force myisamchk to use sorting to resolve the keys even if the temporary files would be very large</td>
</tr><tr><td>--stats_method</td>
<td>Specifies how MyISAM index statistics collection code should treat NULLs</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_tmpdir">--tmpdir</a></td>
<td>Directory to be used for storing temporary files</td>
</tr><tr><td><a class="link" href="myisamchk-repair-options.html#option_myisamchk_unpack">--unpack</a></td>
<td>Unpack a table that was packed with myisampack</td>
</tr><tr><td><a class="link" href="myisamchk-check-options.html#option_myisamchk_update-state">--update-state</a></td>
<td>Store information in the .MYI file to indicate when the table was checked and whether the table crashed</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_verbose">--verbose</a></td>
<td>Verbose mode</td>
</tr><tr><td><a class="link" href="myisamchk-general-options.html#option_myisamchk_version">--version</a></td>
<td>Display version information and exit</td>
</tr><tr><td>--write_buffer_size</td>
<td>Write buffer size</td>
</tr></tbody></table></div></div><br class="table-break"/></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="myisam-ftdump.html">Previous <span class="navHint"> myisam_ftdump &mdash; Display Full-Text Index information </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="programs-admin-utils.html">Up <span class="navHint"> Administrative and Utility Programs </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="myisamchk-general-options.html">Next <span class="navHint"> myisamchk General Options </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>