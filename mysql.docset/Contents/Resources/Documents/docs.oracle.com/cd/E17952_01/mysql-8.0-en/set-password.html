<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-3941"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/13.7.1.10%C2%A0SET%20PASSWORD%20Statement"></a><title>13.7.1.10&nbsp;SET PASSWORD Statement</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="account-management-statements.html" title="13.7.1&nbsp;Account Management Statements"/><link rel="prev" href="set-default-role.html" title="13.7.1.9&nbsp;SET DEFAULT ROLE Statement"/><link rel="next" href="set-role.html" title="13.7.1.11&nbsp;SET ROLE Statement"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="set-password.html#set-password">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="set-default-role.html">Previous <span class="navHint"> SET DEFAULT ROLE Statement </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="account-management-statements.html">Up <span class="navHint"> Account Management Statements </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="set-role.html">Next <span class="navHint"> SET ROLE Statement </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-3940"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/13.7.1.10%C2%A0SET%20PASSWORD%20Statement"></a><h4 class="title"><a id="set-password"></a>13.7.1.10&nbsp;SET PASSWORD Statement</h4></div></div></div><a id="idm45828898359184" class="indexterm"></a><a id="idm45828898358112" class="indexterm"></a><a id="idm45828898356624" class="indexterm"></a><pre class="programlisting">SET PASSWORD [FOR <em class="replaceable"><code>user</code></em>] <em class="replaceable"><code>auth_option</code></em>
    [REPLACE &#39;<em class="replaceable"><code>current_auth_string</code></em>&#39;]
    [RETAIN CURRENT PASSWORD]

<em class="replaceable"><code>auth_option</code></em>: {
    = &#39;<em class="replaceable"><code>auth_string</code></em>&#39;
  | TO RANDOM
}
</pre><p>
        The <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a> statement
        assigns a password to a MySQL user account. The password may be
        either explicitly specified in the statement or randomly
        generated by MySQL. The statement may also include a
        password-verification clause that specifies the account current
        password to be replaced, and a clause that manages whether an
        account has a secondary password.
        <code class="literal">&#39;<em class="replaceable"><code>auth_string</code></em>&#39;</code> and
        <code class="literal">&#39;<em class="replaceable"><code>current_auth_string</code></em>&#39;</code>
        each represent a cleartext (unencrypted) password.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          Rather than using <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a>
          to assign passwords, <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a>
          is the preferred statement for account alterations, including
          assigning passwords. For example:
        </p><pre class="programlisting">ALTER USER <em class="replaceable"><code>user</code></em> IDENTIFIED BY &#39;<em class="replaceable"><code>auth_string</code></em>&#39;;
</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          Clauses for random password generation, password verification,
          and secondary passwords apply only to accounts that use an
          authentication plugin that stores credentials internally to
          MySQL. For accounts that use a plugin that performs
          authentication against a credentials system that is external
          to MySQL, password management must be handled externally
          against that system as well. For more information about
          internal credentials storage, see
          <a class="xref" href="password-management.html" title="6.2.15&nbsp;Password Management">Section&nbsp;6.2.15, &ldquo;Password Management&rdquo;</a>.
        </p></div><p>
        The <code class="literal">REPLACE
        &#39;<em class="replaceable"><code>current_auth_string</code></em>&#39;</code>
        clause performs password verification and is available as of
        MySQL 8.0.13. If given:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">REPLACE</code> specifies the account current
            password to be replaced, as a cleartext (unencrypted)
            string.
          </p></li><li class="listitem"><p>
            The clause must be given if password changes for the account
            are required to specify the current password, as
            verification that the user attempting to make the change
            actually knows the current password.
          </p></li><li class="listitem"><p>
            The clause is optional if password changes for the account
            may but need not specify the current password.
          </p></li><li class="listitem"><p>
            The statement fails if the clause is given but does not
            match the current password, even if the clause is optional.
          </p></li><li class="listitem"><p>
            <code class="literal">REPLACE</code> can be specified only when
            changing the account password for the current user.
          </p></li></ul></div><p>
        For more information about password verification by specifying
        the current password, see <a class="xref" href="password-management.html" title="6.2.15&nbsp;Password Management">Section&nbsp;6.2.15, &ldquo;Password Management&rdquo;</a>.
      </p><p>
        The <code class="literal">RETAIN CURRENT PASSWORD</code> clause implements
        dual-password capability and is available as of MySQL 8.0.14. If
        given:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">RETAIN CURRENT PASSWORD</code> retains an
            account current password as its secondary password,
            replacing any existing secondary password. The new password
            becomes the primary password, but clients can use the
            account to connect to the server using either the primary or
            secondary password. (Exception: If the new password
            specified by the <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a>
            statement is empty, the secondary password becomes empty as
            well, even if <code class="literal">RETAIN CURRENT PASSWORD</code> is
            given.)
          </p></li><li class="listitem"><p>
            If you specify <code class="literal">RETAIN CURRENT PASSWORD</code>
            for an account that has an empty primary password, the
            statement fails.
          </p></li><li class="listitem"><p>
            If an account has a secondary password and you change its
            primary password without specifying <code class="literal">RETAIN CURRENT
            PASSWORD</code>, the secondary password remains
            unchanged.
          </p></li></ul></div><p>
        For more information about use of dual passwords, see
        <a class="xref" href="password-management.html" title="6.2.15&nbsp;Password Management">Section&nbsp;6.2.15, &ldquo;Password Management&rdquo;</a>.
      </p><p>
        <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a> permits these
        <em class="replaceable"><code>auth_option</code></em> syntaxes:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">=
            &#39;<em class="replaceable"><code>auth_string</code></em>&#39;</code>
          </p><p>
            Assigns the account the given literal password.
          </p></li><li class="listitem"><p>
            <code class="literal">TO RANDOM</code>
          </p><p>
            Assigns the account a password randomly generated by MySQL.
            The statement also returns the cleartext password in a
            result set to make it available to the user or application
            executing the statement.
          </p><p>
            For details about the result set and characteristics of
            randomly generated passwords, see
            <a class="xref" href="password-management.html#random-password-generation" title="Random Password Generation">Random Password Generation</a>.
          </p><p>
            Random password generation is available as of MySQL 8.0.18.
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          Under some circumstances, <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET
          PASSWORD</code></a> may be recorded in server logs or on the
          client side in a history file such as
          <code class="filename">~/.mysql_history</code>, which means that
          cleartext passwords may be read by anyone having read access
          to that information. For information about the conditions
          under which this occurs for the server logs and how to control
          it, see <a class="xref" href="password-logging.html" title="6.1.2.3&nbsp;Passwords and Logging">Section&nbsp;6.1.2.3, &ldquo;Passwords and Logging&rdquo;</a>. For similar
          information about client-side logging, see
          <a class="xref" href="mysql-logging.html" title="4.5.1.3&nbsp;mysql Client Logging">Section&nbsp;4.5.1.3, &ldquo;mysql Client Logging&rdquo;</a>.
        </p></div><p>
        <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a> can be used with or
        without a <code class="literal">FOR</code> clause that explicitly names a
        user account:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            With a <code class="literal">FOR
            <em class="replaceable"><code>user</code></em></code> clause, the
            statement sets the password for the named account, which
            must exist:
          </p><pre class="programlisting">SET PASSWORD FOR &#39;jeffrey&#39;@&#39;localhost&#39; = &#39;<em class="replaceable"><code>auth_string</code></em>&#39;;
</pre></li><li class="listitem"><p>
            With no <code class="literal">FOR
            <em class="replaceable"><code>user</code></em></code> clause, the
            statement sets the password for the current user:
          </p><pre class="programlisting">SET PASSWORD = &#39;<em class="replaceable"><code>auth_string</code></em>&#39;;
</pre><p>
            Any client who connects to the server using a nonanonymous
            account can change the password for that account. (In
            particular, you can change your own password.) To see which
            account the server authenticated you as, invoke the
            <a class="link" href="information-functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function:
          </p><pre class="programlisting">SELECT CURRENT_USER();
</pre></li></ul></div><p>
        If a <code class="literal">FOR <em class="replaceable"><code>user</code></em></code>
        clause is given, the account name uses the format described in
        <a class="xref" href="account-names.html" title="6.2.4&nbsp;Specifying Account Names">Section&nbsp;6.2.4, &ldquo;Specifying Account Names&rdquo;</a>. For example:
      </p><pre class="programlisting">SET PASSWORD FOR &#39;bob&#39;@&#39;%.example.org&#39; = &#39;<em class="replaceable"><code>auth_string</code></em>&#39;;
</pre><p>
        The host name part of the account name, if omitted, defaults to
        <code class="literal">&#39;%&#39;</code>.
      </p><p>
        <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a> interprets the
        string as a cleartext string, passes it to the authentication
        plugin associated with the account, and stores the result
        returned by the plugin in the account row in the
        <code class="literal">mysql.user</code> system table. (The plugin is given
        the opportunity to hash the value into the encryption format it
        expects. The plugin may use the value as specified, in which
        case no hashing occurs.)
      </p><p>
        Setting the password for a named account (with a
        <code class="literal">FOR</code> clause) requires the
        <a class="link" href="privileges-provided.html#priv_update"><code class="literal">UPDATE</code></a> privilege for the
        <code class="literal">mysql</code> system schema. Setting the password for
        yourself (for a nonanonymous account with no
        <code class="literal">FOR</code> clause) requires no special privileges.
      </p><p>
        Statements that modify secondary passwords require these
        privileges:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The
            <a class="link" href="privileges-provided.html#priv_application-password-admin"><code class="literal">APPLICATION_PASSWORD_ADMIN</code></a>
            privilege is required to use the <code class="literal">RETAIN CURRENT
            PASSWORD</code> clause for <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET
            PASSWORD</code></a> statements that apply to your own
            account. The privilege is required to manipulate your own
            secondary password because most users require only one
            password.
          </p></li><li class="listitem"><p>
            If an account is to be permitted to manipulate secondary
            passwords for all accounts, it should be granted the
            <a class="link" href="privileges-provided.html#priv_create-user"><code class="literal">CREATE USER</code></a> privilege rather
            than
            <a class="link" href="privileges-provided.html#priv_application-password-admin"><code class="literal">APPLICATION_PASSWORD_ADMIN</code></a>.
          </p></li></ul></div><p>
        When the <a class="link" href="server-system-variables.html#sysvar_read_only"><code class="literal">read_only</code></a> system
        variable is enabled, <a class="link" href="set-password.html" title="13.7.1.10&nbsp;SET PASSWORD Statement"><code class="literal">SET PASSWORD</code></a>
        requires the <a class="link" href="privileges-provided.html#priv_connection-admin"><code class="literal">CONNECTION_ADMIN</code></a>
        privilege (or the deprecated
        <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a> privilege), in addition to
        any other required privileges.
      </p><p>
        For additional information about setting passwords and
        authentication plugins, see
        <a class="xref" href="assigning-passwords.html" title="6.2.14&nbsp;Assigning Account Passwords">Section&nbsp;6.2.14, &ldquo;Assigning Account Passwords&rdquo;</a>, and
        <a class="xref" href="pluggable-authentication.html" title="6.2.17&nbsp;Pluggable Authentication">Section&nbsp;6.2.17, &ldquo;Pluggable Authentication&rdquo;</a>.
      </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="set-default-role.html">Previous <span class="navHint"> SET DEFAULT ROLE Statement </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="account-management-statements.html">Up <span class="navHint"> Account Management Statements </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="set-role.html">Next <span class="navHint"> SET ROLE Statement </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>