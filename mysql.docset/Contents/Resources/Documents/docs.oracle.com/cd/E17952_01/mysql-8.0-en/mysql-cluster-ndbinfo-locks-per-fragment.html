<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2278"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/23.6.16.41%C2%A0The%20ndbinfo%20locks_per_fragment%20Table"></a><title>23.6.16.41&nbsp;The ndbinfo locks_per_fragment Table</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="mysql-cluster-ndbinfo.html" title="23.6.16&nbsp;ndbinfo: The NDB Cluster Information Database"/><link rel="prev" href="mysql-cluster-ndbinfo-index-stats.html" title="23.6.16.40&nbsp;The ndbinfo index_stats Table"/><link rel="next" href="mysql-cluster-ndbinfo-logbuffers.html" title="23.6.16.42&nbsp;The ndbinfo logbuffers Table"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-cluster-ndbinfo-locks-per-fragment.html#mysql-cluster-ndbinfo-locks-per-fragment">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="mysql-cluster-ndbinfo-index-stats.html">Previous <span class="navHint"> The ndbinfo index_stats Table </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="mysql-cluster-ndbinfo.html">Up <span class="navHint"> ndbinfo: The NDB Cluster Information Database </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="mysql-cluster-ndbinfo-logbuffers.html">Next <span class="navHint"> The ndbinfo logbuffers Table </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-2277"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/23.6.16.41%C2%A0The%20ndbinfo%20locks_per_fragment%20Table"></a><h4 class="title"><a id="mysql-cluster-ndbinfo-locks-per-fragment"></a>23.6.16.41&nbsp;The ndbinfo locks_per_fragment Table</h4></div></div></div><a id="idm45828806541840" class="indexterm"></a><p>
        The <code class="literal">locks_per_fragment</code> table provides
        information about counts of lock claim requests, and the
        outcomes of these requests on a per-fragment basis, serving as a
        companion table to
        <a class="link" href="mysql-cluster-ndbinfo-operations-per-fragment.html" title="23.6.16.48&nbsp;The ndbinfo operations_per_fragment Table"><code class="literal">operations_per_fragment</code></a> and
        <a class="link" href="mysql-cluster-ndbinfo-memory-per-fragment.html" title="23.6.16.46&nbsp;The ndbinfo memory_per_fragment Table"><code class="literal">memory_per_fragment</code></a>. This
        table also shows the total time spent waiting for locks
        successfully and unsuccessfully since fragment or table
        creation, or since the most recent restart.
      </p><p>
        The <code class="literal">locks_per_fragment</code> table contains the
        following columns:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">fq_name</code>
          </p><p>
            Fully qualified table name
          </p></li><li class="listitem"><p>
            <code class="literal">parent_fq_name</code>
          </p><p>
            Fully qualified name of parent object
          </p></li><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            Table type; see text for possible values
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            Table ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            Reporting node ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            LDM instance ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_num</code>
          </p><p>
            Fragment identifier
          </p></li><li class="listitem"><p>
            <code class="literal">ex_req</code>
          </p><p>
            Exclusive lock requests started
          </p></li><li class="listitem"><p>
            <code class="literal">ex_imm_ok</code>
          </p><p>
            Exclusive lock requests immediately granted
          </p></li><li class="listitem"><p>
            <code class="literal">ex_wait_ok</code>
          </p><p>
            Exclusive lock requests granted following wait
          </p></li><li class="listitem"><p>
            <code class="literal">ex_wait_fail</code>
          </p><p>
            Exclusive lock requests not granted
          </p></li><li class="listitem"><p>
            <code class="literal">sh_req</code>
          </p><p>
            Shared lock requests started
          </p></li><li class="listitem"><p>
            <code class="literal">sh_imm_ok</code>
          </p><p>
            Shared lock requests immediately granted
          </p></li><li class="listitem"><p>
            <code class="literal">sh_wait_ok</code>
          </p><p>
            Shared lock requests granted following wait
          </p></li><li class="listitem"><p>
            <code class="literal">sh_wait_fail</code>
          </p><p>
            Shared lock requests not granted
          </p></li><li class="listitem"><p>
            <code class="literal">wait_ok_millis</code>
          </p><p>
            Time spent waiting for lock requests that were granted, in
            milliseconds
          </p></li><li class="listitem"><p>
            <code class="literal">wait_fail_millis</code>
          </p><p>
            Time spent waiting for lock requests that failed, in
            milliseconds
          </p></li></ul></div><h5><a id="idm45828806502208"></a>Notes</h5><p>
        <code class="literal">block_instance</code> refers to an instance of a
        kernel block. Together with the block name, this number can be
        used to look up a given instance in the
        <a class="link" href="mysql-cluster-ndbinfo-threadblocks.html" title="23.6.16.61&nbsp;The ndbinfo threadblocks Table"><code class="literal">threadblocks</code></a> table.
      </p><p>
        <code class="literal">fq_name</code> is a fully qualified database object
        name in
        <em class="replaceable"><code>database</code></em>/<em class="replaceable"><code>schema</code></em>/<em class="replaceable"><code>name</code></em>
        format, such as <code class="literal">test/def/t1</code> or
        <code class="literal">sys/def/10/b$unique</code>.
      </p><p>
        <code class="literal">parent_fq_name</code> is the fully qualified name of
        this object&#39;s parent object (table).
      </p><p>
        <code class="literal">table_id</code> is the table&#39;s internal ID
        generated by <code class="literal">NDB</code>. This is the same internal
        table ID shown in other <code class="literal">ndbinfo</code> tables; it is
        also visible in the output of
        <a class="link" href="mysql-cluster-programs-ndb-show-tables.html" title="23.5.27&nbsp;ndb_show_tables &mdash; Display List of NDB Tables"><span class="command"><strong>ndb_show_tables</strong></span></a>.
      </p><p>
        The <code class="literal">type</code> column shows the type of table. This
        is always one of <code class="literal">System table</code>, <code class="literal">User
        table</code>, <code class="literal">Unique hash index</code>,
        <code class="literal">Hash index</code>, <code class="literal">Unique ordered
        index</code>, <code class="literal">Ordered index</code>, <code class="literal">Hash
        index trigger</code>, <code class="literal">Subscription
        trigger</code>, <code class="literal">Read only constraint</code>,
        <code class="literal">Index trigger</code>, <code class="literal">Reorganize
        trigger</code>, <code class="literal">Tablespace</code>, <code class="literal">Log
        file group</code>, <code class="literal">Data file</code>,
        <code class="literal">Undo file</code>, <code class="literal">Hash map</code>,
        <code class="literal">Foreign key definition</code>, <code class="literal">Foreign key
        parent trigger</code>, <code class="literal">Foreign key child
        trigger</code>, or <code class="literal">Schema transaction</code>.
      </p><p>
        The values shown in all of the columns
        <code class="literal">ex_req</code>, <code class="literal">ex_req_imm_ok</code>,
        <code class="literal">ex_wait_ok</code>, <code class="literal">ex_wait_fail</code>,
        <code class="literal">sh_req</code>, <code class="literal">sh_req_imm_ok</code>,
        <code class="literal">sh_wait_ok</code>, and
        <code class="literal">sh_wait_fail</code> represent cumulative numbers of
        requests since the table or fragment was created, or since the
        last restart of this node, whichever of these occurred later.
        This is also true for the time values shown in the
        <code class="literal">wait_ok_millis</code> and
        <code class="literal">wait_fail_millis</code> columns.
      </p><p>
        Every lock request is considered either to be in progress, or to
        have completed in some way (that is, to have succeeded or
        failed). This means that the following relationships are true:
      </p><pre class="programlisting">ex_req &gt;= (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

sh_req &gt;= (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        The number of requests currently in progress is the current
        number of incomplete requests, which can be found as shown here:
      </p><pre class="programlisting">[exclusive lock requests in progress] =
    ex_req - (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

[shared lock requests in progress] =
    sh_req - (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        A failed wait indicates an aborted transaction, but the abort
        may or may not be caused by a lock wait timeout. You can obtain
        the total number of aborts while waiting for locks as shown
        here:
      </p><pre class="programlisting">[aborts while waiting for locks] = ex_wait_fail + sh_wait_fail
</pre></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-cluster-ndbinfo-index-stats.html">Previous <span class="navHint"> The ndbinfo index_stats Table </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="mysql-cluster-ndbinfo.html">Up <span class="navHint"> ndbinfo: The NDB Cluster Information Database </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysql-cluster-ndbinfo-logbuffers.html">Next <span class="navHint"> The ndbinfo logbuffers Table </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>