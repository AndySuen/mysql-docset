<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-1822"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/6.4.1.7%C2%A0LDAP%20Pluggable%20Authentication"></a><title>6.4.1.7&nbsp;LDAP Pluggable Authentication</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="authentication-plugins.html" title="6.4.1&nbsp;Authentication Plugins"/><link rel="prev" href="windows-pluggable-authentication.html" title="6.4.1.6&nbsp;Windows Pluggable Authentication"/><link rel="next" href="kerberos-pluggable-authentication.html" title="6.4.1.8&nbsp;Kerberos Pluggable Authentication"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="ldap-pluggable-authentication.html#ldap-pluggable-authentication">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="windows-pluggable-authentication.html">Previous <span class="navHint"> Windows Pluggable Authentication </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="authentication-plugins.html">Up <span class="navHint"> Authentication Plugins </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="kerberos-pluggable-authentication.html">Next <span class="navHint"> Kerberos Pluggable Authentication </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-1821"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.1.7%C2%A0LDAP%20Pluggable%20Authentication"></a><h4 class="title"><a id="ldap-pluggable-authentication"></a>6.4.1.7&nbsp;LDAP Pluggable Authentication</h4></div></div></div><a id="idm45828972973584" class="indexterm"></a><a id="idm45828972972080" class="indexterm"></a><a id="idm45828972970576" class="indexterm"></a><a id="idm45828972969072" class="indexterm"></a><a id="idm45828972967584" class="indexterm"></a><a id="idm45828972966496" class="indexterm"></a><a id="idm45828972964992" class="indexterm"></a><a id="idm45828972963504" class="indexterm"></a><a id="idm45828972962016" class="indexterm"></a><a id="idm45828972960528" class="indexterm"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          LDAP pluggable authentication is an extension included in
          MySQL Enterprise Edition, a commercial product. To learn more about commercial
          products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
        </p></div><p>
        MySQL Enterprise Edition supports an authentication method that enables MySQL
        Server to use LDAP (Lightweight Directory Access Protocol) to
        authenticate MySQL users by accessing directory services such as
        X.500. MySQL uses LDAP to fetch user, credential, and group
        information.
      </p><p>
        LDAP pluggable authentication provides these capabilities:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            External authentication: LDAP authentication enables MySQL
            Server to accept connections from users defined outside the
            MySQL grant tables in LDAP directories.
          </p></li><li class="listitem"><p>
            Proxy user support: LDAP authentication can return to MySQL
            a user name different from the external user name passed by
            the client program, based on the LDAP groups the external
            user is a member of. This means that an LDAP plugin can
            return the MySQL user that defines the privileges the
            external LDAP-authenticated user should have. For example,
            an LDAP user named <code class="literal">joe</code> can connect and
            have the privileges of a MySQL user named
            <code class="literal">developer</code>, if the LDAP group for
            <code class="literal">joe</code> is <code class="literal">developer</code>.
          </p></li><li class="listitem"><p>
            Security: Using TLS, connections to the LDAP server can be
            secure.
          </p></li></ul></div><p>
        Server and client plugins are available for simple and
        SASL-based LDAP authentication. On Microsoft Windows, the server
        plugin for SASL-based LDAP authentication is not supported, but
        the client plugin is.
      </p><p>
        The following tables show the plugin and library file names for
        simple and SASL-based LDAP authentication. The file name suffix
        might differ on your system. The files must be located in the
        directory named by the
        <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
      </p><div class="table"><a id="idm45828972947376"></a><p class="title"><strong>Table&nbsp;6.22&nbsp;Plugin and Library Names for Simple LDAP Authentication</strong></p><div class="table-contents"><table summary="Names for the plugins and library file used for simple LDAP password authentication."><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><thead><tr>
            <th>Plugin or File</th>
            <th>Plugin or File Name</th>
          </tr></thead><tbody><tr>
            <td>Server-side plugin name</td>
            <td><code class="literal">authentication_ldap_simple</code></td>
          </tr><tr>
            <td>Client-side plugin name</td>
            <td><code class="literal">mysql_clear_password</code></td>
          </tr><tr>
            <td>Library file name</td>
            <td><code class="filename">authentication_ldap_simple.so</code></td>
          </tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="idm45828972933968"></a><p class="title"><strong>Table&nbsp;6.23&nbsp;Plugin and Library Names for SASL-Based LDAP Authentication</strong></p><div class="table-contents"><table summary="Names for the plugins and library file used for SASL-based LDAP password authentication."><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><thead><tr>
            <th>Plugin or File</th>
            <th>Plugin or File Name</th>
          </tr></thead><tbody><tr>
            <td>Server-side plugin name</td>
            <td><code class="literal">authentication_ldap_sasl</code></td>
          </tr><tr>
            <td>Client-side plugin name</td>
            <td><code class="literal">authentication_ldap_sasl_client</code></td>
          </tr><tr>
            <td>Library file names</td>
            <td><code class="filename">authentication_ldap_sasl.so</code>,
              <code class="filename">authentication_ldap_sasl_client.so</code></td>
          </tr></tbody></table></div></div><br class="table-break"/><p>
        The library files include only the
        <code class="literal">authentication_ldap_<em class="replaceable"><code>XXX</code></em></code>
        authentication plugins. The client-side
        <code class="literal">mysql_clear_password</code> plugin is built into the
        <code class="literal">libmysqlclient</code> client library.
      </p><p>
        Each server-side LDAP plugin works with a specific client-side
        plugin:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The server-side
            <code class="literal">authentication_ldap_simple</code> plugin
            performs simple LDAP authentication. For connections by
            accounts that use this plugin, client programs use the
            client-side <code class="literal">mysql_clear_password</code> plugin,
            which sends the password to the server as cleartext. No
            password hashing or encryption is used, so a secure
            connection between the MySQL client and server is
            recommended to prevent password exposure.
          </p></li><li class="listitem"><p>
            The server-side <code class="literal">authentication_ldap_sasl</code>
            plugin performs SASL-based LDAP authentication. For
            connections by accounts that use this plugin, client
            programs use the client-side
            <code class="literal">authentication_ldap_sasl_client</code> plugin.
            The client-side and server-side SASL LDAP plugins use SASL
            messages for secure transmission of credentials within the
            LDAP protocol, to avoid sending the cleartext password
            between the MySQL client and server.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
              On Microsoft Windows, the server plugin for SASL-based
              LDAP authentication is not supported, but the client
              plugin is supported. On other platforms, both the server
              and client plugins are supported.
            </p></div></li></ul></div><p>
        The server-side LDAP authentication plugins are included only in
        MySQL Enterprise Edition. They are not included in MySQL community distributions.
        The client-side SASL LDAP plugin is included in all
        distributions, including community distributions, and, as
        mentioned previously, the client-side
        <code class="literal">mysql_clear_password</code> plugin is built into the
        <code class="literal">libmysqlclient</code> client library, which also is
        included in all distributions. This enables clients from any
        distribution to connect to a server that has the appropriate
        server-side plugin loaded.
      </p><p>
        The following sections provide installation and usage
        information specific to LDAP pluggable authentication:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-prerequisites" title="Prerequisites for LDAP Pluggable Authentication">Prerequisites for LDAP Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-process" title="How LDAP Authentication of MySQL Users Works">How LDAP Authentication of MySQL Users Works</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-uninstallation" title="Uninstalling LDAP Pluggable Authentication">Uninstalling LDAP Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-ldap-conf" title="LDAP Pluggable Authentication and ldap.conf">LDAP Pluggable Authentication and ldap.conf</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-simple" title="Simple LDAP Authentication">Simple LDAP Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-sasl" title="SASL-Based LDAP Authentication">SASL-Based LDAP Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-group-mapping" title="LDAP Authentication Group Preference and Mapping Specification">LDAP Authentication Group Preference and Mapping Specification</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-user-dn-suffix" title="LDAP Authentication User DN Suffixes">LDAP Authentication User DN Suffixes</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-auth-methods" title="LDAP Authentication Methods">LDAP Authentication Methods</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-gssapi" title="The GSSAPI/Kerberos Authentication Method">The GSSAPI/Kerberos Authentication Method</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-ldap-referral" title="LDAP Search Referral">LDAP Search Referral</a></p></li></ul></div><p>
        For general information about pluggable authentication in MySQL,
        see <a class="xref" href="pluggable-authentication.html" title="6.2.17&nbsp;Pluggable Authentication">Section&nbsp;6.2.17, &ldquo;Pluggable Authentication&rdquo;</a>. For information
        about the <code class="literal">mysql_clear_password</code> plugin, see
        <a class="xref" href="cleartext-pluggable-authentication.html" title="6.4.1.4&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.4, &ldquo;Client-Side Cleartext Pluggable Authentication&rdquo;</a>. For proxy
        user information, see <a class="xref" href="proxy-users.html" title="6.2.19&nbsp;Proxy Users">Section&nbsp;6.2.19, &ldquo;Proxy Users&rdquo;</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          If your system supports PAM and permits LDAP as a PAM
          authentication method, another way to use LDAP for MySQL user
          authentication is to use the server-side
          <code class="literal">authentication_pam</code> plugin. See
          <a class="xref" href="pam-pluggable-authentication.html" title="6.4.1.5&nbsp;PAM Pluggable Authentication">Section&nbsp;6.4.1.5, &ldquo;PAM Pluggable Authentication&rdquo;</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-prerequisites"></a>Prerequisites for LDAP Pluggable Authentication</h5></div></div></div><p>
          To use LDAP pluggable authentication for MySQL, these
          prerequisites must be satisfied:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              An LDAP server must be available for the LDAP
              authentication plugins to communicate with.
            </p></li><li class="listitem"><p>
              LDAP users to be authenticated by MySQL must be present in
              the directory managed by the LDAP server.
            </p></li><li class="listitem"><p>
              An LDAP client library must be available on systems where
              the server-side
              <code class="literal">authentication_ldap_sasl</code> or
              <code class="literal">authentication_ldap_simple</code> plugin is
              used. Currently, supported libraries are the Windows
              native LDAP library, or the OpenLDAP library on
              non-Windows systems.
            </p></li><li class="listitem"><p>
              To use SASL-based LDAP authentication:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  The LDAP server must be configured to communicate with
                  a SASL server.
                </p></li><li class="listitem"><p>
                  A SASL client library must be available on systems
                  where the client-side
                  <code class="literal">authentication_ldap_sasl_client</code>
                  plugin is used. Currently, the only supported library
                  is the Cyrus SASL library.
                </p></li><li class="listitem"><p>
                  To use a particular SASL authentication method, any
                  other services required by that method must be
                  available. For example, to use GSSAPI/Kerberos, a
                  GSSAPI library and Kerberos services must be
                  available.
                </p></li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-process"></a>How LDAP Authentication of MySQL Users Works</h5></div></div></div><p>
          This section provides an overview of how MySQL and LDAP work
          together to authenticate MySQL users. For examples showing how
          to set up MySQL accounts to use specific LDAP authentication
          plugins, see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a>. For
          information about authentication methods available to the LDAP
          plugins, see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-auth-methods" title="LDAP Authentication Methods">LDAP Authentication Methods</a>.
        </p><p>
          The client connects to the MySQL server, providing the MySQL
          client user name and a password:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For simple LDAP authentication, the client-side and
              server-side plugins communicate the password as cleartext.
              A secure connection between the MySQL client and server is
              recommended to prevent password exposure.
            </p></li><li class="listitem"><p>
              For SASL-based LDAP authentication, the client-side and
              server-side plugins avoid sending the cleartext password
              between the MySQL client and server. For example, the
              plugins might use SASL messages for secure transmission of
              credentials within the LDAP protocol. For the GSSAPI
              authentication method, the client-side and server-side
              plugins communicate securely using Kerberos without using
              LDAP messages directly.
            </p></li></ul></div><p>
          If the client user name and host name match no MySQL account,
          the connection is rejected.
        </p><p>
          If there is a matching MySQL account, authentication against
          LDAP occurs. The LDAP server looks for an entry matching the
          user and authenticates the entry against the LDAP password:
        </p><a id="idm45828972866432" class="indexterm"></a><a id="idm45828972864944" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If the MySQL account names an LDAP user distinguished name
              (DN), LDAP authentication uses that value and the LDAP
              password provided by the client. (To associate an LDAP
              user DN with a MySQL account, include a
              <code class="literal">BY</code> clause that specifies an
              authentication string in the <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE
              USER</code></a> statement that creates the account.)
            </p></li><li class="listitem"><p>
              If the MySQL account names no LDAP user DN, LDAP
              authentication uses the user name and LDAP password
              provided by the client. In this case, the authentication
              plugin first binds to the LDAP server using the root DN
              and password as credentials to find the user DN based on
              the client user name, then authenticates that user DN
              against the LDAP password. This bind using the root
              credentials fails if the root DN and password are set to
              incorrect values, or are empty (not set) and the LDAP
              server does not permit anonymous connections.
            </p></li></ul></div><p>
          If the LDAP server finds no match or multiple matches,
          authentication fails and the client connection is rejected.
        </p><p>
          If the LDAP server finds a single match, LDAP authentication
          succeeds (assuming that the password is correct), the LDAP
          server returns the LDAP entry, and the authentication plugin
          determines the name of the authenticated user based on that
          entry:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If the LDAP entry has a group attribute (by default, the
              <code class="literal">cn</code> attribute), the plugin returns its
              value as the authenticated user name.
            </p></li><li class="listitem"><p>
              If the LDAP entry has no group attribute, the
              authentication plugin returns the client user name as the
              authenticated user name.
            </p></li></ul></div><p>
          The MySQL server compares the client user name with the
          authenticated user name to determine whether proxying occurs
          for the client session:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If the names are the same, no proxying occurs: The MySQL
              account matching the client user name is used for
              privilege checking.
            </p></li><li class="listitem"><p>
              If the names differ, proxying occurs: MySQL looks for an
              account matching the authenticated user name. That account
              becomes the proxied user, which is used for privilege
              checking. The MySQL account that matched the client user
              name is treated as the external proxy user.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-installation"></a>Installing LDAP Pluggable Authentication</h5></div></div></div><p>
          This section describes how to install the server-side LDAP
          authentication plugins. For general information about
          installing plugins, see <a class="xref" href="plugin-loading.html" title="5.6.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.6.1, &ldquo;Installing and Uninstalling Plugins&rdquo;</a>.
        </p><p>
          To be usable by the server, the plugin library files must be
          located in the MySQL plugin directory (the directory named by
          the <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
          variable). If necessary, configure the plugin directory
          location by setting the value of
          <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
        </p><p>
          The server-side plugin library file base names are
          <code class="literal">authentication_ldap_simple</code> and
          <code class="literal">authentication_ldap_sasl</code>. The file name
          suffix differs per platform (for example,
          <code class="filename">.so</code> for Unix and Unix-like systems,
          <code class="filename">.dll</code> for Windows).
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            On Microsoft Windows, the server plugin for SASL-based LDAP
            authentication is not supported, but the client plugin is
            supported. On other platforms, both the server and client
            plugins are supported.
          </p></div><p>
          To load the plugins at server startup, use
          <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> options to
          name the library files that contain them. With this
          plugin-loading method, the options must be given each time the
          server starts. Also, specify values for any plugin-provided
          system variables you wish to configure.
        </p><p>
          Each server-side LDAP plugin exposes a set of system variables
          that enable its operation to be configured. Setting most of
          these is optional, but you must set the variables that specify
          the LDAP server host (so the plugin knows where to connect)
          and base distinguished name for LDAP bind operations (to limit
          the scope of searches and obtain faster searches). For details
          about all LDAP system variables, see
          <a class="xref" href="pluggable-authentication-system-variables.html" title="6.4.1.13&nbsp;Pluggable Authentication System Variables">Section&nbsp;6.4.1.13, &ldquo;Pluggable Authentication System Variables&rdquo;</a>.
        </p><p>
          To load the plugins and set the LDAP server host and base
          distinguished name for LDAP bind operations, put lines such as
          these in your <code class="filename">my.cnf</code> file, adjusting the
          <code class="filename">.so</code> suffix for your platform as
          necessary:
        </p><pre class="programlisting">[mysqld]
plugin-load-add=authentication_ldap_simple.so
authentication_ldap_simple_server_host=127.0.0.1
authentication_ldap_simple_bind_base_dn=&#34;dc=example,dc=com&#34;
plugin-load-add=authentication_ldap_sasl.so
authentication_ldap_sasl_server_host=127.0.0.1
authentication_ldap_sasl_bind_base_dn=&#34;dc=example,dc=com&#34;
</pre><p>
          After modifying <code class="filename">my.cnf</code>, restart the
          server to cause the new settings to take effect.
        </p><p>
          Alternatively, to load the plugins at runtime, use these
          statements, adjusting the <code class="filename">.so</code> suffix for
          your platform as necessary:
        </p><pre class="programlisting">INSTALL PLUGIN authentication_ldap_simple
  SONAME &#39;authentication_ldap_simple.so&#39;;
INSTALL PLUGIN authentication_ldap_sasl
  SONAME &#39;authentication_ldap_sasl.so&#39;;
</pre><p>
          <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
          immediately, and also registers it in the
          <code class="literal">mysql.plugins</code> system table to cause the
          server to load it for each subsequent normal startup without
          the need for <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
        </p><p>
          After installing the plugins at runtime, the system variables
          that they expose become available and you can add settings for
          them to your <code class="filename">my.cnf</code> file to configure the
          plugins for subsequent restarts. For example:
        </p><pre class="programlisting">[mysqld]
authentication_ldap_simple_server_host=127.0.0.1
authentication_ldap_simple_bind_base_dn=&#34;dc=example,dc=com&#34;
authentication_ldap_sasl_server_host=127.0.0.1
authentication_ldap_sasl_bind_base_dn=&#34;dc=example,dc=com&#34;
</pre><p>
          After modifying <code class="filename">my.cnf</code>, restart the
          server to cause the new settings to take effect.
        </p><p>
          To set and persist each value at runtime rather than at
          startup, use these statements:
        </p><pre class="programlisting">SET PERSIST authentication_ldap_simple_server_host=&#39;127.0.0.1&#39;;
SET PERSIST authentication_ldap_simple_bind_base_dn=&#39;dc=example,dc=com&#39;;
SET PERSIST authentication_ldap_sasl_server_host=&#39;127.0.0.1&#39;;
SET PERSIST authentication_ldap_sasl_bind_base_dn=&#39;dc=example,dc=com&#39;;
</pre><p>
          <a class="link" href="set-variable.html" title="13.7.6.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET
          PERSIST</code></a> sets a value for the running MySQL instance.
          It also saves the value, causing it to carry over to
          subsequent server restarts. To change a value for the running
          MySQL instance without having it carry over to subsequent
          restarts, use the <code class="literal">GLOBAL</code> keyword rather
          than <code class="literal">PERSIST</code>. See
          <a class="xref" href="set-variable.html" title="13.7.6.1&nbsp;SET Syntax for Variable Assignment">Section&nbsp;13.7.6.1, &ldquo;SET Syntax for Variable Assignment&rdquo;</a>.
        </p><p>
          To verify plugin installation, examine the Information Schema
          <a class="link" href="information-schema-plugins-table.html" title="26.3.22&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">PLUGINS</code></a> table or use the
          <a class="link" href="show-plugins.html" title="13.7.7.25&nbsp;SHOW PLUGINS Statement"><code class="literal">SHOW PLUGINS</code></a> statement (see
          <a class="xref" href="obtaining-plugin-information.html" title="5.6.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.6.2, &ldquo;Obtaining Server Plugin Information&rdquo;</a>). For example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE &#39;%ldap%&#39;;</code></strong>
+----------------------------+---------------+
| PLUGIN_NAME                | PLUGIN_STATUS |
+----------------------------+---------------+
| authentication_ldap_sasl   | ACTIVE        |
| authentication_ldap_simple | ACTIVE        |
+----------------------------+---------------+
</pre><p>
          If a plugin fails to initialize, check the server error log
          for diagnostic messages.
        </p><p>
          To associate MySQL accounts with an LDAP plugin, see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Additional Notes for SELinux</div><a id="idm45828972808352" class="indexterm"></a><p>
            On systems running EL6 or EL that have SELinux enabled,
            changes to the SELinux policy are required to enable the
            MySQL LDAP plugins to communicate with the LDAP service:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                Create a file <code class="filename">mysqlldap.te</code> with
                these contents:
              </p><pre class="programlisting">module mysqlldap 1.0;

require {
        type ldap_port_t;
        type mysqld_t;
        class tcp_socket name_connect;
}

#============= mysqld_t ==============

allow mysqld_t ldap_port_t:tcp_socket name_connect;
</pre></li><li class="listitem"><p>
                Compile the security policy module into a binary
                representation:
              </p><pre class="programlisting">checkmodule -M -m mysqlldap.te -o mysqlldap.mod
</pre></li><li class="listitem"><p>
                Create an SELinux policy module package:
              </p><pre class="programlisting">semodule_package -m mysqlldap.mod  -o mysqlldap.pp
</pre></li><li class="listitem"><p>
                Install the module package:
              </p><pre class="programlisting">semodule -i mysqlldap.pp
</pre></li><li class="listitem"><p>
                When the SELinux policy changes have been made, restart
                the MySQL server:
              </p><pre class="programlisting">service mysqld restart
</pre></li></ol></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-uninstallation"></a>Uninstalling LDAP Pluggable Authentication</h5></div></div></div><p>
          The method used to uninstall the LDAP authentication plugins
          depends on how you installed them:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If you installed the plugins at server startup using
              <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> options,
              restart the server without those options.
            </p></li><li class="listitem"><p>
              If you installed the plugins at runtime using
              <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a>, they remain
              installed across server restarts. To uninstall them, use
              <a class="link" href="uninstall-plugin.html" title="13.7.4.6&nbsp;UNINSTALL PLUGIN Statement"><code class="literal">UNINSTALL PLUGIN</code></a>:
            </p><pre class="programlisting">UNINSTALL PLUGIN authentication_ldap_simple;
UNINSTALL PLUGIN authentication_ldap_sasl;
</pre></li></ul></div><p>
          In addition, remove from your <code class="filename">my.cnf</code> file
          any startup options that set LDAP plugin-related system
          variables. If you used
          <a class="link" href="set-variable.html" title="13.7.6.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET
          PERSIST</code></a> to persist LDAP system variables, use
          <a class="link" href="reset-persist.html" title="13.7.8.7&nbsp;RESET PERSIST Statement"><code class="literal">RESET PERSIST</code></a> to remove the
          settings.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-ldap-conf"></a>LDAP Pluggable Authentication and ldap.conf</h5></div></div></div><a id="idm45828972781360" class="indexterm"></a><a id="idm45828972780320" class="indexterm"></a><p>
          For installations that use OpenLDAP, the
          <code class="filename">ldap.conf</code> file provides global defaults
          for LDAP clients. Options can be set in this file to affect
          LDAP clients, including the LDAP authentication plugins.
          OpenLDAP uses configuration options in this order of
          precedence:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Configuration specified by the LDAP client.
            </p></li><li class="listitem"><p>
              Configuration specified in the
              <code class="filename">ldap.conf</code> file. To disable use of
              this file, set the <code class="literal">LDAPNOINIT</code>
              environment variable.
            </p><a id="idm45828972774064" class="indexterm"></a><a id="idm45828972772976" class="indexterm"></a></li><li class="listitem"><p>
              OpenLDAP library built-in defaults.
            </p></li></ul></div><p>
          If the library defaults or <code class="filename">ldap.conf</code>
          values do not yield appropriate option values, an LDAP
          authentication plugin may be able to set related variables to
          affect the LDAP configuration directly. For example, LDAP
          plugins can override <code class="filename">ldap.conf</code> for
          parameters such as these:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              TLS configuration: System variables are available to
              enable TLS and control CA configuration, such as
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_tls"><code class="literal">authentication_ldap_simple_tls</code></a>
              and
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_ca_path"><code class="literal">authentication_ldap_simple_ca_path</code></a>
              for simple LDAP authentication, and
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_tls"><code class="literal">authentication_ldap_sasl_tls</code></a>
              and
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_ca_path"><code class="literal">authentication_ldap_sasl_ca_path</code></a>
              for SASL LDAP authentication.
            </p></li><li class="listitem"><p>
              LDAP referral. See
              <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-ldap-referral" title="LDAP Search Referral">LDAP Search Referral</a>.
            </p></li></ul></div><p>
          For more information about <code class="filename">ldap.conf</code>
          consult the <code class="literal">ldap.conf(5)</code> man page.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage"></a>Using LDAP Pluggable Authentication</h5></div></div></div><p>
          This section describes how to enable MySQL accounts to connect
          to the MySQL server using LDAP pluggable authentication. It is
          assumed that the server is running with the appropriate
          server-side plugins enabled, as described in
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a>,
          and that the appropriate client-side plugins are available on
          the client host.
        </p><p>
          This section does not describe LDAP configuration or
          administration. You are assumed to be familiar with those
          topics.
        </p><p>
          The two server-side LDAP plugins each work with a specific
          client-side plugin:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The server-side
              <code class="literal">authentication_ldap_simple</code> plugin
              performs simple LDAP authentication. For connections by
              accounts that use this plugin, client programs use the
              client-side <code class="literal">mysql_clear_password</code>
              plugin, which sends the password to the server as
              cleartext. No password hashing or encryption is used, so a
              secure connection between the MySQL client and server is
              recommended to prevent password exposure.
            </p></li><li class="listitem"><p>
              The server-side
              <code class="literal">authentication_ldap_sasl</code> plugin
              performs SASL-based LDAP authentication. For connections
              by accounts that use this plugin, client programs use the
              client-side
              <code class="literal">authentication_ldap_sasl_client</code> plugin.
              The client-side and server-side SASL LDAP plugins use SASL
              messages for secure transmission of credentials within the
              LDAP protocol, to avoid sending the cleartext password
              between the MySQL client and server.
            </p></li></ul></div><p>
          Overall requirements for LDAP authentication of MySQL users:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              There must be an LDAP directory entry for each user to be
              authenticated.
            </p></li><li class="listitem"><p>
              There must be a MySQL user account that specifies a
              server-side LDAP authentication plugin and optionally
              names the associated LDAP user distinguished name (DN).
              (To associate an LDAP user DN with a MySQL account,
              include a <code class="literal">BY</code> clause in the
              <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement that
              creates the account.) If an account names no LDAP string,
              LDAP authentication uses the user name specified by the
              client to find the LDAP entry.
            </p></li><li class="listitem"><p>
              Client programs connect using the connection method
              appropriate for the server-side authentication plugin the
              MySQL account uses. For LDAP authentication, connections
              require the MySQL user name and LDAP password. In
              addition, for accounts that use the server-side
              <code class="literal">authentication_ldap_simple</code> plugin,
              invoke client programs with the
              <code class="option">--enable-cleartext-plugin</code> option to
              enable the client-side
              <code class="literal">mysql_clear_password</code> plugin.
            </p></li></ul></div><p>
          The instructions here assume the following scenario:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              MySQL users <code class="literal">betsy</code> and
              <code class="literal">boris</code> authenticate to the LDAP entries
              for <code class="literal">betsy_ldap</code> and
              <code class="literal">boris_ldap</code>, respectively. (It is not
              necessary that the MySQL and LDAP user names differ. The
              use of different names in this discussion helps clarify
              whether an operation context is MySQL or LDAP.)
            </p></li><li class="listitem"><p>
              LDAP entries use the <code class="literal">uid</code> attribute to
              specify user names. This may vary depending on LDAP
              server. Some LDAP servers use the <code class="literal">cn</code>
              attribute for user names rather than
              <code class="literal">uid</code>. To change the attribute, modify
              the
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
              or
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
              system variable appropriately.
            </p></li><li class="listitem"><p>
              These LDAP entries are available in the directory managed
              by the LDAP server, to provide distinguished name values
              that uniquely identify each user:
            </p><pre class="programlisting">uid=betsy_ldap,ou=People,dc=example,dc=com
uid=boris_ldap,ou=People,dc=example,dc=com
</pre></li><li class="listitem"><p>
              <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statements that
              create MySQL accounts name an LDAP user in the
              <code class="literal">BY</code> clause, to indicate which LDAP entry
              the MySQL account authenticates against.
            </p></li></ul></div><p>
          The instructions for setting up an account that uses LDAP
          authentication depend on which server-side LDAP plugin is
          used. The following sections describe several usage scenarios.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage-simple"></a>Simple LDAP Authentication</h5></div></div></div><p>
          To configure a MySQL account for simple LDAP authentication,
          the <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement
          specifies the <code class="literal">authentication_ldap_simple</code>
          plugin, and optionally names the LDAP user distinguished name
          (DN):
        </p><pre class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_ldap_simple
  [BY &#39;<em class="replaceable"><code>LDAP user DN</code></em>&#39;];
</pre><p>
          Suppose that MySQL user <code class="literal">betsy</code> has this
          entry in the LDAP directory:
        </p><pre class="programlisting">uid=betsy_ldap,ou=People,dc=example,dc=com
</pre><p>
          Then the statement to create the MySQL account for
          <code class="literal">betsy</code> looks like this:
        </p><pre class="programlisting">CREATE USER &#39;betsy&#39;@&#39;localhost&#39;
  IDENTIFIED WITH authentication_ldap_simple
  AS &#39;uid=betsy_ldap,ou=People,dc=example,dc=com&#39;;
</pre><p>
          The authentication string specified in the
          <code class="literal">BY</code> clause does not include the LDAP
          password. That must be provided by the client user at connect
          time.
        </p><p>
          Clients connect to the MySQL server by providing the MySQL
          user name and LDAP password, and by enabling the client-side
          <code class="literal">mysql_clear_password</code> plugin:
        </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysql --user=betsy --password --enable-cleartext-plugin</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>betsy_password</code></em></code></strong> <em class="replaceable"><code>(betsy_ldap LDAP password)</code></em>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            The client-side <code class="literal">mysql_clear_password</code>
            authentication plugin leaves the password untouched, so
            client programs send it to the MySQL server as cleartext.
            This enables the password to be passed as is to the LDAP
            server. A cleartext password is necessary to use the
            server-side LDAP library without SASL, but may be a security
            problem in some configurations. These measures minimize the
            risk:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                To make inadvertent use of the
                <code class="literal">mysql_clear_password</code> plugin less
                likely, MySQL clients must explicitly enable it (for
                example, with the
                <code class="option">--enable-cleartext-plugin</code> option). See
                <a class="xref" href="cleartext-pluggable-authentication.html" title="6.4.1.4&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.4, &ldquo;Client-Side Cleartext Pluggable Authentication&rdquo;</a>.
              </p></li><li class="listitem"><p>
                To avoid password exposure with the
                <code class="literal">mysql_clear_password</code> plugin enabled,
                MySQL clients should connect to the MySQL server using
                an encrypted connection. See
                <a class="xref" href="using-encrypted-connections.html" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, &ldquo;Configuring MySQL to Use Encrypted Connections&rdquo;</a>.
              </p></li></ul></div></div><p>
          The authentication process occurs as follows:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              The client-side plugin sends <code class="literal">betsy</code> and
              <em class="replaceable"><code>betsy_password</code></em> as the client
              user name and LDAP password to the MySQL server.
            </p></li><li class="listitem"><p>
              The connection attempt matches the
              <code class="literal">&#39;betsy&#39;@&#39;localhost&#39;</code> account. The
              server-side LDAP plugin finds that this account has an
              authentication string of
              <code class="literal">&#39;uid=betsy_ldap,ou=People,dc=example,dc=com&#39;</code>
              to name the LDAP user DN. The plugin sends this string and
              the LDAP password to the LDAP server.
            </p></li><li class="listitem"><p>
              The LDAP server finds the LDAP entry for
              <code class="literal">betsy_ldap</code> and the password matches, so
              LDAP authentication succeeds.
            </p></li><li class="listitem"><p>
              The LDAP entry has no group attribute, so the server-side
              plugin returns the client user name
              (<code class="literal">betsy</code>) as the authenticated user. This
              is the same user name supplied by the client, so no
              proxying occurs and the client session uses the
              <code class="literal">&#39;betsy&#39;@&#39;localhost&#39;</code> account for
              privilege checking.
            </p></li></ol></div><p>
          Had the matching LDAP entry contained a group attribute, that
          attribute value would have been the authenticated user name
          and, if the value differed from <code class="literal">betsy</code>,
          proxying would have occurred. For examples that use the group
          attribute, see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>.
        </p><p>
          Had the <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement
          contained no <code class="literal">BY</code> clause to specify the
          <code class="literal">betsy_ldap</code> LDAP distinguished name,
          authentication attempts would use the user name provided by
          the client (in this case, <code class="literal">betsy</code>). In the
          absence of an LDAP entry for <code class="literal">betsy</code>,
          authentication would fail.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage-sasl"></a>SASL-Based LDAP Authentication</h5></div></div></div><p>
          To configure a MySQL account for SASL LDAP authentication, the
          <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement specifies
          the <code class="literal">authentication_ldap_sasl</code> plugin, and
          optionally names the LDAP user distinguished name (DN):
        </p><pre class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_ldap_sasl
  [BY &#39;<em class="replaceable"><code>LDAP user DN</code></em>&#39;];
</pre><p>
          Suppose that MySQL user <code class="literal">boris</code> has this
          entry in the LDAP directory:
        </p><pre class="programlisting">uid=boris_ldap,ou=People,dc=example,dc=com
</pre><p>
          Then the statement to create the MySQL account for
          <code class="literal">boris</code> looks like this:
        </p><pre class="programlisting">CREATE USER &#39;boris&#39;@&#39;localhost&#39;
  IDENTIFIED WITH authentication_ldap_sasl
  AS &#39;uid=boris_ldap,ou=People,dc=example,dc=com&#39;;
</pre><p>
          The authentication string specified in the
          <code class="literal">BY</code> clause does not include the LDAP
          password. That must be provided by the client user at connect
          time.
        </p><p>
          Clients connect to the MySQL server by providing the MySQL
          user name and LDAP password:
        </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysql --user=boris --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>boris_password</code></em></code></strong> <em class="replaceable"><code>(boris_ldap LDAP password)</code></em>
</pre><p>
          For the server-side
          <code class="literal">authentication_ldap_sasl</code> plugin, clients
          use the client-side
          <code class="literal">authentication_ldap_sasl_client</code> plugin. If
          a client program does not find the client-side plugin, specify
          a <code class="option">--plugin-dir</code> option that names the
          directory where the plugin library file is installed.
        </p><p>
          The authentication process for <code class="literal">boris</code> is
          similar to that previously described for
          <code class="literal">betsy</code> with simple LDAP authentication,
          except that the client-side and server-side SASL LDAP plugins
          use SASL messages for secure transmission of credentials
          within the LDAP protocol, to avoid sending the cleartext
          password between the MySQL client and server.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage-proxying"></a>LDAP Authentication with Proxying</h5></div></div></div><a id="idm45828972662640" class="indexterm"></a><p>
          LDAP authentication plugins support proxying, enabling a user
          to connect to the MySQL server as one user but assume the
          privileges of a different user. This section describes basic
          LDAP plugin proxy support. The LDAP plugins also support
          specification of group preference and proxy user mapping; see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-group-mapping" title="LDAP Authentication Group Preference and Mapping Specification">LDAP Authentication Group Preference and Mapping Specification</a>.
        </p><p>
          The proxying implementation described here is based on use of
          LDAP group attribute values to map connecting MySQL users who
          authenticate using LDAP onto other MySQL accounts that define
          different sets of privileges. Users do not connect directly
          through the accounts that define the privileges. Instead, they
          connect through a default proxy account authenticated with
          LDAP, such that all external logins are mapped to the proxied
          MySQL accounts that hold the privileges. Any user who connects
          using the proxy account is mapped to one of those proxied
          MySQL accounts, the privileges for which determine the
          database operations permitted to the external user.
        </p><p>
          The instructions here assume the following scenario:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              LDAP entries use the <code class="literal">uid</code> and
              <code class="literal">cn</code> attributes to specify user name and
              group values, respectively. To use different user and
              group attribute names, set the appropriate plugin-specific
              system variables:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  For the <code class="literal">authentication_ldap_simple</code>
                  plugin: Set
                  <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                  and
                  <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_group_search_attr"><code class="literal">authentication_ldap_simple_group_search_attr</code></a>.
                </p></li><li class="listitem"><p>
                  For the <code class="literal">authentication_ldap_sasl</code>
                  plugin: Set
                  <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                  and
                  <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_group_search_attr"><code class="literal">authentication_ldap_sasl_group_search_attr</code></a>.
                </p></li></ul></div></li><li class="listitem"><p>
              These LDAP entries are available in the directory managed
              by the LDAP server, to provide distinguished name values
              that uniquely identify each user:
            </p><pre class="programlisting">uid=basha,ou=People,dc=example,dc=com,cn=accounting
uid=basil,ou=People,dc=example,dc=com,cn=front_office
</pre><p>
              At connect time, the group attribute values become the
              authenticated user names, so they name the
              <code class="literal">accounting</code> and
              <code class="literal">front_office</code> proxied accounts.
            </p></li><li class="listitem"><p>
              The examples assume use of SASL LDAP authentication. Make
              the appropriate adjustments for simple LDAP
              authentication.
            </p></li></ul></div><p>
          Create the default proxy MySQL account:
        </p><pre class="programlisting">CREATE USER &#39;&#39;@&#39;%&#39;
  IDENTIFIED WITH authentication_ldap_sasl;
</pre><p>
          The proxy account definition has no <code class="literal">AS
          &#39;<em class="replaceable"><code>auth_string</code></em>&#39;</code> clause to
          name an LDAP user DN. Thus:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              When a client connects, the client user name becomes the
              LDAP user name to search for.
            </p></li><li class="listitem"><p>
              The matching LDAP entry is expected to include a group
              attribute naming the proxied MySQL account that defines
              the privileges the client should have.
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            If your MySQL installation has anonymous users, they might
            conflict with the default proxy user. For more information
            about this issue, and ways of dealing with it, see
            <a class="xref" href="proxy-users.html#proxy-users-conflicts" title="Default Proxy User and Anonymous User Conflicts">Default Proxy User and Anonymous User Conflicts</a>.
          </p></div><p>
          Create the proxied accounts and grant to each one the
          privileges it should have:
        </p><pre class="programlisting">CREATE USER &#39;accounting&#39;@&#39;localhost&#39;
  IDENTIFIED WITH mysql_no_login;
CREATE USER &#39;front_office&#39;@&#39;localhost&#39;
  IDENTIFIED WITH mysql_no_login;

GRANT ALL PRIVILEGES
  ON accountingdb.*
  TO &#39;accounting&#39;@&#39;localhost&#39;;
GRANT ALL PRIVILEGES
  ON frontdb.*
  TO &#39;front_office&#39;@&#39;localhost&#39;;
</pre><p>
          The proxied accounts use the <code class="literal">mysql_no_login</code>
          authentication plugin to prevent clients from using the
          accounts to log in directly to the MySQL server. Instead,
          users who authenticate using LDAP are expected to use the
          default <code class="literal">&#39;&#39;@&#39;%&#39;</code> proxy account. (This assumes
          that the <code class="literal">mysql_no_login</code> plugin is
          installed. For instructions, see
          <a class="xref" href="no-login-pluggable-authentication.html" title="6.4.1.9&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.9, &ldquo;No-Login Pluggable Authentication&rdquo;</a>.) For
          alternative methods of protecting proxied accounts against
          direct use, see
          <a class="xref" href="proxy-users.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
        </p><p>
          Grant to the proxy account the
          <a class="link" href="privileges-provided.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for each
          proxied account:
        </p><pre class="programlisting">GRANT PROXY
  ON &#39;accounting&#39;@&#39;localhost&#39;
  TO &#39;&#39;@&#39;%&#39;;
GRANT PROXY
  ON &#39;front_office&#39;@&#39;localhost&#39;
  TO &#39;&#39;@&#39;%&#39;;
</pre><p>
          Use the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client to
          connect to the MySQL server as <code class="literal">basha</code>.
        </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysql --user=basha --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>basha_password</code></em></code></strong> <em class="replaceable"><code>(basha LDAP password)</code></em>
</pre><p>
          Authentication occurs as follows:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              The server authenticates the connection using the default
              <code class="literal">&#39;&#39;@&#39;%&#39;</code> proxy account, for client user
              <code class="literal">basha</code>.
            </p></li><li class="listitem"><p>
              The matching LDAP entry is:
            </p><pre class="programlisting">uid=basha,ou=People,dc=example,dc=com,cn=accounting
</pre></li><li class="listitem"><p>
              The matching LDAP entry has group attribute
              <code class="literal">cn=accounting</code>, so
              <code class="literal">accounting</code> becomes the authenticated
              proxied user.
            </p></li><li class="listitem"><p>
              The authenticated user differs from the client user name
              <code class="literal">basha</code>, with the result that
              <code class="literal">basha</code> is treated as a proxy for
              <code class="literal">accounting</code>, and
              <code class="literal">basha</code> assumes the privileges of the
              proxied <code class="literal">accounting</code> account. The
              following query returns output as shown:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-----------------+----------------------+--------------+
| USER()          | CURRENT_USER()       | @@proxy_user |
+-----------------+----------------------+--------------+
| basha@localhost | accounting@localhost | &#39;&#39;@&#39;%&#39;       |
+-----------------+----------------------+--------------+
</pre></li></ol></div><p>
          This demonstrates that <code class="literal">basha</code> uses the
          privileges granted to the proxied
          <code class="literal">accounting</code> MySQL account, and that proxying
          occurs through the default proxy user account.
        </p><p>
          Now connect as <code class="literal">basil</code> instead:
        </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysql --user=basil --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>basil_password</code></em></code></strong> <em class="replaceable"><code>(basil LDAP password)</code></em>
</pre><p>
          The authentication process for <code class="literal">basil</code> is
          similar to that previously described for
          <code class="literal">basha</code>:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              The server authenticates the connection using the default
              <code class="literal">&#39;&#39;@&#39;%&#39;</code> proxy account, for client user
              <code class="literal">basil</code>.
            </p></li><li class="listitem"><p>
              The matching LDAP entry is:
            </p><pre class="programlisting">uid=basil,ou=People,dc=example,dc=com,cn=front_office
</pre></li><li class="listitem"><p>
              The matching LDAP entry has group attribute
              <code class="literal">cn=front_office</code>, so
              <code class="literal">front_office</code> becomes the authenticated
              proxied user.
            </p></li><li class="listitem"><p>
              The authenticated user differs from the client user name
              <code class="literal">basil</code>, with the result that
              <code class="literal">basil</code> is treated as a proxy for
              <code class="literal">front_office</code>, and
              <code class="literal">basil</code> assumes the privileges of the
              proxied <code class="literal">front_office</code> account. The
              following query returns output as shown:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-----------------+------------------------+--------------+
| USER()          | CURRENT_USER()         | @@proxy_user |
+-----------------+------------------------+--------------+
| basil@localhost | front_office@localhost | &#39;&#39;@&#39;%&#39;       |
+-----------------+------------------------+--------------+
</pre></li></ol></div><p>
          This demonstrates that <code class="literal">basil</code> uses the
          privileges granted to the proxied
          <code class="literal">front_office</code> MySQL account, and that
          proxying occurs through the default proxy user account.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage-group-mapping"></a>LDAP Authentication Group Preference and Mapping Specification</h5></div></div></div><a id="idm45828972579536" class="indexterm"></a><a id="idm45828972578048" class="indexterm"></a><p>
          As described in
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>,
          basic LDAP authentication proxying works by the principle that
          the plugin uses the first group name returned by the LDAP
          server as the MySQL proxied user account name. This simple
          capability does not enable specifying any preference about
          which group name to use if the LDAP server returns multiple
          group names, or specifying any name other than the group name
          as the proxied user name.
        </p><p>
          As of MySQL 8.0.14, for MySQL accounts that use LDAP
          authentication, the authentication string can specify the
          following information to enable greater proxying flexibility:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              A list of groups in preference order, such that the plugin
              uses the first group name in the list that matches a group
              returned by the LDAP server.
            </p></li><li class="listitem"><p>
              A mapping from group names to proxied user names, such
              that a group name when matched can provide a specified
              name to use as the proxied user. This provides an
              alternative to using the group name as the proxied user.
            </p></li></ul></div><p>
          Consider the following MySQL proxy account definition:
        </p><pre class="programlisting">CREATE USER &#39;&#39;@&#39;%&#39;
  IDENTIFIED WITH authentication_ldap_sasl
  AS &#39;+ou=People,dc=example,dc=com#grp1=usera,grp2,grp3=userc&#39;;
</pre><p>
          The authentication string has a user DN suffix
          <code class="literal">ou=People,dc=example,dc=com</code> prefixed by the
          <code class="literal">+</code> character. Thus, as described in
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-user-dn-suffix" title="LDAP Authentication User DN Suffixes">LDAP Authentication User DN Suffixes</a>,
          the full user DN is constructed from the user DN suffix as
          specified, plus the client user name as the
          <code class="literal">uid</code> attribute.
        </p><p>
          The remaining part of the authentication string begins with
          <code class="literal">#</code>, which signifies the beginning of group
          preference and mapping information. This part of the
          authentication string lists group names in the order
          <code class="literal">grp1</code>, <code class="literal">grp2</code>,
          <code class="literal">grp3</code>. The LDAP plugin compares that list
          with the set of group names returned by the LDAP server,
          looking in list order for a match against the returned names.
          The plugin uses the first match, or if there is no match,
          authentication fails.
        </p><p>
          Suppose that the LDAP server returns groups
          <code class="literal">grp3</code>, <code class="literal">grp2</code>, and
          <code class="literal">grp7</code>. The LDAP plugin uses
          <code class="literal">grp2</code> because it is the first group in the
          authentication string that matches, even though it is not the
          first group returned by the LDAP server. If the LDAP server
          returns <code class="literal">grp4</code>, <code class="literal">grp2</code>, and
          <code class="literal">grp1</code>, the plugin uses
          <code class="literal">grp1</code> even though <code class="literal">grp2</code>
          also matches. <code class="literal">grp1</code> has a precedence higher
          than <code class="literal">grp2</code> because it is listed earlier in
          the authentication string.
        </p><p>
          Assuming that the plugin finds a group name match, it performs
          mapping from that group name to the MySQL proxied user name,
          if there is one. For the example proxy account, mapping occurs
          as follows:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If the matching group name is <code class="literal">grp1</code> or
              <code class="literal">grp3</code>, those are associated in the
              authentication string with user names
              <code class="literal">usera</code> and <code class="literal">userc</code>,
              respectively. The plugin uses the corresponding associated
              user name as the proxied user name.
            </p></li><li class="listitem"><p>
              If the matching group name is <code class="literal">grp2</code>,
              there is no associated user name in the authentication
              string. The plugin uses <code class="literal">grp2</code> as the
              proxied user name.
            </p></li></ul></div><p>
          If the LDAP server returns a group in DN format, the LDAP
          plugin parses the group DN to extract the group name from it.
        </p><p>
          To specify LDAP group preference and mapping information,
          these principles apply:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Begin the group preference and mapping part of the
              authentication string with a <code class="literal">#</code> prefix
              character.
            </p></li><li class="listitem"><p>
              The group preference and mapping specification is a list
              of one or more items, separated by commas. Each item has
              the form
              <code class="literal"><em class="replaceable"><code>group_name</code></em>=<em class="replaceable"><code>user_name</code></em></code>
              or <em class="replaceable"><code>group_name</code></em>. Items should be
              listed in group name preference order. For a group name
              selected by the plugin as a match from set of group names
              returned by the LDAP server, the two syntaxes differ in
              effect as follows:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  For an item specified as
                  <code class="literal"><em class="replaceable"><code>group_name</code></em>=<em class="replaceable"><code>user_name</code></em></code>
                  (with a user name), the group name maps to the user
                  name, which is used as the MySQL proxied user name.
                </p></li><li class="listitem"><p>
                  For an item specified as
                  <em class="replaceable"><code>group_name</code></em> (with no user
                  name), the group name is used as the MySQL proxied
                  user name.
                </p></li></ul></div></li><li class="listitem"><p>
              To quote a group or user name that contains special
              characters such as space, surround it by double quote
              (<code class="literal">&#34;</code>) characters. For example, if an item
              has group and user names of <code class="literal">my group
              name</code> and <code class="literal">my user name</code>, it
              must be written in a group mapping using quotes:
            </p><pre class="programlisting">&#34;my group name&#34;=&#34;my user name&#34;
</pre><p>
              If an item has group and user names of
              <code class="literal">my_group_name</code> and
              <code class="literal">my_user_name</code> (which contain no special
              characters), it may but need not be written using quotes.
              Any of the following are valid:
            </p><pre class="programlisting">my_group_name=my_user_name
my_group_name=&#34;my_user_name&#34;
&#34;my_group_name&#34;=my_user_name
&#34;my_group_name&#34;=&#34;my_user_name&#34;
</pre></li><li class="listitem"><p>
              To escape a character, precede it by a backslash
              (<code class="literal">\</code>). This is useful particularly to
              include a literal double quote or backslash, which are
              otherwise not included literally.
            </p></li><li class="listitem"><p>
              A user DN need not be present in the authentication
              string, but if present, it must precede the group
              preference and mapping part. A user DN can be given as a
              full user DN, or as a user DN suffix with a
              <code class="literal">+</code> prefix character. (See
              <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-user-dn-suffix" title="LDAP Authentication User DN Suffixes">LDAP Authentication User DN Suffixes</a>.)
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-usage-user-dn-suffix"></a>LDAP Authentication User DN Suffixes</h5></div></div></div><p>
          LDAP authentication plugins permit the authentication string
          that provides user DN information to begin with a
          <code class="literal">+</code> prefix character:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              In the absence of a <code class="literal">+</code> character, the
              authentication string value is treated as is without
              modification.
            </p></li><li class="listitem"><p>
              If the authentication string begins with
              <code class="literal">+</code>, the plugin constructs the full user
              DN value from the user name sent by the client, together
              with the DN specified in the authentication string (with
              the <code class="literal">+</code> removed). In the constructed DN,
              the client user name becomes the value of the attribute
              that specifies LDAP user names. This is
              <code class="literal">uid</code> by default; to change the
              attribute, modify the appropriate system variable
              (<a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
              or
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>).
              The authentication string is stored as given in the
              <code class="literal">mysql.user</code> system table, with the full
              user DN constructed on the fly before authentication.
            </p></li></ul></div><p>
          This account authentication string does not have
          <code class="literal">+</code> at the beginning, so it is taken as the
          full user DN:
        </p><pre class="programlisting">CREATE USER &#39;baldwin&#39;
  IDENTIFIED WITH authentication_ldap_simple
  AS &#39;uid=admin,ou=People,dc=example,dc=com&#39;;
</pre><p>
          The client connects with the user name specified in the
          account (<code class="literal">baldwin</code>). In this case, that name
          is not used because the authentication string has no prefix
          and thus fully specifies the user DN.
        </p><p>
          This account authentication string does have
          <code class="literal">+</code> at the beginning, so it is taken as just
          part of the user DN:
        </p><pre class="programlisting">CREATE USER &#39;accounting&#39;
  IDENTIFIED WITH authentication_ldap_simple
  AS &#39;+ou=People,dc=example,dc=com&#39;;
</pre><p>
          The client connects with the user name specified in the
          account (<code class="literal">accounting</code>), which in this case is
          used as the <code class="literal">uid</code> attribute together with the
          authentication string to construct the user DN:
          <code class="literal">uid=accounting,ou=People,dc=example,dc=com</code>
        </p><p>
          The accounts in the preceding examples have a nonempty user
          name, so the client always connects to the MySQL server using
          the same name as specified in the account definition. If an
          account has an empty user name, such as the default anonymous
          <code class="literal">&#39;&#39;@&#39;%&#39;</code> proxy account described in
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>,
          clients might connect to the MySQL server with varying user
          names. But the principle is the same: If the authentication
          string begins with <code class="literal">+</code>, the plugin uses the
          user name sent by the client together with the authentication
          string to construct the user DN.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-auth-methods"></a>LDAP Authentication Methods</h5></div></div></div><p>
          The LDAP authentication plugins use a configurable
          authentication method. The appropriate system variable and
          available method choices are plugin-specific:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For the <code class="literal">authentication_ldap_simple</code>
              plugin: Set the
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_auth_method_name"><code class="literal">authentication_ldap_simple_auth_method_name</code></a>
              system variable to configure the method. The permitted
              choices are <code class="literal">SIMPLE</code> and
              <code class="literal">AD-FOREST</code>.
            </p></li><li class="listitem"><p>
              For the <code class="literal">authentication_ldap_sasl</code>
              plugin: Set the
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_auth_method_name"><code class="literal">authentication_ldap_sasl_auth_method_name</code></a>
              system variable to configure the method. The permitted
              choices are <code class="literal">SCRAM-SHA-1</code>,
              <code class="literal">SCRAM-SHA-256</code>, and
              <code class="literal">GSSAPI</code>. (To determine which SASL LDAP
              methods are actually available on the host system, check
              the value of the
              <a class="link" href="server-status-variables.html#statvar_Authentication_ldap_sasl_supported_methods"><code class="literal">Authentication_ldap_sasl_supported_methods</code></a>
              status variable.)
            </p></li></ul></div><p>
          See the system variable descriptions for information about
          each permitted method. Also, depending on the method,
          additional configuration may be needed, as described in the
          following sections.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-gssapi"></a>The GSSAPI/Kerberos Authentication Method</h5></div></div></div><a id="idm45828972487280" class="indexterm"></a><a id="idm45828972485824" class="indexterm"></a><a id="idm45828972484320" class="indexterm"></a><a id="idm45828972482816" class="indexterm"></a><p>
          Generic Security Service Application Program Interface
          (GSSAPI) is a security abstraction interface. Kerberos is an
          instance of a specific security protocol that can be used
          through that abstract interface. Using GSSAPI, applications
          authenticate to Kerberos to obtain service credentials, then
          use those credentials in turn to enable secure access to other
          services.
        </p><p>
          One such service is LDAP, which is used by the client-side and
          server-side SASL LDAP authentication plugins. When the
          <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_auth_method_name"><code class="literal">authentication_ldap_sasl_auth_method_name</code></a>
          system variable is set to <code class="literal">GSSAPI</code>, these
          plugins use the GSSAPI/Kerberos authentication method. In this
          case, the plugins communicate securely using Kerberos without
          using LDAP messages directly. The server-side plugin then
          communicates with the LDAP server to interpret LDAP
          authentication messages and retrieve LDAP groups.
        </p><p>
          GSSAPI/Kerberos is supported as an LDAP authentication method
          for MySQL servers and clients on Linux. It is useful in Linux
          environments where applications have access to LDAP through
          Microsoft Active Directory, which has Kerberos enabled by
          default.
        </p><p>
          The following discussion provides information about the
          configuration requirements for using the GSSAPI method.
          Familiarity is assumed with Kerberos concepts and operation.
          The following list briefly defines several common Kerberos
          terms. You may also find the Glossary section of
          <a class="ulink" href="https://tools.ietf.org/html/rfc4120" target="_top">RFC
          4120</a> helpful.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="glossary.html#glos_principal" title="principal">Principal</a>: A named
              entity, such as a user or server.
            </p></li><li class="listitem"><p>
              <a class="link" href="glossary.html#glos_key_distribution_center" title="key distribution center">KDC</a>:
              The key distribution center, comprising the AS and TGS:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="glossary.html#glos_authentication_server" title="authentication server">AS</a>:
                  The authentication server; provides the initial
                  ticket-granting ticket needed to obtain additional
                  tickets.
                </p></li><li class="listitem"><p>
                  <a class="link" href="glossary.html#glos_ticket_granting_server" title="ticket-granting server">TGS</a>:
                  The ticket-granting server; provides additional
                  tickets to Kerberos clients that possess a valid TGT.
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="glossary.html#glos_ticket_granting_ticket" title="ticket-granting ticket">TGT</a>:
              The ticket-granting ticket; presented to the TGS to obtain
              service tickets for service access.
            </p></li></ul></div><p>
          LDAP authentication using Kerberos requires both a KDC server
          and an LDAP server. This requirement can be satisfied in
          different ways:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Active Directory includes both servers, with Kerberos
              authentication enabled by default in the Active Directory
              LDAP server.
            </p></li><li class="listitem"><p>
              OpenLDAP provides an LDAP server, but a separate KDC
              server may be needed, with additional Kerberos setup
              required.
            </p></li></ul></div><p>
          Kerberos must also be available on the client host. A client
          contacts the AS using a password to obtain a TGT. The client
          then uses the TGT to obtain access from the TGS to other
          services, such as LDAP.
        </p><p>
          The following sections discuss the configuration steps to use
          GSSAPI/Kerberos for SASL LDAP authentication in MySQL:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-kerberos-setup" title="Verify Kerberos and LDAP Availability">Verify Kerberos and LDAP Availability</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-ldap-setup" title="Configure the Server-Side SASL LDAP Authentication Plugin for GSSAPI/Kerberos">Configure the Server-Side SASL LDAP Authentication Plugin for GSSAPI/Kerberos</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-mysql-account-setup" title="Create a MySQL Account That Uses GSSAPI/Kerberos for LDAP Authentication">Create a MySQL Account That Uses GSSAPI/Kerberos for LDAP Authentication</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-mysql-client-usage" title="Use the MySQL Account to Connect to the MySQL Server">Use the MySQL Account to Connect to the MySQL Server</a></p></li><li class="listitem"><p><a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-mysql-client-config-parameters" title="Client Configuration Parameters for LDAP Authentication">Client Configuration Parameters for LDAP Authentication</a></p></li></ul></div><h6><a id="ldap-gssapi-kerberos-setup"></a>Verify Kerberos and LDAP Availability</h6><p>
          The following example shows how to test availability of
          Kerberos in Active Directory. The example makes these
          assumptions:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Active Directory is running on the host named
              <code class="literal">ldap_auth.example.com</code> with IP address
              <code class="literal">198.51.100.10</code>.
            </p></li><li class="listitem"><p>
              MySQL-related Kerberos authentication and LDAP lookups use
              the <code class="literal">MYSQL.LOCAL</code> domain.
            </p></li><li class="listitem"><p>
              A principal named <code class="literal">bredon@MYSQL.LOCAL</code> is
              registered with the KDC. (In later discussion, this
              principal name is also associated with the MySQL account
              that authenticates to the MySQL server using
              GSSAPI/Kerberos.)
            </p></li></ul></div><p>
          With those assumptions satisfied, follow this procedure:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              Verify that the Kerberos library is installed and
              configured correctly in the operating system. For example,
              to configure a <code class="literal">MYSQL.LOCAL</code> domain for
              use during MySQL authentication, the
              <code class="filename">/etc/krb5.conf</code> Kerberos configuration
              file should contain something like this:
            </p><a id="idm45828972444288" class="indexterm"></a><a id="idm45828972442800" class="indexterm"></a><pre class="programlisting">[realms]
  MYSQL.LOCAL = {
    kdc = ldap_auth.example.com
    admin_server = ldap_auth.example.com
    default_domain = MYSQL.LOCAL
  }
</pre></li><li class="listitem"><p>
              You may need to add an entry to
              <code class="filename">/etc/hosts</code> for the server host:
            </p><pre class="programlisting">198.51.100.10 ldap_auth ldap_auth.example.com
</pre></li><li class="listitem"><p>
              Check whether Kerberos authentication works correctly:
            </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
                  Use <span class="command"><strong>kinit</strong></span> to authenticate to
                  Kerberos:
                </p><pre class="programlisting">$&gt; <strong class="userinput"><code>kinit bredon@MYSQL.LOCAL</code></strong>
Password for bredon@MYSQL.LOCAL: <em class="replaceable"><code>(enter password here)</code></em>
</pre><p>
                  The command authenticates for the Kerberos principal
                  named <code class="literal">bredon@MYSQL.LOCAL</code>. Enter the
                  principal&#39;s password when the command prompts for it.
                  The KDC returns a TGT that is cached on the client
                  side for use by other Kerberos-aware applications.
                </p></li><li class="listitem"><p>
                  Use <span class="command"><strong>klist</strong></span> to check whether the TGT
                  was obtained correctly. The output should be similar
                  to this:
                </p><pre class="programlisting">$&gt; <span class="command"><strong>klist</strong></span>
Ticket cache: FILE:/tmp/krb5cc_244306
Default principal: bredon@MYSQL.LOCAL

Valid starting       Expires              Service principal
03/23/2021 08:18:33  03/23/2021 18:18:33  krbtgt/MYSQL.LOCAL@MYSQL.LOCAL
</pre></li></ol></div></li><li class="listitem"><p>
              Check whether <span class="command"><strong>ldapsearch</strong></span> works with the
              Kerberos TGT using this command, which searches for users
              in the <code class="literal">MYSQL.LOCAL</code> domain:
            </p><pre class="programlisting">ldapsearch -h 198.51.100.10 -Y GSSAPI -b &#34;dc=MYSQL,dc=LOCAL&#34;
</pre></li></ol></div><h6><a id="ldap-gssapi-ldap-setup"></a>Configure the Server-Side SASL LDAP Authentication Plugin for
          GSSAPI/Kerberos</h6><p>
          Assuming that the LDAP server is accessible through Kerberos
          as just described, configure the server-side SASL LDAP
          authentication plugin to use the GSSAPI/Kerberos
          authentication method. (For general LDAP plugin installation
          information, see
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a>.)
          Here is an example of plugin-related settings the server
          <code class="filename">my.cnf</code> file might contain:
        </p><pre class="programlisting">[mysqld]
plugin-load-add=authentication_ldap_sasl.so
authentication_ldap_sasl_auth_method_name=&#34;GSSAPI&#34;
authentication_ldap_sasl_server_host=198.51.100.10
authentication_ldap_sasl_server_port=389
authentication_ldap_sasl_bind_root_dn=&#34;cn=admin,cn=users,dc=MYSQL,dc=LOCAL&#34;
authentication_ldap_sasl_bind_root_pwd=&#34;<em class="replaceable"><code>password</code></em>&#34;
authentication_ldap_sasl_bind_base_dn=&#34;cn=users,dc=MYSQL,dc=LOCAL&#34;
authentication_ldap_sasl_user_search_attr=&#34;sAMAccountName&#34;
</pre><p>
          Those option file settings configure the SASL LDAP plugin as
          follows:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>
              option loads the plugin (adjust the
              <code class="filename">.so</code> suffix for your platform as
              necessary). If you loaded the plugin previously using an
              <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> statement,
              this option is unnecessary.
            </p></li><li class="listitem"><p>
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_auth_method_name"><code class="literal">authentication_ldap_sasl_auth_method_name</code></a>
              must be set to <code class="literal">GSSAPI</code> to use
              GSSAPI/Kerberos as the SASL LDAP authentication method.
            </p></li><li class="listitem"><p>
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_server_host"><code class="literal">authentication_ldap_sasl_server_host</code></a>
              and
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_server_port"><code class="literal">authentication_ldap_sasl_server_port</code></a>
              indicate the IP address and port number of the Active
              Directory server host for authentication.
            </p></li><li class="listitem"><p>
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_bind_root_dn"><code class="literal">authentication_ldap_sasl_bind_root_dn</code></a>
              and
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_bind_root_pwd"><code class="literal">authentication_ldap_sasl_bind_root_pwd</code></a>
              configure the root DN and password for group search
              capability. This capability is required, but users may not
              have privileges to search. In such cases, it is necessary
              to provide root DN information:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  In the DN option value, <code class="literal">admin</code>
                  should be the name of an administrative LDAP account
                  that has privileges to perform user searches.
                </p></li><li class="listitem"><p>
                  In the password option value,
                  <em class="replaceable"><code>password</code></em> should be the
                  <code class="literal">admin</code> account password.
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_bind_base_dn"><code class="literal">authentication_ldap_sasl_bind_base_dn</code></a>
              indicates the user DN base path, so that searches look for
              users in the <code class="literal">MYSQL.LOCAL</code> domain.
            </p></li><li class="listitem"><p>
              <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
              specifies a standard Active Directory search attribute,
              <code class="literal">sAMAccountName</code>. This attribute is used
              in searches to match logon names; attribute values are not
              the same as the user DN values.
            </p></li></ul></div><h6><a id="ldap-gssapi-mysql-account-setup"></a>Create a MySQL Account That Uses GSSAPI/Kerberos for LDAP Authentication</h6><p>
          MySQL authentication using the SASL LDAP authentication plugin
          with the GSSAPI/Kerberos method is based on a user that is a
          Kerberos principal. The following discussion uses a principal
          named <code class="literal">bredon@MYSQL.LOCAL</code> as this user,
          which must be registered in several places:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The Kerberos administrator should register the user name
              as a Kerberos principal. This name should include a domain
              name. Clients use the principal name and password to
              authenticate with Kerberos and obtain a TGT.
            </p></li><li class="listitem"><p>
              The LDAP administrator should register the user name in an
              LDAP entry. For example:
            </p><pre class="programlisting">uid=bredon,dc=MYSQL,dc=LOCAL
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                In Active Directory (which uses Kerberos as the default
                authentication method), creating a user creates both the
                Kerberos principal and the LDAP entry.
              </p></div></li><li class="listitem"><p>
              The MySQL DBA should create an account that has the
              Kerberos principal name as the user name and that
              authenticates using the SASL LDAP plugin.
            </p></li></ul></div><p>
          Assume that the Kerberos principal and LDAP entry have been
          registered by the appropriate service administrators, and
          that, as previously described in
          <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a>,
          and <a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-ldap-setup" title="Configure the Server-Side SASL LDAP Authentication Plugin for GSSAPI/Kerberos">Configure the Server-Side SASL LDAP Authentication Plugin for GSSAPI/Kerberos</a>, the MySQL server
          has been started with appropriate configuration settings for
          the server-side SASL LDAP plugin. The MySQL DBA then creates a
          MySQL account that corresponds to the Kerberos principal name,
          including the domain name.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            The SASL LDAP plugin uses a constant user DN for Kerberos
            authentication and ignores any user DN configured from
            MySQL. This has certain implications:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                For any MySQL account that uses GSSAPI/Kerberos
                authentication, the authentication string in
                <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> or
                <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> statements
                should contain no user DN because it has no effect.
              </p></li><li class="listitem"><p>
                Because the authentication string contains no user DN,
                it should contain group mapping information, to enable
                the user to be handled as a proxy user that is mapped
                onto the desired proxied user. For information about
                proxying with the LDAP authentication plugin, see
                <a class="xref" href="ldap-pluggable-authentication.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>.
              </p></li></ul></div></div><p>
          The following statements create a proxy user named
          <code class="literal">bredon@MYSQL.LOCAL</code> that assumes the
          privileges of the proxied user named
          <code class="literal">proxied_krb_usr</code>. Other GSSAPI/Kerberos
          users that should have the same privileges can similarly be
          created as proxy users for the same proxied user.
        </p><pre class="programlisting">-- create proxy account
CREATE USER &#39;bredon@MYSQL.LOCAL&#39;
  IDENTIFIED WITH authentication_ldap_sasl
  BY &#39;#krb_grp=proxied_krb_user&#39;;

-- create proxied account and grant its privileges;
-- use mysql_no_login plugin to prevent direct login
CREATE USER &#39;proxied_krb_user&#39;
  IDENTIFIED WITH mysql_no_login;
GRANT ALL
  ON krb_user_db.*
  TO &#39;proxied_krb_user&#39;;

-- grant to proxy account the
-- PROXY privilege for proxied account
GRANT PROXY
  ON &#39;proxied_krb_user&#39;
  TO &#39;bredon@MYSQL.LOCAL&#39;;
</pre><p>
          Observe closely the quoting for the proxy account name in the
          first <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement and
          the <a class="link" href="grant.html" title="13.7.1.6&nbsp;GRANT Statement"><code class="literal">GRANT
          PROXY</code></a> statement:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For most MySQL accounts, the user and host are separate
              parts of the account name, and thus are quoted separately
              as
              <code class="literal">&#39;<em class="replaceable"><code>user_name</code></em>&#39;@&#39;<em class="replaceable"><code>host_name</code></em>&#39;</code>.
            </p></li><li class="listitem"><p>
              For LDAP Kerberos authentication, the user part of the
              account name includes the principal domain, so
              <code class="literal">&#39;bredon@MYSQL.LOCAL&#39;</code> is quoted as a
              single value. Because no host part is given, the full
              MySQL account name uses the default of
              <code class="literal">&#39;%&#39;</code> as the host part:
              <code class="literal">&#39;bredon@MYSQL.LOCAL&#39;@&#39;%&#39;</code>
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            When creating an account that authenticates using the
            <code class="literal">authentication_ldap_sasl</code> SASL LDAP
            authentication plugin with the GSSAPI/Kerberos
            authentication method, the <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE
            USER</code></a> statement includes the realm as part of the
            user name. This differs from creating accounts that use the
            <code class="literal">authentication_kerberos</code> Kerberos plugin.
            For such accounts, the <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE
            USER</code></a> statement does not include the realm as part
            of the user name. Instead, specify the realm as the
            authentication string in the <code class="literal">BY</code> clause.
            See <a class="xref" href="kerberos-pluggable-authentication.html#kerberos-usage-mysql-account-setup" title="Create a MySQL Account That Uses Kerberos Authentication">Create a MySQL Account That Uses Kerberos Authentication</a>.
          </p></div><p>
          The proxied account uses the <code class="literal">mysql_no_login</code>
          authentication plugin to prevent clients from using the
          account to log in directly to the MySQL server. Instead, it is
          expected that users who authenticate using LDAP use the
          <code class="literal">bredon@MYSQL.LOCAL</code> proxy account. (This
          assumes that the <code class="literal">mysql_no_login</code> plugin is
          installed. For instructions, see
          <a class="xref" href="no-login-pluggable-authentication.html" title="6.4.1.9&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.9, &ldquo;No-Login Pluggable Authentication&rdquo;</a>.) For
          alternative methods of protecting proxied accounts against
          direct use, see
          <a class="xref" href="proxy-users.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
        </p><h6><a id="ldap-gssapi-mysql-client-usage"></a>Use the MySQL Account to Connect to the MySQL Server</h6><p>
          After a MySQL account that authenticates using GSSAPI/Kerberos
          has been set up, clients can use it to connect to the MySQL
          server. Kerberos authentication can take place either prior to
          or at the time of MySQL client program invocation:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Prior to invoking the MySQL client program, the client
              user can obtain a TGT from the KDC independently of MySQL.
              For example, the client user can use
              <span class="command"><strong>kinit</strong></span> to authenticate to Kerberos by
              providing a Kerberos principal name and the principal
              password:
            </p><pre class="programlisting">$&gt; <strong class="userinput"><code>kinit bredon@MYSQL.LOCAL</code></strong>
Password for bredon@MYSQL.LOCAL: <em class="replaceable"><code>(enter password here)</code></em>
</pre><p>
              The resulting TGT is cached and becomes available for use
              by other Kerberos-aware applications, such as programs
              that use the client-side SASL LDAP authentication plugin.
              In this case, the MySQL client program authenticates to
              the MySQL server using the TGT, so invoke the client
              without specifying a user name or password:
            </p><pre class="programlisting">mysql --default-auth=authentication_ldap_sasl_client
</pre><p>
              As just described, when the TGT is cached, user-name and
              password options are not needed in the client command. If
              the command includes them anyway, they are handled as
              follows:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If the command includes a user name, authentication
                  fails if that name does not match the principal name
                  in the TGT.
                </p></li><li class="listitem"><p>
                  If the command includes a password, the client-side
                  plugin ignores it. Because authentication is based on
                  the TGT, it can succeed <span class="emphasis"><em>even if the
                  user-provided password is incorrect</em></span>. For
                  this reason, the plugin produces a warning if a valid
                  TGT is found that causes a password to be ignored.
                </p></li></ul></div></li><li class="listitem"><p>
              If the Kerberos cache contains no TGT, the client-side
              SASL LDAP authentication plugin itself can obtain the TGT
              from the KDC. Invoke the client with options for the name
              and password of the Kerberos principal associated with the
              MySQL account (enter the command on a single line, then
              enter the principal password when prompted):
            </p><pre class="programlisting">mysql --default-auth=authentication_ldap_sasl_client
  --user=bredon@MYSQL.LOCAL
  --password
</pre></li><li class="listitem"><p>
              If the Kerberos cache contains no TGT and the client
              command specifies no principal name as the user name,
              authentication fails.
            </p></li></ul></div><p>
          If you are uncertain whether a TGT exists, you can use
          <span class="command"><strong>klist</strong></span> to check.
        </p><p>
          Authentication occurs as follows:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              The client uses the TGT to authenticate using Kerberos.
            </p></li><li class="listitem"><p>
              The server finds the LDAP entry for the principal and uses
              it to authenticate the connection for the
              <code class="literal">bredon@MYSQL.LOCAL</code> MySQL proxy account.
            </p></li><li class="listitem"><p>
              The group mapping information in the proxy account
              authentication string
              (<code class="literal">&#39;#krb_grp=proxied_krb_user&#39;</code>) indicates
              that the authenticated proxied user should be
              <code class="literal">proxied_krb_user</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">bredon@MYSQL.LOCAL</code> is treated as a
              proxy for <code class="literal">proxied_krb_user</code>, and the
              following query returns output as shown:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+------------------------------+--------------------+--------------------------+
| USER()                       | CURRENT_USER()     | @@proxy_user             |
+------------------------------+--------------------+--------------------------+
| bredon@MYSQL.LOCAL@localhost | proxied_krb_user@% | &#39;bredon@MYSQL.LOCAL&#39;@&#39;%&#39; |
+------------------------------+--------------------+--------------------------+
</pre><p>
              The <a class="link" href="information-functions.html#function_user"><code class="literal">USER()</code></a> value indicates
              the user name used for the client command
              (<code class="literal">bredon@MYSQL.LOCAL</code>) and the host from
              which the client connected (<code class="literal">localhost</code>).
            </p><p>
              The <a class="link" href="information-functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value is
              the full name of the proxied user account, which consists
              of the <code class="literal">proxied_krb_user</code> user part and
              the <code class="literal">%</code> host part.
            </p><p>
              The
              <a class="link" href="server-system-variables.html#sysvar_proxy_user"><code class="literal">@@proxy_user</code></a>
              value indicates the full name of the account used to make
              the connection to the MySQL server, which consists of the
              <code class="literal">bredon@MYSQL.LOCAL</code> user part and the
              <code class="literal">%</code> host part.
            </p><p>
              This demonstrates that proxying occurs through the
              <code class="literal">bredon@MYSQL.LOCAL</code> proxy user account,
              and that <code class="literal">bredon@MYSQL.LOCAL</code> assumes the
              privileges granted to the
              <code class="literal">proxied_krb_user</code> proxied user account.
            </p></li></ol></div><p>
          A TGT once obtained is cached on the client side and can be
          used until it expires without specifying the password again.
          However the TGT is obtained, the client-side plugin uses it to
          acquire service tickets and communicate with the server-side
          plugin.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            When the client-side authentication plugin itself obtains
            the TGT, the client user may not want the TGT to be reused.
            As described in
            <a class="xref" href="ldap-pluggable-authentication.html#ldap-gssapi-mysql-client-config-parameters" title="Client Configuration Parameters for LDAP Authentication">Client Configuration Parameters for LDAP Authentication</a>,
            the local <code class="literal">/etc/krb5.conf</code> file can be used
            to cause the client-side plugin to destroy the TGT when done
            with it.
          </p></div><p>
          The server-side plugin has no access to the TGT itself or the
          Kerberos password used to obtain it.
        </p><p>
          The LDAP authentication plugins have no control over the
          caching mechanism (storage in a local file, in memory, and so
          forth), but Kerberos utilities such as
          <span class="command"><strong>kswitch</strong></span> may be available for this purpose.
        </p><h6><a id="ldap-gssapi-mysql-client-config-parameters"></a>Client Configuration Parameters for LDAP Authentication</h6><p>
          The <code class="literal">authentication_ldap_sasl_client</code>
          client-side SASL LDAP plugin reads the local
          <code class="filename">/etc/krb5.conf</code> file. If this file is
          missing or inaccessible, an error occurs. Assuming that the
          file is accessible, it can include an optional
          <code class="literal">[appdefaults]</code> section to provide
          information used by the plugin. Place the information within
          the <code class="literal">mysql</code> part of the section. For example:
        </p><a id="idm45828972303648" class="indexterm"></a><a id="idm45828972302160" class="indexterm"></a><a id="idm45828972300672" class="indexterm"></a><a id="idm45828972299168" class="indexterm"></a><a id="idm45828972297664" class="indexterm"></a><a id="idm45828972296160" class="indexterm"></a><pre class="programlisting">[appdefaults]
  mysql = {
    ldap_server_host = &#34;ldap_host.example.com&#34;
    ldap_destroy_tgt = true
  }
</pre><p>
          The client-side plugin recognizes these parameters in the
          <code class="literal">mysql</code> section:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <code class="literal">ldap_server_host</code> value specifies
              the LDAP server host and can be useful when that host
              differs from the KDC server host specified in the
              <code class="literal">[realms]</code> section. By default, the
              plugin uses the KDC server host as the LDAP server host.
            </p></li><li class="listitem"><p>
              The <code class="literal">ldap_destroy_tgt</code> value indicates
              whether the client-side plugin destroys the TGT after
              obtaining and using it. By default,
              <code class="literal">ldap_destroy_tgt</code> is
              <code class="literal">false</code>, but can be set to
              <code class="literal">true</code> to avoid TGT reuse. (This setting
              applies only to TGTs created by the client-side plugin,
              not TGTs created by other plugins or externally to MySQL.)
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="ldap-pluggable-authentication-ldap-referral"></a>LDAP Search Referral</h5></div></div></div><p>
          An LDAP server can be configured to delegate LDAP searches to
          another LDAP server, a functionality known as LDAP referral.
          Suppose that the server <code class="literal">a.example.com</code> holds
          a <code class="literal">&#34;dc=example,dc=com&#34;</code> root DN and wishes to
          delegate searches to another server
          <code class="literal">b.example.com</code>. To enable this,
          <code class="literal">a.example.com</code> would be configured with a
          named referral object having these attributes:
        </p><pre class="programlisting">dn: dc=subtree,dc=example,dc=com
objectClass: referral
objectClass: extensibleObject
dc: subtree
ref: ldap://b.example.com/dc=subtree,dc=example,dc=com
</pre><p>
          An issue with enabling LDAP referral is that searches can fail
          with LDAP operation errors when the search base DN is the root
          DN, and referral objects are not set. A MySQL DBA might wish
          to avoid such referral errors for the LDAP authentication
          plugins, even though LDAP referral might be set globally in
          the <code class="filename">ldap.conf</code> configuration file. To
          configure on a plugin-specific basis whether the LDAP server
          should use LDAP referral when communicating with each plugin,
          set the
          <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_simple_referral"><code class="literal">authentication_ldap_simple_referral</code></a>
          and
          <a class="link" href="pluggable-authentication-system-variables.html#sysvar_authentication_ldap_sasl_referral"><code class="literal">authentication_ldap_sasl_referral</code></a>
          system variables. Setting either variable to
          <code class="literal">ON</code> or <code class="literal">OFF</code> causes the
          corresponding LDAP authentication plugin to tell the LDAP
          server whether to use referral during MySQL authentication.
          Each variable has a plugin-specific effect and does not affect
          other applications that communicate with the LDAP server. Both
          variables are <code class="literal">OFF</code> by default.
        </p></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="windows-pluggable-authentication.html">Previous <span class="navHint"> Windows Pluggable Authentication </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="authentication-plugins.html">Up <span class="navHint"> Authentication Plugins </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="kerberos-pluggable-authentication.html">Next <span class="navHint"> Kerberos Pluggable Authentication </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>