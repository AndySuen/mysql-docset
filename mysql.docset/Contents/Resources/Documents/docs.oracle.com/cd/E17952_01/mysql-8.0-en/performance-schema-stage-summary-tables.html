<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-3293"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/27.12.20.2%C2%A0Stage%20Summary%20Tables"></a><title>27.12.20.2&nbsp;Stage Summary Tables</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="performance-schema-summary-tables.html" title="27.12.20&nbsp;Performance Schema Summary Tables"/><link rel="prev" href="performance-schema-wait-summary-tables.html" title="27.12.20.1&nbsp;Wait Event Summary Tables"/><link rel="next" href="performance-schema-statement-summary-tables.html" title="27.12.20.3&nbsp;Statement Summary Tables"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="performance-schema-stage-summary-tables.html#performance-schema-stage-summary-tables">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="performance-schema-wait-summary-tables.html">Previous <span class="navHint"> Wait Event Summary Tables </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="performance-schema-summary-tables.html">Up <span class="navHint"> Performance Schema Summary Tables </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="performance-schema-statement-summary-tables.html">Next <span class="navHint"> Statement Summary Tables </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-3294"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/27.12.20.2%C2%A0Stage%20Summary%20Tables"></a><h4 class="title"><a id="performance-schema-stage-summary-tables"></a>27.12.20.2&nbsp;Stage Summary Tables</h4></div></div></div><a id="idm45828786314080" class="indexterm"></a><a id="idm45828786312560" class="indexterm"></a><a id="idm45828786311040" class="indexterm"></a><a id="idm45828786309520" class="indexterm"></a><a id="idm45828786308000" class="indexterm"></a><a id="idm45828786306480" class="indexterm"></a><a id="idm45828786304960" class="indexterm"></a><a id="idm45828786303440" class="indexterm"></a><a id="idm45828786301920" class="indexterm"></a><a id="idm45828786300400" class="indexterm"></a><p>
          The Performance Schema maintains tables for collecting current
          and recent stage events, and aggregates that information in
          summary tables.
          <a class="xref" href="performance-schema-stage-tables.html" title="27.12.5&nbsp;Performance Schema Stage Event Tables">Section&nbsp;27.12.5, &ldquo;Performance Schema Stage Event Tables&rdquo;</a> describes
          the events on which stage summaries are based. See that
          discussion for information about the content of stage events,
          the current and historical stage event tables, and how to
          control stage event collection, which is disabled by default.
        </p><p>
          Example stage event summary information:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT *</code></strong>
       <strong class="userinput"><code>FROM performance_schema.events_stages_summary_global_by_event_name\G</code></strong>
...
*************************** 5. row ***************************
    EVENT_NAME: stage/sql/checking permissions
    COUNT_STAR: 57
SUM_TIMER_WAIT: 26501888880
MIN_TIMER_WAIT: 7317456
AVG_TIMER_WAIT: 464945295
MAX_TIMER_WAIT: 12858936792
...
*************************** 9. row ***************************
    EVENT_NAME: stage/sql/closing tables
    COUNT_STAR: 37
SUM_TIMER_WAIT: 662606568
MIN_TIMER_WAIT: 1593864
AVG_TIMER_WAIT: 17907891
MAX_TIMER_WAIT: 437977248
...
</pre><p>
          Each stage summary table has one or more grouping columns to
          indicate how the table aggregates events. Event names refer to
          names of event instruments in the
          <a class="link" href="performance-schema-setup-instruments-table.html" title="27.12.2.3&nbsp;The setup_instruments Table"><code class="literal">setup_instruments</code></a> table:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_account_by_event_name</code></a>
              has <code class="literal">EVENT_NAME</code>,
              <code class="literal">USER</code>, and <code class="literal">HOST</code>
              columns. Each row summarizes events for a given account
              (user and host combination) and event name.
            </p></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_host_by_event_name</code></a>
              has <code class="literal">EVENT_NAME</code> and
              <code class="literal">HOST</code> columns. Each row summarizes
              events for a given host and event name.
            </p></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_thread_by_event_name</code></a>
              has <code class="literal">THREAD_ID</code> and
              <code class="literal">EVENT_NAME</code> columns. Each row summarizes
              events for a given thread and event name.
            </p></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_user_by_event_name</code></a>
              has <code class="literal">EVENT_NAME</code> and
              <code class="literal">USER</code> columns. Each row summarizes
              events for a given user and event name.
            </p></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_global_by_event_name</code></a>
              has an <code class="literal">EVENT_NAME</code> column. Each row
              summarizes events for a given event name.
            </p></li></ul></div><p>
          Each stage summary table has these summary columns containing
          aggregated values: <code class="literal">COUNT_STAR</code>,
          <code class="literal">SUM_TIMER_WAIT</code>,
          <code class="literal">MIN_TIMER_WAIT</code>,
          <code class="literal">AVG_TIMER_WAIT</code>, and
          <code class="literal">MAX_TIMER_WAIT</code>. These columns are analogous
          to the columns of the same names in the wait event summary
          tables (see
          <a class="xref" href="performance-schema-wait-summary-tables.html" title="27.12.20.1&nbsp;Wait Event Summary Tables">Section&nbsp;27.12.20.1, &ldquo;Wait Event Summary Tables&rdquo;</a>),
          except that the stage summary tables aggregate events from
          <a class="link" href="performance-schema-events-stages-current-table.html" title="27.12.5.1&nbsp;The events_stages_current Table"><code class="literal">events_stages_current</code></a> rather than
          <a class="link" href="performance-schema-events-waits-current-table.html" title="27.12.4.1&nbsp;The events_waits_current Table"><code class="literal">events_waits_current</code></a>.
        </p><p>
          The stage summary tables have these indexes:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_account_by_event_name</code></a>:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Primary key on (<code class="literal">USER</code>,
                  <code class="literal">HOST</code>,
                  <code class="literal">EVENT_NAME</code>)
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_host_by_event_name</code></a>:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Primary key on (<code class="literal">HOST</code>,
                  <code class="literal">EVENT_NAME</code>)
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_thread_by_event_name</code></a>:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Primary key on (<code class="literal">THREAD_ID</code>,
                  <code class="literal">EVENT_NAME</code>)
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_by_user_by_event_name</code></a>:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Primary key on (<code class="literal">USER</code>,
                  <code class="literal">EVENT_NAME</code>)
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_global_by_event_name</code></a>:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Primary key on (<code class="literal">EVENT_NAME</code>)
                </p></li></ul></div></li></ul></div><p>
          <a class="link" href="truncate-table.html" title="13.1.37&nbsp;TRUNCATE TABLE Statement"><code class="literal">TRUNCATE TABLE</code></a> is permitted for
          stage summary tables. It has these effects:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              For summary tables not aggregated by account, host, or
              user, truncation resets the summary columns to zero rather
              than removing rows.
            </p></li><li class="listitem"><p>
              For summary tables aggregated by account, host, or user,
              truncation removes rows for accounts, hosts, or users with
              no connections, and resets the summary columns to zero for
              the remaining rows.
            </p></li></ul></div><p>
          In addition, each stage summary table that is aggregated by
          account, host, user, or thread is implicitly truncated by
          truncation of the connection table on which it depends, or
          truncation of
          <a class="link" href="performance-schema-stage-summary-tables.html" title="27.12.20.2&nbsp;Stage Summary Tables"><code class="literal">events_stages_summary_global_by_event_name</code></a>.
          For details, see
          <a class="xref" href="performance-schema-connection-tables.html" title="27.12.8&nbsp;Performance Schema Connection Tables">Section&nbsp;27.12.8, &ldquo;Performance Schema Connection Tables&rdquo;</a>.
        </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="performance-schema-wait-summary-tables.html">Previous <span class="navHint"> Wait Event Summary Tables </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="performance-schema-summary-tables.html">Up <span class="navHint"> Performance Schema Summary Tables </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="performance-schema-statement-summary-tables.html">Next <span class="navHint"> Statement Summary Tables </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>