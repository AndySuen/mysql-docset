<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-115"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/6.4.5.11%C2%A0Audit%20Log%20Reference"></a><title>6.4.5.11&nbsp;Audit Log Reference</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="audit-log.html" title="6.4.5&nbsp;MySQL Enterprise Audit"/><link rel="prev" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering"/><link rel="next" href="audit-log-restrictions.html" title="6.4.5.12&nbsp;Audit Log Restrictions"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="audit-log-reference.html#audit-log-reference">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="audit-log-legacy-filtering.html">Previous <span class="navHint"> Legacy Mode Audit Log Filtering </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="audit-log.html">Up <span class="navHint"> MySQL Enterprise Audit </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="audit-log-restrictions.html">Next <span class="navHint"> Audit Log Restrictions </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-114"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.5.11%C2%A0Audit%20Log%20Reference"></a><h4 class="title"><a id="audit-log-reference"></a>6.4.5.11&nbsp;Audit Log Reference</h4></div></div></div><p>
        The following sections provide a reference to MySQL Enterprise Audit
        elements:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="audit-log-reference.html#audit-log-tables" title="Audit Log Tables">Audit Log Tables</a></p></li><li class="listitem"><p><a class="xref" href="audit-log-reference.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a></p></li><li class="listitem"><p><a class="xref" href="audit-log-reference.html#audit-log-option-variable-reference" title="Audit Log Option and Variable Reference">Audit Log Option and Variable Reference</a></p></li><li class="listitem"><p><a class="xref" href="audit-log-reference.html#audit-log-options-variables" title="Audit Log Options and Variables">Audit Log Options and Variables</a></p></li><li class="listitem"><p><a class="xref" href="audit-log-reference.html#audit-log-status-variables" title="Audit Log Status Variables">Audit Log Status Variables</a></p></li></ul></div><p>
        To install the audit log tables and functions, use the
        instructions provided in
        <a class="xref" href="audit-log-installation.html" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, &ldquo;Installing or Uninstalling MySQL Enterprise Audit&rdquo;</a>. Unless those objects
        are installed, the <code class="literal">audit_log</code> plugin operates
        in legacy mode (deprecated in MySQL 8.0.34). See
        <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>.
      </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="audit-log-tables"></a>Audit Log Tables</h5></div></div></div><p>
          MySQL Enterprise Audit uses tables in the <code class="literal">mysql</code> system
          database for persistent storage of filter and user account
          data. The tables can be accessed only by users who have
          privileges for that database. To use a different database, set
          the <a class="link" href="audit-log-reference.html#sysvar_audit_log_database"><code class="literal">audit_log_database</code></a> system
          variable at server startup. The tables use the
          <code class="literal">InnoDB</code> storage engine.
        </p><p>
          If these tables are missing, the <code class="literal">audit_log</code>
          plugin operates in (deprecated) legacy mode. See
          <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>.
        </p><p>
          The <code class="literal">audit_log_filter</code> table stores filter
          definitions. The table has these columns:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">NAME</code>
            </p><p>
              The filter name.
            </p></li><li class="listitem"><p>
              <code class="literal">FILTER</code>
            </p><p>
              The filter definition associated with the filter name.
              Definitions are stored as
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> values.
            </p></li></ul></div><p>
          The <code class="literal">audit_log_user</code> table stores user
          account information. The table has these columns:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">USER</code>
            </p><p>
              The user name part of an account. For an account
              <code class="literal">user1@localhost</code>, the
              <code class="literal">USER</code> part is <code class="literal">user1</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">HOST</code>
            </p><p>
              The host name part of an account. For an account
              <code class="literal">user1@localhost</code>, the
              <code class="literal">HOST</code> part is
              <code class="literal">localhost</code>.
            </p></li><li class="listitem"><p>
              <code class="literal">FILTERNAME</code>
            </p><p>
              The name of the filter assigned to the account. The filter
              name associates the account with a filter defined in the
              <code class="literal">audit_log_filter</code> table.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="audit-log-routines"></a>Audit Log Functions</h5></div></div></div><p>
          This section describes, for each audit log function, its
          purpose, calling sequence, and return value. For information
          about the conditions under which these functions can be
          invoked, see <a class="xref" href="audit-log-filtering.html" title="6.4.5.7&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.7, &ldquo;Audit Log Filtering&rdquo;</a>.
        </p><p>
          Each audit log function returns a string that indicates
          whether the operation succeeded. <code class="literal">OK</code>
          indicates success. <code class="literal">ERROR:
          <em class="replaceable"><code>message</code></em></code> indicates
          failure.
        </p><p>
          As of MySQL 8.0.19, audit log functions convert string
          arguments to <code class="literal">utf8mb4</code> and string return
          values are <code class="literal">utf8mb4</code> strings. Prior to MySQL
          8.0.19, audit log functions treat string arguments as binary
          strings (which means they do not distinguish lettercase), and
          string return values are binary strings.
        </p><p>
          If an audit log function is invoked from within the
          <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results display
          using hexadecimal notation, depending on the value of the
          <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For more
          information about that option, see <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
        </p><p>
          These audit log functions are available:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="function_audit-log-encryption-password-get"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-encryption-password-get"><code class="literal">audit_log_encryption_password_get([<em class="replaceable"><code>keyring_id</code></em>])</code></a>
            </p><a id="idm45828963125408" class="indexterm"></a><a id="idm45828963124288" class="indexterm"></a><p>
              This function fetches an audit log encryption password
              from the MySQL keyring, which must be enabled or an error
              occurs. Any keyring component or plugin can be used; for
              instructions, see <a class="xref" href="keyring.html" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, &ldquo;The MySQL Keyring&rdquo;</a>.
            </p><p>
              With no argument, the function retrieves the current
              encryption password as a binary string. An argument may be
              given to specify which audit log encryption password to
              retrieve. The argument must be the keyring ID of the
              current password or an archived password.
            </p><p>
              For additional information about audit log encryption, see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-encryption" title="Encrypting Audit Log Files">Encrypting Audit Log Files</a>.
            </p><p>
              Arguments:
            </p><p>
              <em class="replaceable"><code>keyring_id</code></em>: As of MySQL 8.0.17,
              this optional argument indicates the keyring ID of the
              password to retrieve. The maximum permitted length is 766
              bytes. If omitted, the function retrieves the current
              password.
            </p><p>
              Prior to MySQL 8.0.17, no argument is permitted. The
              function always retrieves the current password.
            </p><p>
              Return value:
            </p><p>
              The password string for success (up to 766 bytes), or
              <code class="literal">NULL</code> and an error for failure.
            </p><p>
              Example:
            </p><p>
              Retrieve the current password:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_encryption_password_get();</code></strong>
+-------------------------------------+
| audit_log_encryption_password_get() |
+-------------------------------------+
| secret                              |
+-------------------------------------+
</pre><p>
              To retrieve a password by ID, you can determine which
              audit log keyring IDs exist by querying the Performance
              Schema <a class="link" href="performance-schema-keyring-keys-table.html" title="27.12.18.2&nbsp;The keyring_keys table"><code class="literal">keyring_keys</code></a> table:
            </p><a id="idm45828963111200" class="indexterm"></a><a id="idm45828963109712" class="indexterm"></a><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT KEY_ID FROM performance_schema.keyring_keys</code></strong>
       <strong class="userinput"><code>WHERE KEY_ID LIKE &#39;audit_log%&#39;</code></strong>
       <strong class="userinput"><code>ORDER BY KEY_ID;</code></strong>
+-----------------------------+
| KEY_ID                      |
+-----------------------------+
| audit_log-20190415T152248-1 |
| audit_log-20190415T153507-1 |
| audit_log-20190416T125122-1 |
| audit_log-20190416T141608-1 |
+-----------------------------+
mysql&gt; <strong class="userinput"><code>SELECT audit_log_encryption_password_get(&#39;audit_log-20190416T125122-1&#39;);</code></strong>
+------------------------------------------------------------------+
| audit_log_encryption_password_get(&#39;audit_log-20190416T125122-1&#39;) |
+------------------------------------------------------------------+
| segreto                                                          |
+------------------------------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-encryption-password-set"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>)</code></a>
            </p><a id="idm45828963100608" class="indexterm"></a><a id="idm45828963099488" class="indexterm"></a><p>
              Sets the current audit log encryption password to the
              argument and stores the password in the MySQL keyring. As
              of MySQL 8.0.19, the password is stored as a
              <code class="literal">utf8mb4</code> string. Prior to MySQL 8.0.19,
              the password is stored in binary form.
            </p><p>
              If encryption is enabled, this function performs a log
              file rotation operation that renames the current log file,
              and begins a new log file encrypted with the password. The
              keyring must be enabled or an error occurs. Any keyring
              component or plugin can be used; for instructions, see
              <a class="xref" href="keyring.html" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, &ldquo;The MySQL Keyring&rdquo;</a>.
            </p><p>
              For additional information about audit log encryption, see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-encryption" title="Encrypting Audit Log Files">Encrypting Audit Log Files</a>.
            </p><p>
              Arguments:
            </p><p>
              <em class="replaceable"><code>password</code></em>: The password string.
              The maximum permitted length is 766 bytes.
            </p><p>
              Return value:
            </p><p>
              1 for success, 0 for failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>);</code></strong>
+---------------------------------------------+
| audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>) |
+---------------------------------------------+
| 1                                           |
+---------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-filter-flush"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
            </p><a id="idm45828963086080" class="indexterm"></a><a id="idm45828963084976" class="indexterm"></a><p>
              Calling any of the other filtering functions affects
              operational audit log filtering immediately and updates
              the audit log tables. If instead you modify the contents
              of those tables directly using statements such as
              <a class="link" href="insert.html" title="13.2.7&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>,
              <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a>, and
              <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a>, the changes do not
              affect filtering immediately. To flush your changes and
              make them operational, call
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>.
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Warning</div><p>
                <a class="link" href="audit-log-reference.html#function_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                should be used only after modifying the audit tables
                directly, to force reloading all filters. Otherwise,
                this function should be avoided. It is, in effect, a
                simplified version of unloading and reloading the
                <code class="literal">audit_log</code> plugin with
                <a class="link" href="uninstall-plugin.html" title="13.7.4.6&nbsp;UNINSTALL PLUGIN Statement"><code class="literal">UNINSTALL PLUGIN</code></a> plus
                <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a>.
              </p><p>
                <a class="link" href="audit-log-reference.html#function_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                affects all current sessions and detaches them from
                their previous filters. Current sessions are no longer
                logged unless they disconnect and reconnect, or execute
                a change-user operation.
              </p></div><p>
              If this function fails, an error message is returned and
              the audit log is disabled until the next successful call
              to
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>.
            </p><p>
              Arguments:
            </p><p>
              None.
            </p><p>
              Return value:
            </p><p>
              A string that indicates whether the operation succeeded.
              <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
              <em class="replaceable"><code>message</code></em></code> indicates
              failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_flush();</code></strong>
+--------------------------+
| audit_log_filter_flush() |
+--------------------------+
| OK                       |
+--------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-filter-remove-filter"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-remove-filter"><code class="literal">audit_log_filter_remove_filter(<em class="replaceable"><code>filter_name</code></em>)</code></a>
            </p><a id="idm45828963059728" class="indexterm"></a><a id="idm45828963058608" class="indexterm"></a><p>
              Given a filter name, removes the filter from the current
              set of filters. It is not an error for the filter not to
              exist.
            </p><p>
              If a removed filter is assigned to any user accounts,
              those users stop being filtered (they are removed from the
              <code class="literal">audit_log_user</code> table). Termination of
              filtering includes any current sessions for those users:
              They are detached from the filter and no longer logged.
            </p><p>
              Arguments:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <em class="replaceable"><code>filter_name</code></em>: A string that
                  specifies the filter name.
                </p></li></ul></div><p>
              Return value:
            </p><p>
              A string that indicates whether the operation succeeded.
              <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
              <em class="replaceable"><code>message</code></em></code> indicates
              failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_remove_filter(&#39;SomeFilter&#39;);</code></strong>
+----------------------------------------------+
| audit_log_filter_remove_filter(&#39;SomeFilter&#39;) |
+----------------------------------------------+
| OK                                           |
+----------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-filter-remove-user"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-remove-user"><code class="literal">audit_log_filter_remove_user(<em class="replaceable"><code>user_name</code></em>)</code></a>
            </p><a id="idm45828963045088" class="indexterm"></a><a id="idm45828963043968" class="indexterm"></a><p>
              Given a user account name, cause the user to be no longer
              assigned to a filter. It is not an error if the user has
              no filter assigned. Filtering of current sessions for the
              user remains unaffected. New connections for the user are
              filtered using the default account filter if there is one,
              and are not logged otherwise.
            </p><p>
              If the name is <code class="literal">%</code>, the function removes
              the default account filter that is used for any user
              account that has no explicitly assigned filter.
            </p><p>
              Arguments:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <em class="replaceable"><code>user_name</code></em>: The user account
                  name as a string in
                  <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                  format, or <code class="literal">%</code> to represent the
                  default account.
                </p></li></ul></div><p>
              Return value:
            </p><p>
              A string that indicates whether the operation succeeded.
              <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
              <em class="replaceable"><code>message</code></em></code> indicates
              failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_remove_user(&#39;user1@localhost&#39;);</code></strong>
+-------------------------------------------------+
| audit_log_filter_remove_user(&#39;user1@localhost&#39;) |
+-------------------------------------------------+
| OK                                              |
+-------------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-filter-set-filter"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-set-filter"><code class="literal">audit_log_filter_set_filter(<em class="replaceable"><code>filter_name</code></em>,
              <em class="replaceable"><code>definition</code></em>)</code></a>
            </p><a id="idm45828963027904" class="indexterm"></a><a id="idm45828963026784" class="indexterm"></a><p>
              Given a filter name and definition, adds the filter to the
              current set of filters. If the filter already exists and
              is used by any current sessions, those sessions are
              detached from the filter and are no longer logged. This
              occurs because the new filter definition has a new filter
              ID that differs from its previous ID.
            </p><p>
              Arguments:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <em class="replaceable"><code>filter_name</code></em>: A string that
                  specifies the filter name.
                </p></li><li class="listitem"><p>
                  <em class="replaceable"><code>definition</code></em>: A
                  <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> value that
                  specifies the filter definition.
                </p></li></ul></div><p>
              Return value:
            </p><p>
              A string that indicates whether the operation succeeded.
              <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
              <em class="replaceable"><code>message</code></em></code> indicates
              failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @f = &#39;{ &#34;filter&#34;: { &#34;log&#34;: false } }&#39;;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_set_filter(&#39;SomeFilter&#39;, @f);</code></strong>
+-----------------------------------------------+
| audit_log_filter_set_filter(&#39;SomeFilter&#39;, @f) |
+-----------------------------------------------+
| OK                                            |
+-----------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-filter-set-user"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-filter-set-user"><code class="literal">audit_log_filter_set_user(<em class="replaceable"><code>user_name</code></em>,
              <em class="replaceable"><code>filter_name</code></em>)</code></a>
            </p><a id="idm45828963010736" class="indexterm"></a><a id="idm45828963009616" class="indexterm"></a><p>
              Given a user account name and a filter name, assigns the
              filter to the user. A user can be assigned only one
              filter, so if the user was already assigned a filter, the
              assignment is replaced. Filtering of current sessions for
              the user remains unaffected. New connections are filtered
              using the new filter.
            </p><p>
              As a special case, the name <code class="literal">%</code>
              represents the default account. The filter is used for
              connections from any user account that has no explicitly
              assigned filter.
            </p><p>
              Arguments:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <em class="replaceable"><code>user_name</code></em>: The user account
                  name as a string in
                  <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                  format, or <code class="literal">%</code> to represent the
                  default account.
                </p></li><li class="listitem"><p>
                  <em class="replaceable"><code>filter_name</code></em>: A string that
                  specifies the filter name.
                </p></li></ul></div><p>
              Return value:
            </p><p>
              A string that indicates whether the operation succeeded.
              <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
              <em class="replaceable"><code>message</code></em></code> indicates
              failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_set_user(&#39;user1@localhost&#39;, &#39;SomeFilter&#39;);</code></strong>
+------------------------------------------------------------+
| audit_log_filter_set_user(&#39;user1@localhost&#39;, &#39;SomeFilter&#39;) |
+------------------------------------------------------------+
| OK                                                         |
+------------------------------------------------------------+
</pre></li><li class="listitem"><p><a id="function_audit-log-read"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read([<em class="replaceable"><code>arg</code></em>])</code></a>
            </p><a id="idm45828962992720" class="indexterm"></a><a id="idm45828962991616" class="indexterm"></a><p>
              Reads the audit log and returns a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string result. If the
              audit log format is not
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>, an error occurs.
            </p><p>
              With no argument or a <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
              hash argument,
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a> reads
              events from the audit log and returns a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string containing an
              array of audit events. Items in the hash argument
              influence how reading occurs, as described later. Each
              element in the returned array is an event represented as a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash, with the
              exception that the last element may be a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
              <code class="literal">null</code> value to indicate no following
              events are available to read.
            </p><p>
              With an argument consisting of a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
              <code class="literal">null</code> value,
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a> closes the
              current read sequence.
            </p><p>
              For additional details about the audit log-reading
              process, see <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p><p>
              Arguments:
            </p><p>
              To obtain a bookmark for the most recently written event,
              call
              <a class="link" href="audit-log-reference.html#function_audit-log-read-bookmark"><code class="literal">audit_log_read_bookmark()</code></a>.
            </p><p>
              <em class="replaceable"><code>arg</code></em>: The argument is optional.
              If omitted, the function reads events from the current
              position. If present, the argument can be a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
              <code class="literal">null</code> value to close the read sequence,
              or a <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash. Within a
              hash argument, items are optional and control aspects of
              the read operation such as the position at which to begin
              reading or how many events to read. The following items
              are significant (other items are ignored):
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">start</code>: The position within the
                  audit log of the first event to read. The position is
                  given as a timestamp and the read starts from the
                  first event that occurs on or after the timestamp
                  value. The <code class="literal">start</code> item has this
                  format, where <em class="replaceable"><code>value</code></em> is a
                  literal timestamp value:
                </p><pre class="programlisting">&#34;start&#34;: { &#34;timestamp&#34;: &#34;<em class="replaceable"><code>value</code></em>&#34; }
</pre><p>
                  The <code class="literal">start</code> item is permitted as of
                  MySQL 8.0.22.
                </p></li><li class="listitem"><p>
                  <code class="literal">timestamp</code>, <code class="literal">id</code>:
                  The position within the audit log of the first event
                  to read. The <code class="literal">timestamp</code> and
                  <code class="literal">id</code> items together comprise a
                  bookmark that uniquely identify a particular event. If
                  an <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a>
                  argument includes either item, it must include both to
                  completely specify a position or an error occurs.
                </p></li><li class="listitem"><p>
                  <code class="literal">max_array_length</code>: The maximum
                  number of events to read from the log. If this item is
                  omitted, the default is to read to the end of the log
                  or until the read buffer is full, whichever comes
                  first.
                </p></li></ul></div><p>
              To specify a starting position to
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a>, pass a
              hash argument that includes either a
              <code class="literal">start</code> item or a bookmark consisting of
              <code class="literal">timestamp</code> and <code class="literal">id</code>
              items. If a hash argument includes both a
              <code class="literal">start</code> item and a bookmark, an error
              occurs.
            </p><p>
              If a hash argument specifies no starting position, reading
              continues from the current position.
            </p><p>
              If a timestamp value includes no time part, a time part of
              <code class="literal">00:00:00</code> is assumed.
            </p><p>
              Return value:
            </p><p>
              If the call succeeds, the return value is a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string containing an
              array of audit events, or a
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
              <code class="literal">null</code> value if that was passed as the
              argument to close the read sequence. If the call fails,
              the return value is <code class="literal">NULL</code> and an error
              occurs.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_read(audit_log_read_bookmark());</code></strong>
+-----------------------------------------------------------------------+
| audit_log_read(audit_log_read_bookmark())                             |
+-----------------------------------------------------------------------+
| [ {&#34;timestamp&#34;:&#34;2020-05-18 22:41:24&#34;,&#34;id&#34;:0,&#34;class&#34;:&#34;connection&#34;, ... |
+-----------------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT audit_log_read(&#39;null&#39;);</code></strong>
+------------------------+
| audit_log_read(&#39;null&#39;) |
+------------------------+
| null                   |
+------------------------+
</pre><p>
              Notes:
            </p><p>
              Prior to MySQL 8.0.19, string return values are binary
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> strings. For
              information about converting such values to nonbinary
              strings, see <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="function_audit-log-read-bookmark"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-read-bookmark"><code class="literal">audit_log_read_bookmark()</code></a>
            </p><a id="idm45828962934368" class="indexterm"></a><a id="idm45828962933264" class="indexterm"></a><p>
              Returns a <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string
              representing a bookmark for the most recently written
              audit log event. If the audit log format is not
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>, an error occurs.
            </p><p>
              The bookmark is a <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash
              with <code class="literal">timestamp</code> and
              <code class="literal">id</code> items that uniquely identify the
              position of an event within the audit log. It is suitable
              for passing to
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a> to
              indicate to that function the position at which to begin
              reading.
            </p><p>
              For additional details about the audit log-reading
              process, see <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p><p>
              Arguments:
            </p><p>
              None.
            </p><p>
              Return value:
            </p><p>
              A <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string containing a
              bookmark for success, or <code class="literal">NULL</code> and an
              error for failure.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_read_bookmark();</code></strong>
+-------------------------------------------------+
| audit_log_read_bookmark()                       |
+-------------------------------------------------+
| { &#34;timestamp&#34;: &#34;2019-10-03 21:03:44&#34;, &#34;id&#34;: 0 } |
+-------------------------------------------------+
</pre><p>
              Notes:
            </p><p>
              Prior to MySQL 8.0.19, string return values are binary
              <a class="link" href="json.html" title="11.5&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> strings. For
              information about converting such values to nonbinary
              strings, see <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="function_audit-log-rotate"></a>
              <a class="link" href="audit-log-reference.html#function_audit-log-rotate"><code class="literal">audit_log_rotate()</code></a>
            </p><a id="idm45828962911456" class="indexterm"></a><a id="idm45828962910352" class="indexterm"></a><p>
              Arguments:
            </p><p>
              None.
            </p><p>
              Return value:
            </p><p>
              The renamed file name.
            </p><p>
              Example:
            </p><pre class="programlisting">mysql&gt; SELECT audit_log_rotate();
</pre><p>
              Using <code class="literal">audit_log_rotate()</code> requires the
              <a class="link" href="privileges-provided.html#priv_audit-admin"><code class="literal">AUDIT_ADMIN</code></a> privilege.
            </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="audit-log-option-variable-reference"></a>Audit Log Option and Variable Reference</h5></div></div></div><div class="table"><a id="idm45828962901776"></a><p class="title"><strong>Table&nbsp;6.44&nbsp;Audit Log Option and Variable Reference</strong></p><div class="table-contents"><table frame="box" rules="all" summary="Reference for audit log command-line options, system variables, and status variables."><colgroup><col style="width: 20%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/></colgroup><thead><tr><th scope="col">Name</th>
<th scope="col">Cmd-Line</th>
<th scope="col">Option File</th>
<th scope="col">System Var</th>
<th scope="col">Status Var</th>
<th scope="col">Var Scope</th>
<th scope="col">Dynamic</th>
</tr></thead><tbody><tr><th scope="row"><a class="link" href="audit-log-reference.html#option_mysqld_audit-log">audit-log</a></th>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_buffer_size">audit_log_buffer_size</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_compression">audit_log_compression</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_connection_policy">audit_log_connection_policy</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_current_session">audit_log_current_session</a></th>
<td></td>
<td></td>
<td>Yes</td>
<td></td>
<td>Both</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_current_size">Audit_log_current_size</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_database">audit_log_database</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_disable">audit_log_disable</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_encryption">audit_log_encryption</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_event_max_drop_size">Audit_log_event_max_drop_size</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_events">Audit_log_events</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_events_filtered">Audit_log_events_filtered</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_events_lost">Audit_log_events_lost</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_events_written">Audit_log_events_written</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_exclude_accounts">audit_log_exclude_accounts</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_file">audit_log_file</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_filter_id">audit_log_filter_id</a></th>
<td></td>
<td></td>
<td>Yes</td>
<td></td>
<td>Both</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_flush">audit_log_flush</a></th>
<td></td>
<td></td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_format">audit_log_format</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_include_accounts">audit_log_include_accounts</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size">audit_log_max_size</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days">audit_log_password_history_keep_days</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_policy">audit_log_policy</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds">audit_log_prune_seconds</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_read_buffer_size">audit_log_read_buffer_size</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Varies</td>
<td>Varies</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size">audit_log_rotate_on_size</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_statement_policy">audit_log_statement_policy</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>Yes</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#sysvar_audit_log_strategy">audit_log_strategy</a></th>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_total_size">Audit_log_total_size</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr><tr><th scope="row"><a class="link" href="audit-log-reference.html#statvar_Audit_log_write_waits">Audit_log_write_waits</a></th>
<td></td>
<td></td>
<td></td>
<td>Yes</td>
<td>Global</td>
<td>No</td>
</tr></tbody></table></div></div><br class="table-break"/></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="audit-log-options-variables"></a>Audit Log Options and Variables</h5></div></div></div><p>
          This section describes the command options and system
          variables that configure operation of MySQL Enterprise Audit. If values
          specified at startup time are incorrect, the
          <code class="literal">audit_log</code> plugin may fail to initialize
          properly and the server does not load it. In this case, the
          server may also produce error messages for other audit log
          settings because it does not recognize them.
        </p><p>
          To configure activation of the audit log plugin, use this
          option:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="option_mysqld_audit-log"></a>
              <a class="link" href="audit-log-reference.html#option_mysqld_audit-log"><code class="option">--audit-log[=<em class="replaceable"><code>value</code></em>]</code></a>
            </p><a id="idm45828962672224" class="indexterm"></a><a id="idm45828962670736" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit-log"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log[=value]</code></td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">ON</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">ON</code></p><p class="valid-value"><code class="literal">OFF</code></p><p class="valid-value"><code class="literal">FORCE</code></p><p class="valid-value"><code class="literal">FORCE_PLUS_PERMANENT</code></p></td>
</tr></tbody></table></div><p>
              This option controls how the server loads the
              <code class="literal">audit_log</code> plugin at startup. It is
              available only if the plugin has been previously
              registered with <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL
              PLUGIN</code></a> or is loaded with
              <a class="link" href="server-options.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
              <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>. See
              <a class="xref" href="audit-log-installation.html" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, &ldquo;Installing or Uninstalling MySQL Enterprise Audit&rdquo;</a>.
            </p><p>
              The option value should be one of those available for
              plugin-loading options, as described in
              <a class="xref" href="plugin-loading.html" title="5.6.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.6.1, &ldquo;Installing and Uninstalling Plugins&rdquo;</a>. For example,
              <a class="link" href="audit-log-reference.html#option_mysqld_audit-log"><code class="option">--audit-log=FORCE_PLUS_PERMANENT</code></a>
              tells the server to load the plugin and prevent it from
              being removed while the server is running.
            </p></li></ul></div><p>
          If the audit log plugin is enabled, it exposes several system
          variables that permit control over logging:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE &#39;audit_log%&#39;;</code></strong>
+--------------------------------------+--------------+
| Variable_name                        | Value        |
+--------------------------------------+--------------+
| audit_log_buffer_size                | 1048576      |
| audit_log_compression                | NONE         |
| audit_log_connection_policy          | ALL          |
| audit_log_current_session            | OFF          |
| audit_log_disable                    | OFF          |
| audit_log_encryption                 | NONE         |
| audit_log_exclude_accounts           |              |
| audit_log_file                       | audit.log    |
| audit_log_filter_id                  | 0            |
| audit_log_flush                      | OFF          |
| audit_log_format                     | NEW          |
| audit_log_format_unix_timestamp      | OFF          |
| audit_log_include_accounts           |              |
| audit_log_max_size                   | 0            |
| audit_log_password_history_keep_days | 0            |
| audit_log_policy                     | ALL          |
| audit_log_prune_seconds              | 0            |
| audit_log_read_buffer_size           | 32768        |
| audit_log_rotate_on_size             | 0            |
| audit_log_statement_policy           | ALL          |
| audit_log_strategy                   | ASYNCHRONOUS |
+--------------------------------------+--------------+
</pre><p>
          You can set any of these variables at server startup, and some
          of them at runtime. Those that are available only for legacy
          mode audit log filtering are so noted.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="sysvar_audit_log_buffer_size"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_buffer_size"><code class="literal">audit_log_buffer_size</code></a>
            </p><a id="idm45828962637568" class="indexterm"></a><a id="idm45828962636528" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_buffer_size"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-buffer-size=#</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_buffer_size">audit_log_buffer_size</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">1048576</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">4096</code></td>
</tr><tr><th>Maximum Value (64-bit platforms)</th>
<td><code class="literal">18446744073709547520</code></td>
</tr><tr><th>Maximum Value (32-bit platforms)</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>Unit</th>
<td>bytes</td>
</tr><tr><th>Block Size</th>
<td><code class="literal">4096</code></td>
</tr></tbody></table></div><p>
              When the audit log plugin writes events to the log
              asynchronously, it uses a buffer to store event contents
              prior to writing them. This variable controls the size of
              that buffer, in bytes. The server adjusts the value to a
              multiple of 4096. The plugin uses a single buffer, which
              it allocates when it initializes and removes when it
              terminates. The plugin allocates this buffer only if
              logging is asynchronous.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_compression"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_compression"><code class="literal">audit_log_compression</code></a>
            </p><a id="idm45828962599536" class="indexterm"></a><a id="idm45828962598496" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_compression"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-compression=value</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_compression">audit_log_compression</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">NONE</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">NONE</code></p><p class="valid-value"><code class="literal">GZIP</code></p></td>
</tr></tbody></table></div><p>
              The type of compression for the audit log file. Permitted
              values are <code class="literal">NONE</code> (no compression; the
              default) and <code class="literal">GZIP</code> (GNU Zip
              compression). For more information, see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-compression" title="Compressing Audit Log Files">Compressing Audit Log Files</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_connection_policy"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
            </p><a id="idm45828962567808" class="indexterm"></a><a id="idm45828962566704" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_connection_policy"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-connection-policy=value</code></td>
</tr><tr><th>Deprecated</th>
<td>8.0.34</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_connection_policy">audit_log_connection_policy</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">ALL</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">ALL</code></p><p class="valid-value"><code class="literal">ERRORS</code></p><p class="valid-value"><code class="literal">NONE</code></p></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                This deprecated variable applies only to legacy mode
                audit log filtering (see
                <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>).
              </p></div><p>
              The policy controlling how the audit log plugin writes
              connection events to its log file. The following table
              shows the permitted values.
            </p><div class="informaltable"><table summary="Permitted values for the audit_log_connection_policy variable."><colgroup><col style="width: 15%"/><col style="width: 85%"/></colgroup><thead><tr>
                  <th>Value</th>
                  <th>Description</th>
                </tr></thead><tbody><tr>
                  <td><code class="literal">ALL</code></td>
                  <td>Log all connection events</td>
                </tr><tr>
                  <td><code class="literal">ERRORS</code></td>
                  <td>Log only failed connection events</td>
                </tr><tr>
                  <td><code class="literal">NONE</code></td>
                  <td>Do not log connection events</td>
                </tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                At server startup, any explicit value given for
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                may be overridden if
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> is
                also specified, as described in
                <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
              </p></div></li><li class="listitem"><p><a id="sysvar_audit_log_current_session"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_current_session"><code class="literal">audit_log_current_session</code></a>
            </p><a id="idm45828962516464" class="indexterm"></a><a id="idm45828962515360" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_current_session"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_current_session">audit_log_current_session</a></code></td>
</tr><tr><th>Scope</th>
<td>Global, Session</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Boolean</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">depends on filtering policy</code></td>
</tr></tbody></table></div><p>
              Whether audit logging is enabled for the current session.
              The session value of this variable is read only. It is set
              when the session begins based on the values of the
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
              and
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
              system variables. The audit log plugin uses the session
              value to determine whether to audit events for the
              session. (There is a global value, but the plugin does not
              use it.)
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_database"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_database"><code class="literal">audit_log_database</code></a>
            </p><a id="idm45828962490160" class="indexterm"></a><a id="idm45828962489120" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_database"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-database=value</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.33</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_database">audit_log_database</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>String</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">mysql</code></td>
</tr></tbody></table></div><p>
              Specifies which database the <code class="literal">audit_log</code>
              plugin uses to find its tables. The database value of this
              variable is read only. To change the default system
              database (<code class="literal">mysql</code>) to another database in
              the global schema namespace, set the system variable at
              server startup. A database name may not be
              <code class="literal">NULL</code> or exceed 64 characters. The
              variable does not limit the maximum length of a string it
              takes, however, setting an invalid database string
              prevents the discovery of audit log tables.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_disable"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_disable"><code class="literal">audit_log_disable</code></a>
            </p><a id="idm45828962459776" class="indexterm"></a><a id="idm45828962458736" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_disable"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-disable[={OFF|ON}]</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.28</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_disable">audit_log_disable</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Boolean</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
              Permits disabling audit logging for all connecting and
              connected sessions. In addition to the
              <a class="link" href="privileges-provided.html#priv_system-variables-admin"><code class="literal">SYSTEM_VARIABLES_ADMIN</code></a>
              privilege, disabling audit logging requires the
              <a class="link" href="privileges-provided.html#priv_audit-admin"><code class="literal">AUDIT_ADMIN</code></a> privilege. See
              <a class="xref" href="audit-log-disabling.html" title="6.4.5.9&nbsp;Disabling Audit Logging">Section&nbsp;6.4.5.9, &ldquo;Disabling Audit Logging&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_encryption"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_encryption"><code class="literal">audit_log_encryption</code></a>
            </p><a id="idm45828962428688" class="indexterm"></a><a id="idm45828962427648" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_encryption"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-encryption=value</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_encryption">audit_log_encryption</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">NONE</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">NONE</code></p><p class="valid-value"><code class="literal">AES</code></p></td>
</tr></tbody></table></div><p>
              The type of encryption for the audit log file. Permitted
              values are <code class="literal">NONE</code> (no encryption; the
              default) and <code class="literal">AES</code> (AES-256-CBC cipher
              encryption). For more information, see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-encryption" title="Encrypting Audit Log Files">Encrypting Audit Log Files</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_exclude_accounts"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
            </p><a id="idm45828962397008" class="indexterm"></a><a id="idm45828962395904" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_exclude_accounts"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-exclude-accounts=value</code></td>
</tr><tr><th>Deprecated</th>
<td>8.0.34</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_exclude_accounts">audit_log_exclude_accounts</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>String</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">NULL</code></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                This deprecated variable applies only to legacy mode
                audit log filtering (see
                <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>).
              </p></div><p>
              The accounts for which events should not be logged. The
              value should be <code class="literal">NULL</code> or a string
              containing a list of one or more comma-separated account
              names. For more information, see
              <a class="xref" href="audit-log-filtering.html" title="6.4.5.7&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.7, &ldquo;Audit Log Filtering&rdquo;</a>.
            </p><p>
              Modifications to
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
              affect only connections created subsequent to the
              modification, not existing connections.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_file"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a>
            </p><a id="idm45828962364336" class="indexterm"></a><a id="idm45828962363248" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_file"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-file=file_name</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_file">audit_log_file</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>File name</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">audit.log</code></td>
</tr></tbody></table></div><p>
              The base name and suffix of the file to which the audit
              log plugin writes events. The default value is
              <code class="filename">audit.log</code>, regardless of logging
              format. To have the name suffix correspond to the format,
              set the name explicitly, choosing a different suffix (for
              example, <code class="filename">audit.xml</code> for XML format,
              <code class="filename">audit.json</code> for JSON format).
            </p><p>
              If the value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> is a
              relative path name, the plugin interprets it relative to
              the data directory. If the value is a full path name, the
              plugin uses the value as is. A full path name may be
              useful if it is desirable to locate audit files on a
              separate file system or directory. For security reasons,
              write the audit log file to a directory accessible only to
              the MySQL server and to users with a legitimate reason to
              view the log.
            </p><p>
              For details about how the audit log plugin interprets the
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value and
              the rules for file renaming that occurs at plugin
              initialization and termination, see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-name" title="Naming Conventions for Audit Log Files">Naming Conventions for Audit Log Files</a>.
            </p><p>
              The audit log plugin uses the directory containing the
              audit log file (determined from the
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value) as
              the location to search for readable audit log files. From
              these log files and the current file, the plugin
              constructs a list of the ones that are subject to use with
              the audit log bookmarking and reading functions. See
              <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_filter_id"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_filter_id"><code class="literal">audit_log_filter_id</code></a>
            </p><a id="idm45828962328816" class="indexterm"></a><a id="idm45828962327776" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_filter_id"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_filter_id">audit_log_filter_id</a></code></td>
</tr><tr><th>Scope</th>
<td>Global, Session</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">1</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Maximum Value</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
              The session value of this variable indicates the
              internally maintained ID of the audit filter for the
              current session. A value of 0 means that the session has
              no filter assigned.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_flush"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a>
            </p><a id="idm45828962299904" class="indexterm"></a><a id="idm45828962298816" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_flush"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_flush">audit_log_flush</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Boolean</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                The <a class="link" href="audit-log-reference.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a>
                variable is deprecated as of MySQL 8.0.31; expect
                support for it to be removed in a future version of
                MySQL. It is superseded by the
                <code class="literal">audit_log_rotate()</code> function.
              </p></div><p>
              If
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              is 0, automatic audit log file rotation is disabled and
              rotation occurs only when performed manually. In that
              case, enabling
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> by
              setting it to 1 or <code class="literal">ON</code> causes the audit
              log plugin to close and reopen its log file to flush it.
              (The variable value remains <code class="literal">OFF</code> so that
              you need not disable it explicitly before enabling it
              again to perform another flush.) For more information, see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_format"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a>
            </p><a id="idm45828962268944" class="indexterm"></a><a id="idm45828962267856" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_format"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-format=value</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_format">audit_log_format</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">NEW</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">OLD</code></p><p class="valid-value"><code class="literal">NEW</code></p><p class="valid-value"><code class="literal">JSON</code></p></td>
</tr></tbody></table></div><p>
              The audit log file format. Permitted values are
              <code class="literal">OLD</code> (old-style XML),
              <code class="literal">NEW</code> (new-style XML; the default), and
              <code class="literal">JSON</code>. For details about each format,
              see <a class="xref" href="audit-log-file-formats.html" title="6.4.5.4&nbsp;Audit Log File Formats">Section&nbsp;6.4.5.4, &ldquo;Audit Log File Formats&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_format_unix_timestamp"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_format_unix_timestamp"><code class="literal">audit_log_format_unix_timestamp</code></a>
            </p><a id="idm45828962235744" class="indexterm"></a><a id="idm45828962234640" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_format_unix_timestamp"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-format-unix-timestamp[={OFF|ON}]</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.26</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_format_unix_timestamp">audit_log_format_unix_timestamp</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Boolean</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
              This variable applies only for JSON-format audit log
              output. When that is true, enabling this variable causes
              each log file record to include a <code class="literal">time</code>
              field. The field value is an integer that represents the
              UNIX timestamp value indicating the date and time when the
              audit event was generated.
            </p><p>
              Changing the value of this variable at runtime causes log
              file rotation so that, for a given JSON-format log file,
              all records in the file either do or do not include the
              <code class="literal">time</code> field.
            </p><p>
              Setting the runtime value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_format_unix_timestamp"><code class="literal">audit_log_format_unix_timestamp</code></a>
              requires the <a class="link" href="privileges-provided.html#priv_audit-admin"><code class="literal">AUDIT_ADMIN</code></a>
              privilege, in addition to the
              <a class="link" href="privileges-provided.html#priv_system-variables-admin"><code class="literal">SYSTEM_VARIABLES_ADMIN</code></a>
              privilege (or the deprecated
              <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a> privilege) normally
              required to set a global system variable runtime value.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_include_accounts"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
            </p><a id="idm45828962199920" class="indexterm"></a><a id="idm45828962198816" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_include_accounts"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-include-accounts=value</code></td>
</tr><tr><th>Deprecated</th>
<td>8.0.34</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_include_accounts">audit_log_include_accounts</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>String</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">NULL</code></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                This deprecated variable applies only to legacy mode
                audit log filtering (see
                <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>).
              </p></div><p>
              The accounts for which events should be logged. The value
              should be <code class="literal">NULL</code> or a string containing a
              list of one or more comma-separated account names. For
              more information, see
              <a class="xref" href="audit-log-filtering.html" title="6.4.5.7&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.7, &ldquo;Audit Log Filtering&rdquo;</a>.
            </p><p>
              Modifications to
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
              affect only connections created subsequent to the
              modification, not existing connections.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_max_size"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a>
            </p><a id="idm45828962167136" class="indexterm"></a><a id="idm45828962166096" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_max_size"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-max-size=#</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.26</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size">audit_log_max_size</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Maximum Value (Windows)</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>Maximum Value (Other)</th>
<td><code class="literal">18446744073709551615</code></td>
</tr><tr><th>Unit</th>
<td>bytes</td>
</tr><tr><th>Block Size</th>
<td><code class="literal">4096</code></td>
</tr></tbody></table></div><p>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a>
              pertains to audit log file pruning, which is supported for
              JSON-format log files only. It controls pruning based on
              combined log file size:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  A value of 0 (the default) disables size-based
                  pruning. No size limit is enforced.
                </p></li><li class="listitem"><p>
                  A value greater than 0 enables size-based pruning. The
                  value is the combined size above which audit log files
                  become subject to pruning.
                </p></li></ul></div><p>
              If you set
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a> to a
              value that is not a multiple of 4096, it is truncated to
              the nearest multiple. In particular, setting it to a value
              less than 4096 sets it to 0 and no size-based pruning
              occurs.
            </p><p>
              If both
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a> and
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              are greater than 0,
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a> should
              be more than 7 times the value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>.
              Otherwise, a warning is written to the server error log
              because in this case the <span class="quote">&ldquo;<span class="quote">granularity</span>&rdquo;</span> of
              size-based pruning may be insufficient to prevent removal
              of all or most rotated log files each time it occurs.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                Setting
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a> by
                itself is not sufficient to cause log file pruning to
                occur because the pruning algorithm uses
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>,
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a>, and
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
                in conjunction. For details, see
                <a class="xref" href="audit-log-logging-configuration.html#audit-log-space-management" title="Space Management of Audit Log Files">Space Management of Audit Log Files</a>.
              </p></div></li><li class="listitem"><p><a id="sysvar_audit_log_password_history_keep_days"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
            </p><a id="idm45828962108928" class="indexterm"></a><a id="idm45828962107888" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_password_history_keep_days"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-password-history-keep-days=#</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.17</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days">audit_log_password_history_keep_days</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Maximum Value</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>Unit</th>
<td>days</td>
</tr></tbody></table></div><p>
              The audit log plugin implements log file encryption using
              encryption passwords stored in the MySQL keyring (see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-file-encryption" title="Encrypting Audit Log Files">Encrypting Audit Log Files</a>). The plugin
              also implements password history, which includes password
              archiving and expiration (removal).
            </p><p>
              When the audit log plugin creates a new encryption
              password, it archives the previous password, if one
              exists, for later use. The
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
              variable controls automatic removal of expired archived
              passwords. Its value indicates the number of days after
              which archived audit log encryption passwords are removed.
              The default of 0 disables password expiration: the
              password retention period is forever.
            </p><p>
              New audit log encryption passwords are created under these
              circumstances:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  During plugin initialization, if the plugin finds that
                  log file encryption is enabled, it checks whether the
                  keyring contains an audit log encryption password. If
                  not, the plugin automatically generates a random
                  initial encryption password.
                </p></li><li class="listitem"><p>
                  When the
                  <a class="link" href="audit-log-reference.html#function_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set()</code></a>
                  function is called to set a specific password.
                </p></li></ul></div><p>
              In each case, the plugin stores the new password in the
              key ring and uses it to encrypt new log files.
            </p><p>
              Removal of expired audit log encryption passwords occurs
              under these circumstances:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  During plugin initialization.
                </p></li><li class="listitem"><p>
                  When the
                  <a class="link" href="audit-log-reference.html#function_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set()</code></a>
                  function is called.
                </p></li><li class="listitem"><p>
                  When the runtime value of
                  <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
                  is changed from its current value to a value greater
                  than 0. Runtime value changes occur for
                  <a class="link" href="set-variable.html" title="13.7.6.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET</code></a>
                  statements that use the <code class="literal">GLOBAL</code> or
                  <code class="literal">PERSIST</code> keyword, but not the
                  <code class="literal">PERSIST_ONLY</code> keyword.
                  <code class="literal">PERSIST_ONLY</code> writes the variable
                  setting to <code class="filename">mysqld-auto.cnf</code>, but
                  has no effect on the runtime value.
                </p><a id="idm45828962057856" class="indexterm"></a><a id="idm45828962056768" class="indexterm"></a></li></ul></div><p>
              When password removal occurs, the current value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
              determines which passwords to remove:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If the value is 0, the plugin removes no passwords.
                </p></li><li class="listitem"><p>
                  If the value is <em class="replaceable"><code>N</code></em> &gt; 0,
                  the plugin removes passwords more than
                  <em class="replaceable"><code>N</code></em> days old.
                </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                Take care not to expire old passwords that are still
                needed to read archived encrypted log files.
              </p></div><p>
              If you normally leave password expiration disabled (that
              is,
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
              has a value of 0), it is possible to perform an on-demand
              cleanup operation by temporarily assigning the variable a
              value greater than zero. For example, to expire passwords
              older than 365 days, do this:
            </p><pre class="programlisting">SET GLOBAL audit_log_password_history_keep_days = 365;
SET GLOBAL audit_log_password_history_keep_days = 0;
</pre><p>
              Setting the runtime value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_password_history_keep_days"><code class="literal">audit_log_password_history_keep_days</code></a>
              requires the <a class="link" href="privileges-provided.html#priv_audit-admin"><code class="literal">AUDIT_ADMIN</code></a>
              privilege, in addition to the
              <a class="link" href="privileges-provided.html#priv_system-variables-admin"><code class="literal">SYSTEM_VARIABLES_ADMIN</code></a>
              privilege (or the deprecated
              <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a> privilege) normally
              required to set a global system variable runtime value.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_policy"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a>
            </p><a id="idm45828962037984" class="indexterm"></a><a id="idm45828962036896" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_policy"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-policy=value</code></td>
</tr><tr><th>Deprecated</th>
<td>8.0.34</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_policy">audit_log_policy</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">ALL</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">ALL</code></p><p class="valid-value"><code class="literal">LOGINS</code></p><p class="valid-value"><code class="literal">QUERIES</code></p><p class="valid-value"><code class="literal">NONE</code></p></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                This deprecated variable applies only to legacy mode
                audit log filtering (see
                <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>).
              </p></div><p>
              The policy controlling how the audit log plugin writes
              events to its log file. The following table shows the
              permitted values.
            </p><div class="informaltable"><table summary="Permitted values for the audit_log_policy variable."><colgroup><col style="width: 15%"/><col style="width: 85%"/></colgroup><thead><tr>
                  <th>Value</th>
                  <th>Description</th>
                </tr></thead><tbody><tr>
                  <td><code class="literal">ALL</code></td>
                  <td>Log all events</td>
                </tr><tr>
                  <td><code class="literal">LOGINS</code></td>
                  <td>Log only login events</td>
                </tr><tr>
                  <td><code class="literal">QUERIES</code></td>
                  <td>Log only query events</td>
                </tr><tr>
                  <td><code class="literal">NONE</code></td>
                  <td>Log nothing (disable the audit stream)</td>
                </tr></tbody></table></div><p>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> can be
              set only at server startup. At runtime, it is a read-only
              variable. Two other system variables,
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
              and
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>,
              provide finer control over logging policy and can be set
              either at startup or at runtime. If you use
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> at
              startup instead of the other two variables, the server
              uses its value to set those variables. For more
              information about the policy variables and their
              interaction, see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_prune_seconds"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
            </p><a id="idm45828961980784" class="indexterm"></a><a id="idm45828961979744" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_prune_seconds"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-prune-seconds=#</code></td>
</tr><tr><th>Introduced</th>
<td>8.0.24</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds">audit_log_prune_seconds</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Maximum Value (Windows)</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>Maximum Value (Other)</th>
<td><code class="literal">18446744073709551615</code></td>
</tr><tr><th>Unit</th>
<td>bytes</td>
</tr></tbody></table></div><p>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
              pertains to audit log file pruning, which is supported for
              JSON-format log files only. It controls pruning based on
              log file age:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  A value of 0 (the default) disables age-based pruning.
                  No age limit is enforced.
                </p></li><li class="listitem"><p>
                  A value greater than 0 enables age-based pruning. The
                  value is the number of seconds after which audit log
                  files become subject to pruning.
                </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                Setting
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
                by itself is not sufficient to cause log file pruning to
                occur because the pruning algorithm uses
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>,
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a>, and
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
                in conjunction. For details, see
                <a class="xref" href="audit-log-logging-configuration.html#audit-log-space-management" title="Space Management of Audit Log Files">Space Management of Audit Log Files</a>.
              </p></div></li><li class="listitem"><p><a id="sysvar_audit_log_read_buffer_size"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
            </p><a id="idm45828961933328" class="indexterm"></a><a id="idm45828961932224" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_read_buffer_size"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-read-buffer-size=#</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_read_buffer_size">audit_log_read_buffer_size</a></code></td>
</tr><tr><th>Scope (&ge; 8.0.12)</th>
<td>Global, Session</td>
</tr><tr><th>Scope (8.0.11)</th>
<td>Global</td>
</tr><tr><th>Dynamic (&ge; 8.0.12)</th>
<td>Yes</td>
</tr><tr><th>Dynamic (8.0.11)</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value (&ge; 8.0.12)</th>
<td><code class="literal">32768</code></td>
</tr><tr><th>Default Value (8.0.11)</th>
<td><code class="literal">1048576</code></td>
</tr><tr><th>Minimum Value (&ge; 8.0.12)</th>
<td><code class="literal">32768</code></td>
</tr><tr><th>Minimum Value (8.0.11)</th>
<td><code class="literal">1024</code></td>
</tr><tr><th>Maximum Value</th>
<td><code class="literal">4194304</code></td>
</tr><tr><th>Unit</th>
<td>bytes</td>
</tr></tbody></table></div><p>
              The buffer size for reading from the audit log file, in
              bytes. The <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a>
              function reads no more than this many bytes. Log file
              reading is supported only for JSON log format. For more
              information, see <a class="xref" href="audit-log-file-reading.html" title="6.4.5.6&nbsp;Reading Audit Log Files">Section&nbsp;6.4.5.6, &ldquo;Reading Audit Log Files&rdquo;</a>.
            </p><p>
              As of MySQL 8.0.12, this variable has a default of 32KB
              and can be set at runtime. Each client should set its
              session value of
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
              appropriately for its use of
              <a class="link" href="audit-log-reference.html#function_audit-log-read"><code class="literal">audit_log_read()</code></a>. Prior to
              MySQL 8.0.12,
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
              has a default of 1MB, affects all clients, and can be
              changed only at server startup.
            </p></li><li class="listitem"><p><a id="sysvar_audit_log_rotate_on_size"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
            </p><a id="idm45828961884944" class="indexterm"></a><a id="idm45828961883840" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_rotate_on_size"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-rotate-on-size=#</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size">audit_log_rotate_on_size</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Integer</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Minimum Value</th>
<td><code class="literal">0</code></td>
</tr><tr><th>Maximum Value</th>
<td><code class="literal">18446744073709551615</code></td>
</tr><tr><th>Unit</th>
<td>bytes</td>
</tr><tr><th>Block Size</th>
<td><code class="literal">4096</code></td>
</tr></tbody></table></div><p>
              If
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              is 0, the audit log plugin does not perform automatic
              size-based log file rotation. If rotation is to occur, you
              must perform it manually; see
              <a class="xref" href="audit-log-logging-configuration.html#audit-log-manual-rotation" title="Manual Audit Log File Rotation (Before MySQL 8.0.31)">Manual Audit Log File Rotation (Before MySQL 8.0.31)</a>.
            </p><p>
              If
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              is greater than 0, automatic size-based log file rotation
              occurs. Whenever a write to the log file causes its size
              to exceed the
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              value, the audit log plugin renames the current log file
              and opens a new current log file using the original name.
            </p><p>
              If you set
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
              to a value that is not a multiple of 4096, it is truncated
              to the nearest multiple. In particular, setting it to a
              value less than 4096 sets it to 0 and no rotation occurs,
              except manually.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                controls whether audit log file rotation occurs. It can
                also be used in conjunction with
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_max_size"><code class="literal">audit_log_max_size</code></a> and
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_prune_seconds"><code class="literal">audit_log_prune_seconds</code></a>
                to configure pruning of rotated JSON-format log files.
                For details, see
                <a class="xref" href="audit-log-logging-configuration.html#audit-log-space-management" title="Space Management of Audit Log Files">Space Management of Audit Log Files</a>.
              </p></div></li><li class="listitem"><p><a id="sysvar_audit_log_statement_policy"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
            </p><a id="idm45828961836992" class="indexterm"></a><a id="idm45828961835888" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_statement_policy"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-statement-policy=value</code></td>
</tr><tr><th>Deprecated</th>
<td>8.0.34</td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_statement_policy">audit_log_statement_policy</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>Yes</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">ALL</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">ALL</code></p><p class="valid-value"><code class="literal">ERRORS</code></p><p class="valid-value"><code class="literal">NONE</code></p></td>
</tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                This deprecated variable applies only to legacy mode
                audit log filtering (see
                <a class="xref" href="audit-log-legacy-filtering.html" title="6.4.5.10&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.10, &ldquo;Legacy Mode Audit Log Filtering&rdquo;</a>).
              </p></div><p>
              The policy controlling how the audit log plugin writes
              statement events to its log file. The following table
              shows the permitted values.
            </p><div class="informaltable"><table summary="Permitted values for the audit_log_statement_policy variable."><colgroup><col style="width: 15%"/><col style="width: 85%"/></colgroup><thead><tr>
                  <th>Value</th>
                  <th>Description</th>
                </tr></thead><tbody><tr>
                  <td><code class="literal">ALL</code></td>
                  <td>Log all statement events</td>
                </tr><tr>
                  <td><code class="literal">ERRORS</code></td>
                  <td>Log only failed statement events</td>
                </tr><tr>
                  <td><code class="literal">NONE</code></td>
                  <td>Do not log statement events</td>
                </tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
                At server startup, any explicit value given for
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                may be overridden if
                <a class="link" href="audit-log-reference.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> is
                also specified, as described in
                <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
              </p></div></li><li class="listitem"><p><a id="sysvar_audit_log_strategy"></a>
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_strategy"><code class="literal">audit_log_strategy</code></a>
            </p><a id="idm45828961785616" class="indexterm"></a><a id="idm45828961784576" class="indexterm"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for audit_log_strategy"><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><tbody><tr><th>Command-Line Format</th>
<td><code class="literal">--audit-log-strategy=value</code></td>
</tr><tr><th>System Variable</th>
<td><code class="literal"><a class="link" href="audit-log-reference.html#sysvar_audit_log_strategy">audit_log_strategy</a></code></td>
</tr><tr><th>Scope</th>
<td>Global</td>
</tr><tr><th>Dynamic</th>
<td>No</td>
</tr><tr><th><a class="link" href="optimizer-hints.html#optimizer-hints-set-var" title="Variable-Setting Hint Syntax"><code class="literal">SET_VAR</code></a> Hint Applies</th>
<td>No</td>
</tr><tr><th>Type</th>
<td>Enumeration</td>
</tr><tr><th>Default Value</th>
<td><code class="literal">ASYNCHRONOUS</code></td>
</tr><tr><th>Valid Values</th>
<td><p class="valid-value"><code class="literal">ASYNCHRONOUS</code></p><p class="valid-value"><code class="literal">PERFORMANCE</code></p><p class="valid-value"><code class="literal">SEMISYNCHRONOUS</code></p><p class="valid-value"><code class="literal">SYNCHRONOUS</code></p></td>
</tr></tbody></table></div><p>
              The logging method used by the audit log plugin. These
              strategy values are permitted:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">ASYNCHRONOUS</code>: Log asynchronously.
                  Wait for space in the output buffer.
                </p></li><li class="listitem"><p>
                  <code class="literal">PERFORMANCE</code>: Log asynchronously.
                  Drop requests for which there is insufficient space in
                  the output buffer.
                </p></li><li class="listitem"><p>
                  <code class="literal">SEMISYNCHRONOUS</code>: Log synchronously.
                  Permit caching by the operating system.
                </p></li><li class="listitem"><p>
                  <code class="literal">SYNCHRONOUS</code>: Log synchronously.
                  Call <code class="filename">sync()</code> after each request.
                </p></li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="audit-log-status-variables"></a>Audit Log Status Variables</h5></div></div></div><p>
          If the audit log plugin is enabled, it exposes several status
          variables that provide operational information. These
          variables are available for legacy mode audit filtering
          (deprecated in MySQL 8.0.34) and JSON mode audit filtering.
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="statvar_Audit_log_current_size"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_current_size"><code class="literal">Audit_log_current_size</code></a>
            </p><a id="idm45828961744528" class="indexterm"></a><a id="idm45828961743488" class="indexterm"></a><p>
              The size of the current audit log file. The value
              increases when an event is written to the log and is reset
              to 0 when the log is rotated.
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_event_max_drop_size"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_event_max_drop_size"><code class="literal">Audit_log_event_max_drop_size</code></a>
            </p><a id="idm45828961738992" class="indexterm"></a><a id="idm45828961737888" class="indexterm"></a><p>
              The size of the largest dropped event in performance
              logging mode. For a description of logging modes, see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_events"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_events"><code class="literal">Audit_log_events</code></a>
            </p><a id="idm45828961732688" class="indexterm"></a><a id="idm45828961731648" class="indexterm"></a><p>
              The number of events handled by the audit log plugin,
              whether or not they were written to the log based on
              filtering policy (see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>).
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_events_filtered"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_events_filtered"><code class="literal">Audit_log_events_filtered</code></a>
            </p><a id="idm45828961726384" class="indexterm"></a><a id="idm45828961725280" class="indexterm"></a><p>
              The number of events handled by the audit log plugin that
              were filtered (not written to the log) based on filtering
              policy (see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>).
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_events_lost"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_events_lost"><code class="literal">Audit_log_events_lost</code></a>
            </p><a id="idm45828961719968" class="indexterm"></a><a id="idm45828961718928" class="indexterm"></a><p>
              The number of events lost in performance logging mode
              because an event was larger than the available audit log
              buffer space. This value may be useful for assessing how
              to set
              <a class="link" href="audit-log-reference.html#sysvar_audit_log_buffer_size"><code class="literal">audit_log_buffer_size</code></a> to
              size the buffer for performance mode. For a description of
              logging modes, see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_events_written"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_events_written"><code class="literal">Audit_log_events_written</code></a>
            </p><a id="idm45828961712240" class="indexterm"></a><a id="idm45828961711136" class="indexterm"></a><p>
              The number of events written to the audit log.
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_total_size"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_total_size"><code class="literal">Audit_log_total_size</code></a>
            </p><a id="idm45828961706704" class="indexterm"></a><a id="idm45828961705664" class="indexterm"></a><p>
              The total size of events written to all audit log files.
              Unlike
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_current_size"><code class="literal">Audit_log_current_size</code></a>,
              the value of
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_total_size"><code class="literal">Audit_log_total_size</code></a>
              increases even when the log is rotated.
            </p></li><li class="listitem"><p><a id="statvar_Audit_log_write_waits"></a>
              <a class="link" href="audit-log-reference.html#statvar_Audit_log_write_waits"><code class="literal">Audit_log_write_waits</code></a>
            </p><a id="idm45828961698544" class="indexterm"></a><a id="idm45828961697504" class="indexterm"></a><p>
              The number of times an event had to wait for space in the
              audit log buffer in asynchronous logging mode. For a
              description of logging modes, see
              <a class="xref" href="audit-log-logging-configuration.html" title="6.4.5.5&nbsp;Configuring Audit Logging Characteristics">Section&nbsp;6.4.5.5, &ldquo;Configuring Audit Logging Characteristics&rdquo;</a>.
            </p></li></ul></div></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="audit-log-legacy-filtering.html">Previous <span class="navHint"> Legacy Mode Audit Log Filtering </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="audit-log.html">Up <span class="navHint"> MySQL Enterprise Audit </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="audit-log-restrictions.html">Next <span class="navHint"> Audit Log Restrictions </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>