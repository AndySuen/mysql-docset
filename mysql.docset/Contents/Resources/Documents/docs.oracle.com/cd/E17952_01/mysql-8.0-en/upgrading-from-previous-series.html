<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-4484"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/2.10.4%C2%A0Changes%20in%20MySQL%208.0"></a><title>2.10.4&nbsp;Changes in MySQL 8.0</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="upgrading.html" title="2.10&nbsp;Upgrading MySQL"/><link rel="prev" href="upgrading-what-is-upgraded.html" title="2.10.3&nbsp;What the MySQL Upgrade Process Upgrades"/><link rel="next" href="upgrade-prerequisites.html" title="2.10.5&nbsp;Preparing Your Installation for Upgrade"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="upgrading-from-previous-series.html#upgrading-from-previous-series">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="upgrading-what-is-upgraded.html">Previous <span class="navHint"> What the MySQL Upgrade Process Upgrades </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="upgrading.html">Up <span class="navHint"> Upgrading MySQL </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="upgrade-prerequisites.html">Next <span class="navHint"> Preparing Your Installation for Upgrade </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrading-from-previous-series"></a>2.10.4&nbsp;Changes in MySQL 8.0</h3></div></div></div><p>
      Before upgrading to MySQL 8.0, review the changes
      described in this section to identify those that apply to your
      current MySQL installation and applications. Perform any
      recommended actions.
    </p><p>
      Changes marked as <span class="bold"><strong>Incompatible
      change</strong></span> are incompatibilities with earlier versions of
      MySQL, and may require your attention <span class="emphasis"><em>before
      upgrading</em></span>. Our aim is to avoid these changes, but
      occasionally they are necessary to correct problems that would be
      worse than an incompatibility between releases. If an upgrade
      issue applicable to your installation involves an incompatibility,
      follow the instructions given in the description.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-data-dictionary-changes" title="Data Dictionary Changes">Data Dictionary Changes</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-caching-sha2-password" title="caching_sha2_password as the Preferred Authentication Plugin">caching_sha2_password as the Preferred Authentication Plugin</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-configuration-changes" title="Configuration Changes">Configuration Changes</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-server-changes" title="Server Changes">Server Changes</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-innodb-changes" title="InnoDB Changes">InnoDB Changes</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-sql-changes" title="SQL Changes">SQL Changes</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-server-defaults" title="Changed Server Defaults">Changed Server Defaults</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4485"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Data%20Dictionary%20Changes"></a><h4 class="title"><a id="upgrade-data-dictionary-changes"></a>Data Dictionary Changes</h4></div></div></div><p>
        MySQL Server 8.0 incorporates a global data
        dictionary containing information about database objects in
        transactional tables. In previous MySQL series, dictionary data
        was stored in metadata files and nontransactional system tables.
        As a result, the upgrade procedure requires that you verify the
        upgrade readiness of your installation by checking specific
        prerequisites. For more information, see
        <a class="xref" href="upgrade-prerequisites.html" title="2.10.5&nbsp;Preparing Your Installation for Upgrade">Section&nbsp;2.10.5, &ldquo;Preparing Your Installation for Upgrade&rdquo;</a>. A data
        dictionary-enabled server entails some general operational
        differences; see
        <a class="xref" href="data-dictionary-usage-differences.html" title="14.7&nbsp;Data Dictionary Usage Differences">Section&nbsp;14.7, &ldquo;Data Dictionary Usage Differences&rdquo;</a>.
      </p></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4486"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/caching_sha2_password%20as%20the%20Preferred%20Authentication%20Plugin"></a><h4 class="title"><a id="upgrade-caching-sha2-password"></a>caching_sha2_password as the Preferred Authentication Plugin</h4></div></div></div><a id="idm45829052203808" class="indexterm"></a><p>
        The <code class="literal">caching_sha2_password</code> and
        <code class="literal">sha256_password</code> authentication plugins
        provide more secure password encryption than the
        <code class="literal">mysql_native_password</code> plugin, and
        <code class="literal">caching_sha2_password</code> provides better
        performance than <code class="literal">sha256_password</code>. Due to
        these superior security and performance characteristics of
        <code class="literal">caching_sha2_password</code>, it is as of MySQL 8.0
        the preferred authentication plugin, and is also the default
        authentication plugin rather than
        <code class="literal">mysql_native_password</code>. This change affects
        both the server and the <code class="literal">libmysqlclient</code> client
        library:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            For the server, the default value of the
            <a class="link" href="server-system-variables.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
            system variable changes from
            <code class="literal">mysql_native_password</code> to
            <code class="literal">caching_sha2_password</code>.
          </p><p>
            This change applies only to new accounts created after
            installing or upgrading to MySQL 8.0 or higher. For accounts
            already existing in an upgraded installation, their
            authentication plugin remains unchanged. Existing users who
            wish to switch to <code class="literal">caching_sha2_password</code>
            can do so using the <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER
            USER</code></a> statement:
          </p><pre class="programlisting">ALTER USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH caching_sha2_password
  BY &#39;<em class="replaceable"><code>password</code></em>&#39;;
</pre></li><li class="listitem"><p>
            The <code class="literal">libmysqlclient</code> library treats
            <code class="literal">caching_sha2_password</code> as the default
            authentication plugin rather than
            <code class="literal">mysql_native_password</code>.
          </p></li></ul></div><p>
        The following sections discuss the implications of the more
        prominent role of <code class="literal">caching_sha2_password</code>:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-caching-sha2-password-compatibility-issues" title="caching_sha2_password Compatibility Issues and Solutions">caching_sha2_password Compatibility Issues and Solutions</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-caching-sha2-password-compatible-connectors" title="caching_sha2_password-Compatible Clients and Connectors">caching_sha2_password-Compatible Clients and Connectors</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-caching-sha2-password-root-account" title="caching_sha2_password and the root Administrative Account">caching_sha2_password and the root Administrative Account</a></p></li><li class="listitem"><p><a class="xref" href="upgrading-from-previous-series.html#upgrade-caching-sha2-password-replication" title="caching_sha2_password and Replication">caching_sha2_password and Replication</a></p></li></ul></div><h5><a id="upgrade-caching-sha2-password-compatibility-issues"></a>caching_sha2_password Compatibility Issues and Solutions</h5><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
          If your MySQL installation must serve pre-8.0 clients and you
          encounter compatibility issues after upgrading to MySQL 8.0 or
          higher, the simplest way to address those issues and restore
          pre-8.0 compatibility is to reconfigure the server to revert
          to the previous default authentication plugin
          (<code class="literal">mysql_native_password</code>). For example, use
          these lines in the server option file:
        </p><pre class="programlisting">[mysqld]
default_authentication_plugin=mysql_native_password
</pre><p>
          That setting enables pre-8.0 clients to connect to 8.0 servers
          until such time as the clients and connectors in use at your
          installation are upgraded to know about
          <code class="literal">caching_sha2_password</code>. However, the setting
          should be viewed as temporary, not as a long term or permanent
          solution, because it causes new accounts created with the
          setting in effect to forego the improved authentication
          security provided by <code class="literal">caching_sha2_password</code>.
        </p></div><p>
        The use of <code class="literal">caching_sha2_password</code> offers more
        secure password hashing than
        <code class="literal">mysql_native_password</code> (and consequent
        improved client connection authentication). However, it also has
        compatibility implications that may affect existing MySQL
        installations:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Clients and connectors that have not been updated to know
            about <code class="literal">caching_sha2_password</code> may have
            trouble connecting to a MySQL 8.0 server configured with
            <code class="literal">caching_sha2_password</code> as the default
            authentication plugin, even to use accounts that do not
            authenticate with <code class="literal">caching_sha2_password</code>.
            This issue occurs because the server specifies the name of
            its default authentication plugin to clients. If a client or
            connector is based on a client/server protocol
            implementation that does not gracefully handle an
            unrecognized default authentication plugin, it may fail with
            an error such as one of these:
          </p><a id="idm45829052166288" class="indexterm"></a><a id="idm45829052164512" class="indexterm"></a><a id="idm45829052162736" class="indexterm"></a><pre class="programlisting">Authentication plugin &#39;caching_sha2_password&#39; is not supported
</pre><pre class="programlisting">Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded:
dlopen(/usr/local/mysql/lib/plugin/caching_sha2_password.so, 2):
image not found
</pre><pre class="programlisting">Warning: mysqli_connect(): The server requested authentication
method unknown to the client [caching_sha2_password]
</pre><p>
            For information about writing connectors to gracefully
            handle requests from the server for unknown default
            authentication plugins, see
            <a class="xref" href="pluggable-authentication.html#pluggable-authentication-connector-writing" title="Authentication Plugin Connector-Writing Considerations">Authentication Plugin Connector-Writing Considerations</a>.
          </p></li><li class="listitem"><p>
            Clients that use an account that authenticates with
            <code class="literal">caching_sha2_password</code> must use either a
            secure connection (made using TCP using TLS/SSL credentials,
            a Unix socket file, or shared memory), or an unencrypted
            connection that supports password exchange using an RSA key
            pair. This security requirement does not apply to
            <code class="literal">mysql_native_passsword</code>, so the switch to
            <code class="literal">caching_sha2_password</code> may require
            additional configuration (see
            <a class="xref" href="caching-sha2-pluggable-authentication.html" title="6.4.1.2&nbsp;Caching SHA-2 Pluggable Authentication">Section&nbsp;6.4.1.2, &ldquo;Caching SHA-2 Pluggable Authentication&rdquo;</a>).
            However, client connections in MySQL 8.0 prefer use of
            TLS/SSL by default, so clients that already conform to that
            preference may need no additional configuration.
          </p></li><li class="listitem"><p>
            Clients and connectors that have not been updated to know
            about <code class="literal">caching_sha2_password</code>
            <span class="emphasis"><em>cannot</em></span> connect to accounts that
            authenticate with <code class="literal">caching_sha2_password</code>
            because they do not recognize this plugin as valid. (This is
            a particular instance of how client/server authentication
            plugin compatibility requirements apply, as discussed at
            <a class="xref" href="pluggable-authentication.html#pluggable-authentication-compatibility" title="Authentication Plugin Client/Server Compatibility">Authentication Plugin Client/Server Compatibility</a>.)
            To work around this issue, relink clients against
            <code class="literal">libmysqlclient</code> from MySQL 8.0 or higher,
            or obtain an updated connector that recognizes
            <code class="literal">caching_sha2_password</code>.
          </p></li><li class="listitem"><p>
            Because <code class="literal">caching_sha2_password</code> is also now
            the default authentication plugin in the
            <code class="literal">libmysqlclient</code> client library,
            authentication requires an extra round trip in the
            client/server protocol for connections from MySQL 8.0
            clients to accounts that use
            <code class="literal">mysql_native_password</code> (the previous
            default authentication plugin), unless the client program is
            invoked with a
            <a class="link" href="connection-options.html#option_general_default-auth"><code class="option">--default-auth=mysql_native_password</code></a>
            option.
          </p></li></ul></div><p>
        The <code class="literal">libmysqlclient</code> client library for pre-8.0
        MySQL versions is able to connect to MySQL 8.0 servers (except
        for accounts that authenticate with
        <code class="literal">caching_sha2_password</code>). That means pre-8.0
        clients based on <code class="literal">libmysqlclient</code> should also
        be able to connect. Examples:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Standard MySQL clients such as <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and
            <a class="link" href="mysqladmin.html" title="4.5.2&nbsp;mysqladmin &mdash; A MySQL Server Administration Program"><span class="command"><strong>mysqladmin</strong></span></a> are
            <code class="literal">libmysqlclient</code>-based.
          </p></li><li class="listitem"><p>
            The DBD::mysql driver for Perl DBI is
            <code class="literal">libmysqlclient</code>-based.
          </p></li><li class="listitem"><p>
            MySQL Connector/Python has a C Extension module that is
            <code class="literal">libmysqlclient</code>-based. To use it, include
            the <code class="literal">use_pure=False</code> option at connect
            time.
          </p></li></ul></div><p>
        When an existing MySQL 8.0 installation is upgraded to MySQL
        8.0.4 or higher, some older
        <code class="literal">libmysqlclient</code>-based clients may
        <span class="quote">&ldquo;<span class="quote">automatically</span>&rdquo;</span> upgrade if they are dynamically
        linked, because they use the new client library installed by the
        upgrade. For example, if the DBD::mysql driver for Perl DBI uses
        dynamic linking, it can use the
        <code class="literal">libmysqlclient</code> in place after an upgrade to
        MySQL 8.0.4 or higher, with this result:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Prior to the upgrade, DBI scripts that use DBD::mysql can
            connect to a MySQL 8.0 server, except for accounts that
            authenticate with <code class="literal">caching_sha2_password</code>.
          </p></li><li class="listitem"><p>
            After the upgrade, the same scripts become able to use
            <code class="literal">caching_sha2_password</code> accounts as well.
          </p></li></ul></div><p>
        However, the preceding results occur because
        <code class="literal">libmysqlclient</code> instances from MySQL 8.0
        installations prior to 8.0.4 are binary compatible: They both
        use a shared library major version number of 21. For clients
        linked to <code class="literal">libmysqlclient</code> from MySQL 5.7 or
        older, they link to a shared library with a different version
        number that is not binary compatible. In this case, the client
        must be recompiled against <code class="literal">libmysqlclient</code>
        from 8.0.4 or higher for full compatibility with MySQL 8.0
        servers and <code class="literal">caching_sha2_password</code> accounts.
      </p><p>
        MySQL Connector/J 5.1 through 8.0.8 is able to connect to MySQL 8.0 servers,
        except for accounts that authenticate with
        <code class="literal">caching_sha2_password</code>. (Connector/J 8.0.9 or higher
        is required to connect to
        <code class="literal">caching_sha2_password</code> accounts.)
      </p><p>
        Clients that use an implementation of the client/server protocol
        other than <code class="literal">libmysqlclient</code> may need to be
        upgraded to a newer version that understands the new
        authentication plugin. For example, in PHP, MySQL connectivity
        usually is based on <code class="literal">mysqlnd</code>, which currently
        does not know about <code class="literal">caching_sha2_password</code>.
        Until an updated version of <code class="literal">mysqlnd</code> is
        available, the way to enable PHP clients to connect to MySQL 8.0
        is to reconfigure the server to revert to
        <code class="literal">mysql_native_password</code> as the default
        authentication plugin, as previously discussed.
      </p><p>
        If a client or connector supports an option to explicitly
        specify a default authentication plugin, use it to name a plugin
        other than <code class="literal">caching_sha2_password</code>. Examples:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Some MySQL clients support a
            <a class="link" href="connection-options.html#option_general_default-auth"><code class="option">--default-auth</code></a> option.
            (Standard MySQL clients such as <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and
            <a class="link" href="mysqladmin.html" title="4.5.2&nbsp;mysqladmin &mdash; A MySQL Server Administration Program"><span class="command"><strong>mysqladmin</strong></span></a> support this option but can
            successfully connect to 8.0 servers without it. However,
            other clients may support a similar option. If so, it is
            worth trying it.)
          </p></li><li class="listitem"><p>
            Programs that use the <code class="literal">libmysqlclient</code> C
            API can call the
            <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/c-api-8.0-en/mysql-options.html" target="_top"><code class="literal">mysql_options()</code></a> function
            with the <code class="literal">MYSQL_DEFAULT_AUTH</code> option.
          </p></li><li class="listitem"><p>
            MySQL Connector/Python scripts that use the native Python implementation of
            the client/server protocol can specify the
            <code class="literal">auth_plugin</code> connection option.
            (Alternatively, use the Connector/Python C Extension, which is able to
            connect to MySQL 8.0 servers without the need for
            <code class="literal">auth_plugin</code>.)
          </p></li></ul></div><h5><a id="upgrade-caching-sha2-password-compatible-connectors"></a>caching_sha2_password-Compatible Clients and Connectors</h5><p>
        If a client or connector is available that has been updated to
        know about <code class="literal">caching_sha2_password</code>, using it is
        the best way to ensure compatibility when connecting to a MySQL
        8.0 server configured with
        <code class="literal">caching_sha2_password</code> as the default
        authentication plugin.
      </p><p>
        These clients and connectors have been upgraded to support
        <code class="literal">caching_sha2_password</code>:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The <code class="literal">libmysqlclient</code> client library in
            MySQL 8.0 (8.0.4 or higher). Standard MySQL clients such as
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and <a class="link" href="mysqladmin.html" title="4.5.2&nbsp;mysqladmin &mdash; A MySQL Server Administration Program"><span class="command"><strong>mysqladmin</strong></span></a>
            are <code class="literal">libmysqlclient</code>-based, so they are
            compatible as well.
          </p></li><li class="listitem"><p>
            The <code class="literal">libmysqlclient</code> client library in
            MySQL 5.7 (5.7.23 or higher). Standard MySQL clients such as
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and <a class="link" href="mysqladmin.html" title="4.5.2&nbsp;mysqladmin &mdash; A MySQL Server Administration Program"><span class="command"><strong>mysqladmin</strong></span></a>
            are <code class="literal">libmysqlclient</code>-based, so they are
            compatible as well.
          </p></li><li class="listitem"><p>
            MySQL Connector/C++ 1.1.11 or higher or 8.0.7 or higher.
          </p></li><li class="listitem"><p>
            MySQL Connector/J 8.0.9 or higher.
          </p></li><li class="listitem"><p>
            MySQL Connector/NET 8.0.10 or higher (through the classic MySQL
            protocol).
          </p></li><li class="listitem"><p>
            MySQL Connector/Node.js 8.0.9 or higher.
          </p></li><li class="listitem"><p>
            PHP: the X DevAPI PHP extension (mysql_xdevapi) supports
            <code class="literal">caching_sha2_password</code>.
          </p><p>
            PHP: the PDO_MySQL and ext/mysqli extensions do not support
            <code class="literal">caching_sha2_password</code>. In addition, when
            used with PHP versions before 7.1.16 and PHP 7.2 before
            7.2.4, they fail to connect with
            <code class="literal">default_authentication_plugin=caching_sha2_password</code>
            even if <code class="literal">caching_sha2_password</code> is not
            used.
          </p></li></ul></div><h5><a id="upgrade-caching-sha2-password-root-account"></a>caching_sha2_password and the root Administrative Account</h5><p>
        For upgrades to MySQL 8.0, the authentication plugin existing
        accounts remains unchanged, including the plugin for the
        <code class="literal">&#39;root&#39;@&#39;localhost&#39;</code> administrative account.
      </p><p>
        For new MySQL 8.0 installations, when you initialize the data
        directory (using the instructions at
        <a class="xref" href="data-directory-initialization.html" title="2.9.1&nbsp;Initializing the Data Directory">Section&nbsp;2.9.1, &ldquo;Initializing the Data Directory&rdquo;</a>), the
        <code class="literal">&#39;root&#39;@&#39;localhost&#39;</code> account is created, and
        that account uses <code class="literal">caching_sha2_password</code> by
        default. To connect to the server following data directory
        initialization, you must therefore use a client or connector
        that supports <code class="literal">caching_sha2_password</code>. If you
        can do this but prefer that the <code class="literal">root</code> account
        use <code class="literal">mysql_native_password</code> after installation,
        install MySQL and initialize the data directory as you normally
        would. Then connect to the server as <code class="literal">root</code> and
        use <a class="link" href="alter-user.html" title="13.7.1.1&nbsp;ALTER USER Statement"><code class="literal">ALTER USER</code></a> as follows to
        change the account authentication plugin and password:
      </p><pre class="programlisting">ALTER USER &#39;root&#39;@&#39;localhost&#39;
  IDENTIFIED WITH mysql_native_password
  BY &#39;<em class="replaceable"><code>password</code></em>&#39;;
</pre><p>
        If the client or connector that you use does not yet support
        <code class="literal">caching_sha2_password</code>, you can use a modified
        data directory-initialization procedure that associates the
        <code class="literal">root</code> account with
        <code class="literal">mysql_native_password</code> as soon as the account
        is created. To do so, use either of these techniques:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Supply a
            <a class="link" href="server-system-variables.html#sysvar_default_authentication_plugin"><code class="option">--default-authentication-plugin=mysql_native_password</code></a>
            option along with
            <a class="link" href="server-options.html#option_mysqld_initialize"><code class="option">--initialize</code></a> or
            <a class="link" href="server-options.html#option_mysqld_initialize-insecure"><code class="option">--initialize-insecure</code></a>.
          </p></li><li class="listitem"><p>
            Set
            <a class="link" href="server-system-variables.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
            to <code class="literal">mysql_native_password</code> in an option
            file, and name that option file using a
            <a class="link" href="server-options.html#option_mysqld_defaults-file"><code class="option">--defaults-file</code></a> option along
            with <a class="link" href="server-options.html#option_mysqld_initialize"><code class="option">--initialize</code></a> or
            <a class="link" href="server-options.html#option_mysqld_initialize-insecure"><code class="option">--initialize-insecure</code></a>. (In
            this case, if you continue to use that option file for
            subsequent server startups, new accounts are created with
            <code class="literal">mysql_native_password</code> rather than
            <code class="literal">caching_sha2_password</code> unless you remove
            the
            <a class="link" href="server-system-variables.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
            setting from the option file.)
          </p></li></ul></div><h5><a id="upgrade-caching-sha2-password-replication"></a>caching_sha2_password and Replication</h5><p>
        In replication scenarios for which all servers have been
        upgraded to MySQL 8.0.4 or higher, replica connections to source
        servers can use accounts that authenticate with
        <code class="literal">caching_sha2_password</code>. For such connections,
        the same requirement applies as for other clients that use
        accounts that authenticate with
        <code class="literal">caching_sha2_password</code>: Use a secure
        connection or RSA-based password exchange.
      </p><p>
        To connect to a <code class="literal">caching_sha2_password</code> account
        for source/replica replication:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Use any of the following <a class="link" href="change-master-to.html" title="13.4.2.1&nbsp;CHANGE MASTER TO Statement"><code class="literal">CHANGE MASTER
            TO</code></a> options:
          </p><pre class="programlisting">MASTER_SSL = 1
GET_MASTER_PUBLIC_KEY = 1
MASTER_PUBLIC_KEY_PATH=&#39;<em class="replaceable"><code>path to RSA public key file</code></em>&#39;
</pre></li><li class="listitem"><p>
            Alternatively, you can use the RSA public key-related
            options if the required keys are supplied at server startup.
          </p></li></ul></div><p>
        To connect to a <code class="literal">caching_sha2_password</code> account
        for Group Replication:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            For MySQL built using OpenSSL, set any of the following
            system variables:
          </p><pre class="programlisting">SET GLOBAL group_replication_recovery_use_ssl = ON;
SET GLOBAL group_replication_recovery_get_public_key = 1;
SET GLOBAL group_replication_recovery_public_key_path = &#39;<em class="replaceable"><code>path to RSA public key file</code></em>&#39;;
</pre></li><li class="listitem"><p>
            Alternatively, you can use the RSA public key-related
            options if the required keys are supplied at server startup.
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4487"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Configuration%20Changes"></a><h4 class="title"><a id="upgrade-configuration-changes"></a>Configuration Changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: A
            MySQL storage engine is now responsible for providing its
            own partitioning handler, and the MySQL server no longer
            provides generic partitioning support.
            <a class="link" href="innodb-storage-engine.html" title="Chapter&nbsp;15&nbsp;The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> and
            <code class="literal">NDB</code> are the only storage engines that
            provide a native partitioning handler that is supported in
            MySQL 8.0. A partitioned table using any other
            storage engine must be altered&mdash;either to convert it to
            <code class="literal">InnoDB</code> or <code class="literal">NDB</code>, or to
            remove its partitioning&mdash;<span class="emphasis"><em>before</em></span>
            upgrading the server, else it cannot be used afterwards.
          </p><p>
            For information about converting <code class="literal">MyISAM</code>
            tables to <code class="literal">InnoDB</code>, see
            <a class="xref" href="converting-tables-to-innodb.html" title="15.6.1.5&nbsp;Converting Tables from MyISAM to InnoDB">Section&nbsp;15.6.1.5, &ldquo;Converting Tables from MyISAM to InnoDB&rdquo;</a>.
          </p><p>
            A table creation statement that would result in a
            partitioned table using a storage engine without such
            support fails with an error
            (<span class="errorcode">ER_CHECK_NOT_IMPLEMENTED</span>) in MySQL
            8.0. If you import databases from a dump file
            created in MySQL 5.7 (or earlier) using
            <a class="link" href="mysqldump.html" title="4.5.4&nbsp;mysqldump &mdash; A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> into a MySQL 8.0
            server, you must make sure that any statements creating
            partitioned tables do not also specify an unsupported
            storage engine, either by removing any references to
            partitioning, or by specifying the storage engine as
            <code class="literal">InnoDB</code> or allowing it to be set as
            <code class="literal">InnoDB</code> by default.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
              The procedure given at
              <a class="xref" href="upgrade-prerequisites.html" title="2.10.5&nbsp;Preparing Your Installation for Upgrade">Section&nbsp;2.10.5, &ldquo;Preparing Your Installation for Upgrade&rdquo;</a>, describes how to
              identify partitioned tables that must be altered before
              upgrading to MySQL 8.0.
            </p></div><p>
            See
            <a class="xref" href="partitioning-limitations-storage-engines.html" title="24.6.2&nbsp;Partitioning Limitations Relating to Storage Engines">Section&nbsp;24.6.2, &ldquo;Partitioning Limitations Relating to Storage Engines&rdquo;</a>,
            for further information.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>:
            Several server error codes are not used and have been
            removed (for a list, see
            <a class="xref" href="mysql-nutshell.html#mysql-nutshell-removals" title="Features Removed in MySQL 8.0">Features Removed in MySQL 8.0</a>). Applications
            that test specifically for any of them should be updated.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Important change</strong></span>: The
            default character set has changed from
            <code class="literal">latin1</code> to <code class="literal">utf8mb4</code>.
            These system variables are affected:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The default value of the
                <a class="link" href="server-system-variables.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a>
                and
                <a class="link" href="server-system-variables.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a>
                system variables has changed from
                <code class="literal">latin1</code> to <code class="literal">utf8mb4</code>.
              </p></li><li class="listitem"><p>
                The default value of the
                <a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="literal">collation_server</code></a> and
                <a class="link" href="server-system-variables.html#sysvar_collation_database"><code class="literal">collation_database</code></a>
                system variables has changed from
                <code class="literal">latin1_swedish_ci</code> to
                <code class="literal">utf8mb4_0900_ai_ci</code>.
              </p></li></ul></div><p>
            As a result, the default character set and collation for new
            objects differ from previously unless an explicit character
            set and collation are specified. This includes databases and
            objects within them, such as tables, views, and stored
            programs. Assuming that the previous defaults were used, one
            way to preserve them is to start the server with these lines
            in the <code class="filename">my.cnf</code> file:
          </p><pre class="programlisting">[mysqld]
character_set_server=latin1
collation_server=latin1_swedish_ci
</pre><p>
            In a replicated setting, when upgrading from MySQL 5.7 to
            8.0, it is advisable to change the default character set
            back to the character set used in MySQL 5.7 before
            upgrading. After the upgrade is completed, the default
            character set can be changed to <code class="literal">utf8mb4</code>.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: As of
            MySQL 8.0.11, it is prohibited to start the server with a
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
            setting that is different from the setting used when the
            server was initialized. The restriction is necessary because
            collations used by various data dictionary table fields are
            based on the
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
            setting that was defined when the server was initialized,
            and restarting the server with a different setting would
            introduce inconsistencies with respect to how identifiers
            are ordered and compared.
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4488"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Server%20Changes"></a><h4 class="title"><a id="upgrade-server-changes"></a>Server Changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            In MySQL 8.0.11, several deprecated features related to
            account management have been removed, such as use of the
            <a class="link" href="grant.html" title="13.7.1.6&nbsp;GRANT Statement"><code class="literal">GRANT</code></a> statement to modify
            nonprivilege characteristics of user accounts, the
            <code class="literal">NO_AUTO_CREATE_USER</code> SQL mode, the
            <code class="literal">PASSWORD()</code> function, and the
            <code class="option">old_passwords</code> system variable.
          </p><p>
            Replication from MySQL 5.7 to 8.0 of statements that refer
            to these removed features can cause replication failure.
            Applications that use any of the removed features should be
            revised to avoid them and use alternatives when possible, as
            described in <a class="xref" href="mysql-nutshell.html#mysql-nutshell-removals" title="Features Removed in MySQL 8.0">Features Removed in MySQL 8.0</a>.
          </p><p>
            To avoid a startup failure on MySQL 8.0, remove any instance
            of <code class="literal">NO_AUTO_CREATE_USER</code> from
            <a class="link" href="server-system-variables.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> system variable
            settings in MySQL option files.
          </p><p>
            Loading a dump file that includes the
            <code class="literal">NO_AUTO_CREATE_USER</code> SQL mode in stored
            program definitions into a MySQL 8.0 server causes a
            failure. As of MySQL 5.7.24 and MySQL 8.0.13,
            <a class="link" href="mysqldump.html" title="4.5.4&nbsp;mysqldump &mdash; A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> removes
            <code class="literal">NO_AUTO_CREATE_USER</code> from stored program
            definitions. Dump files created with an earlier version of
            <code class="literal">mysqldump</code> must be modified manually to
            remove instances of <code class="literal">NO_AUTO_CREATE_USER</code>.
          </p></li><li class="listitem"><p>
            In MySQL 8.0.11, these deprecated compatibility SQL modes
            were removed: <code class="literal">DB2</code>,
            <code class="literal">MAXDB</code>, <code class="literal">MSSQL</code>,
            <code class="literal">MYSQL323</code>, <code class="literal">MYSQL40</code>,
            <code class="literal">ORACLE</code>, <code class="literal">POSTGRESQL</code>,
            <code class="literal">NO_FIELD_OPTIONS</code>,
            <code class="literal">NO_KEY_OPTIONS</code>,
            <code class="literal">NO_TABLE_OPTIONS</code>. They can no longer be
            assigned to the <code class="literal">sql_mode</code> system variable
            or used as permitted values for the
            <a class="link" href="mysqldump.html" title="4.5.4&nbsp;mysqldump &mdash; A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>
            <a class="link" href="mysqldump.html#option_mysqldump_compatible"><code class="option">--compatible</code></a> option.
          </p><p>
            Removal of <code class="literal">MAXDB</code> means that the
            <code class="literal">TIMESTAMP</code> data type for
            <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a> or
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a> is no longer
            treated as <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>.
          </p><p>
            Replication from MySQL 5.7 to 8.0 of statements that refer
            to the removed SQL modes can cause replication failure. This
            includes replication of <code class="literal">CREATE</code> statements
            for stored programs (stored procedures and functions,
            triggers, and events) that are executed while the current
            <a class="link" href="server-system-variables.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> value includes any
            of the removed modes. Applications that use any of the
            removed modes should be revised to avoid them.
          </p></li><li class="listitem"><p>
            As of MySQL 8.0.3, spatial data types permit an
            <code class="literal">SRID</code> attribute, to explicitly indicate
            the spatial reference system (SRS) for values stored in the
            column. See <a class="xref" href="spatial-type-overview.html" title="11.4.1&nbsp;Spatial Data Types">Section&nbsp;11.4.1, &ldquo;Spatial Data Types&rdquo;</a>.
          </p><p>
            A spatial column with an explicit <code class="literal">SRID</code>
            attribute is SRID-restricted: The column takes only values
            with that ID, and <code class="literal">SPATIAL</code> indexes on the
            column become subject to use by the optimizer. The optimizer
            ignores <code class="literal">SPATIAL</code> indexes on spatial
            columns with no <code class="literal">SRID</code> attribute. See
            <a class="xref" href="spatial-index-optimization.html" title="8.3.3&nbsp;SPATIAL Index Optimization">Section&nbsp;8.3.3, &ldquo;SPATIAL Index Optimization&rdquo;</a>. If you want
            the optimizer to consider <code class="literal">SPATIAL</code> indexes
            on spatial columns that are not SRID-restricted, each such
            column should be modified:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Verify that all values within the column have the same
                SRID. To determine the SRIDs contained in a geometry
                column <em class="replaceable"><code>col_name</code></em>, use the
                following query:
              </p><pre class="programlisting">SELECT DISTINCT ST_SRID(<em class="replaceable"><code>col_name</code></em>) FROM <em class="replaceable"><code>tbl_name</code></em>;
</pre><p>
                If the query returns more than one row, the column
                contains a mix of SRIDs. In that case, modify its
                contents so all values have the same SRID.
              </p></li><li class="listitem"><p>
                Redefine the column to have an explicit
                <code class="literal">SRID</code> attribute.
              </p></li><li class="listitem"><p>
                Recreate the <code class="literal">SPATIAL</code> index.
              </p></li></ul></div></li><li class="listitem"><p>
            Several spatial functions were removed in MySQL 8.0.0 due to
            a spatial function namespace change that implemented an
            <code class="literal">ST_</code> prefix for functions that perform an
            exact operation, or an <code class="literal">MBR</code> prefix for
            functions that perform an operation based on minimum
            bounding rectangles. The use of removed spatial functions in
            generated column definitions could cause an upgrade failure.
            Before upgrading, run <a class="link" href="mysqlcheck.html" title="4.5.3&nbsp;mysqlcheck &mdash; A Table Maintenance Program"><span class="command"><strong>mysqlcheck
            --check-upgrade</strong></span></a> for removed spatial functions and
            replace any that you find with their <code class="literal">ST_</code>
            or <code class="literal">MBR</code> named replacements. For a list of
            removed spatial functions, refer to
            <a class="xref" href="mysql-nutshell.html#mysql-nutshell-removals" title="Features Removed in MySQL 8.0">Features Removed in MySQL 8.0</a>.
          </p></li><li class="listitem"><p>
            The <a class="link" href="privileges-provided.html#priv_backup-admin"><code class="literal">BACKUP_ADMIN</code></a> privilege is
            automatically granted to users with the
            <a class="link" href="privileges-provided.html#priv_reload"><code class="literal">RELOAD</code></a> privilege when
            performing an in-place upgrade to MySQL 8.0.3 or higher.
          </p></li><li class="listitem"><p>
            From MySQL 8.0.13, because of differences between row-based
            or mixed replication mode and statement-based replication
            mode in the way that temporary tables are handled, there are
            new restrictions on switching the binary logging format at
            runtime.

            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">SET @@SESSION.binlog_format</code> cannot
                  be used if the session has any open temporary tables.
                </p></li><li class="listitem"><p>
                  <code class="literal">SET @@global.binlog_format</code> and
                  <code class="literal">SET @@persist.binlog_format</code> cannot
                  be used if any replication channel has any open
                  temporary tables. <code class="literal">SET
                  @@persist_only.binlog_format</code> is allowed if
                  replication channels have open temporary tables,
                  because unlike <code class="literal">PERSIST</code>,
                  <code class="literal">PERSIST_ONLY</code> does not modify the
                  runtime global system variable value.
                </p></li><li class="listitem"><p>
                  <code class="literal">SET @@global.binlog_format</code> and
                  <code class="literal">SET @@persist.binlog_format</code> cannot
                  be used if any replication channel applier is running.
                  This is because the change only takes effect on a
                  replication channel when its applier is restarted, at
                  which time the replication channel might have open
                  temporary tables. This behavior is more restrictive
                  than before. <code class="literal">SET
                  @@persist_only.binlog_format</code> is allowed if
                  any replication channel applier is running.
                </p></li><li class="listitem"><p>
                  From MySQL 8.0.27, configuring a session setting for
                  <a class="link" href="server-system-variables.html#sysvar_internal_tmp_mem_storage_engine"><code class="literal">internal_tmp_mem_storage_engine</code></a>
                  requires the
                  <a class="link" href="privileges-provided.html#priv_session-variables-admin"><code class="literal">SESSION_VARIABLES_ADMIN</code></a>
                  or
                  <a class="link" href="privileges-provided.html#priv_system-variables-admin"><code class="literal">SYSTEM_VARIABLES_ADMIN</code></a>
                  privilege.
                </p></li><li class="listitem"><p>
                  As of MySQL 8.0.27, the clone plugin permits
                  concurrent DDL operations on the donor MySQL Server
                  instance while a cloning operation is in progress.
                  Previously, a backup lock was held during the cloning
                  operation, preventing concurrent DDL on the donor. To
                  revert to the previous behavior of blocking concurrent
                  DDL on the donor during a clone operation, enable the
                  <a class="link" href="clone-plugin-options-variables.html#sysvar_clone_block_ddl"><code class="literal">clone_block_ddl</code></a>
                  variable. See
                  <a class="xref" href="clone-plugin-concurrent-ddl.html" title="5.6.7.4&nbsp;Cloning and Concurrent DDL">Section&nbsp;5.6.7.4, &ldquo;Cloning and Concurrent DDL&rdquo;</a>.
                </p></li></ul></div><p>
          </p></li><li class="listitem"><p>
            From MySQL 8.0.30, error log components listed in the
            <a class="link" href="server-system-variables.html#sysvar_log_error_services"><code class="literal">log_error_services</code></a> value at
            startup are loaded implicitly early in the MySQL Server
            startup sequence. If you have previously installed loadable
            error log components using <a class="link" href="install-component.html" title="13.7.4.3&nbsp;INSTALL COMPONENT Statement"><code class="literal">INSTALL
            COMPONENT</code></a> and you list those components in a
            <a class="link" href="server-system-variables.html#sysvar_log_error_services"><code class="literal">log_error_services</code></a> setting
            that is read at startup (from an option file, for example),
            your configuration should be updated to avoid startup
            warnings. For more information, see
            <a class="xref" href="error-log-configuration.html#error-log-configuration-methods" title="Error Log Configuration Methods">Error Log Configuration Methods</a>.
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4489"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/InnoDB%20Changes"></a><h4 class="title"><a id="upgrade-innodb-changes"></a>InnoDB Changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="information-schema.html" title="Chapter&nbsp;26&nbsp;INFORMATION_SCHEMA Tables"><code class="literal">INFORMATION_SCHEMA</code></a> views based
            on <code class="literal">InnoDB</code> system tables were replaced by
            internal system views on data dictionary tables. Affected
            <code class="literal">InnoDB</code>
            <a class="link" href="information-schema.html" title="Chapter&nbsp;26&nbsp;INFORMATION_SCHEMA Tables"><code class="literal">INFORMATION_SCHEMA</code></a> views were
            renamed:
          </p><div class="table"><a id="innodb-new-is-views-upgrade"></a><p class="title"><strong>Table&nbsp;2.16&nbsp;Renamed InnoDB Information Schema Views</strong></p><div class="table-contents"><table summary="InnoDB Information Schema views that were renamed in MySQL 8.0."><colgroup><col style="width: 50%"/><col style="width: 50%"/></colgroup><thead><tr>
                <th>Old Name</th>
                <th>New Name</th>
              </tr></thead><tbody><tr>
                <td><code class="literal">INNODB_SYS_COLUMNS</code></td>
                <td><code class="literal">INNODB_COLUMNS</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_DATAFILES</code></td>
                <td><code class="literal">INNODB_DATAFILES</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_FIELDS</code></td>
                <td><code class="literal">INNODB_FIELDS</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_FOREIGN</code></td>
                <td><code class="literal">INNODB_FOREIGN</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_FOREIGN_COLS</code></td>
                <td><code class="literal">INNODB_FOREIGN_COLS</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_INDEXES</code></td>
                <td><code class="literal">INNODB_INDEXES</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_TABLES</code></td>
                <td><code class="literal">INNODB_TABLES</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_TABLESPACES</code></td>
                <td><code class="literal">INNODB_TABLESPACES</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_TABLESTATS</code></td>
                <td><code class="literal">INNODB_TABLESTATS</code></td>
              </tr><tr>
                <td><code class="literal">INNODB_SYS_VIRTUAL</code></td>
                <td><code class="literal">INNODB_VIRTUAL</code></td>
              </tr></tbody></table></div></div><br class="table-break"/><p>
            After upgrading to MySQL 8.0.3 or higher, update any scripts
            that reference previous <code class="literal">InnoDB</code>
            <a class="link" href="information-schema.html" title="Chapter&nbsp;26&nbsp;INFORMATION_SCHEMA Tables"><code class="literal">INFORMATION_SCHEMA</code></a> view names.
          </p></li><li class="listitem"><p>
            The <a class="ulink" href="http://www.zlib.net/" target="_top">zlib library</a>
            version bundled with MySQL was raised from version 1.2.3 to
            version 1.2.11.
          </p><p>
            The zlib <code class="literal">compressBound()</code> function in zlib
            1.2.11 returns a slightly higher estimate of the buffer size
            required to compress a given length of bytes than it did in
            zlib version 1.2.3. The <code class="literal">compressBound()</code>
            function is called by <code class="literal">InnoDB</code> functions
            that determine the maximum row size permitted when creating
            compressed <code class="literal">InnoDB</code> tables or inserting and
            updating rows in compressed <code class="literal">InnoDB</code>
            tables. As a result,
            <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE
            ... ROW_FORMAT=COMPRESSED</code></a>,
            <a class="link" href="insert.html" title="13.2.7&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>, and
            <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> operations with row
            sizes very close to the maximum row size that were
            successful in earlier releases could now fail. To avoid this
            issue, test <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a>
            statements for compressed <code class="literal">InnoDB</code> tables
            with large rows on a MySQL 8.0 test instance prior to
            upgrading.
          </p></li><li class="listitem"><p>
            With the introduction of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">--innodb-directories</code></a>
            feature, the location of file-per-table and general
            tablespace files created with an absolute path or in a
            location outside of the data directory should be added to
            the <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a>
            argument value. Otherwise, <code class="literal">InnoDB</code> is not
            able to locate these files during recovery. To view
            tablespace file locations, query the Information Schema
            <a class="link" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table:
          </p><pre class="programlisting">SELECT TABLESPACE_NAME, FILE_NAME FROM INFORMATION_SCHEMA.FILES \G
</pre></li><li class="listitem"><p>
            Undo logs can no longer reside in the system tablespace. In
            MySQL 8.0, undo logs reside in two undo
            tablespaces by default. For more information, see
            <a class="xref" href="innodb-undo-tablespaces.html" title="15.6.3.4&nbsp;Undo Tablespaces">Section&nbsp;15.6.3.4, &ldquo;Undo Tablespaces&rdquo;</a>.
          </p><p>
            When upgrading from MySQL 5.7 to MySQL
            8.0, any undo tablespaces that exist in the
            MySQL 5.7 instance are removed and replaced by two new
            default undo tablespaces. Default undo tablespaces are
            created in the location defined by the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_directory"><code class="literal">innodb_undo_directory</code></a>
            variable. If the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_directory"><code class="literal">innodb_undo_directory</code></a>
            variable is undefined, undo tablespaces are created in the
            data directory. Upgrade from MySQL 5.7 to MySQL 8.0 requires
            a slow shutdown which ensures that undo tablespaces in the
            MySQL 5.7 instance are empty, permitting them to be removed
            safely.
          </p><p>
            When upgrading to MySQL 8.0.14 or later from an earlier
            MySQL 8.0 release, undo tablespaces that exist in the
            pre-upgrade instance as a result of an
            <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_tablespaces"><code class="literal">innodb_undo_tablespaces</code></a>
            setting greater than 2 are treated as user-defined undo
            tablespaces, which can be deactivated and dropped using
            <a class="link" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement"><code class="literal">ALTER UNDO
            TABLESPACE</code></a> and
            <a class="link" href="drop-tablespace.html" title="13.1.33&nbsp;DROP TABLESPACE Statement"><code class="literal">DROP UNDO
            TABLESPACE</code></a> syntax, respectively, after upgrading.
            Upgrade within the MySQL 8.0 release series may not always
            require a slow shutdown which means that existing undo
            tablespaces could contain undo logs. Therefore, existing
            undo tablespaces are not removed by the upgrade process.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: As of
            MySQL 8.0.17, the
            <a class="link" href="create-tablespace.html" title="13.1.21&nbsp;CREATE TABLESPACE Statement"><code class="literal">CREATE
            TABLESPACE ... ADD DATAFILE</code></a> clause does not permit
            circular directory references. For example, the circular
            directory reference (<code class="literal">/../</code>) in the
            following statement is not permitted:
          </p><pre class="programlisting">CREATE TABLESPACE ts1 ADD DATAFILE ts1.ibd &#39;<em class="replaceable"><code>any_directory</code></em>/../ts1.ibd&#39;;
</pre><p>
            An exception to the restriction exists on Linux, where a
            circular directory reference is permitted if the preceding
            directory is a symbolic link. For example, the data file
            path in the example above is permitted if
            <em class="replaceable"><code>any_directory</code></em> is a symbolic link.
            (It is still permitted for data file paths to begin with
            &#39;<code class="literal">../</code>&#39;.)
          </p><p>
            To avoid upgrade issues, remove any circular directory
            references from tablespace data file paths before upgrading
            to MySQL 8.0.17 or higher. To inspect tablespace paths,
            query the Information Schema
            <a class="link" href="information-schema-innodb-datafiles-table.html" title="26.4.10&nbsp;The INFORMATION_SCHEMA INNODB_DATAFILES Table"><code class="literal">INNODB_DATAFILES</code></a> table.
          </p></li><li class="listitem"><p>
            Due to a regression introduced in MySQL 8.0.14, in-place
            upgrade on a case-sensitive file system from MySQL 5.7 or a
            MySQL 8.0 release prior to MySQL 8.0.14 to MySQL 8.0.16
            failed for instances with partitioned tables and
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=1</code></a>.
            The failure was caused by a case mismatch issue related to
            partitioned table file names. The fix that introduced the
            regression was reverted, which permits upgrades to MySQL
            8.0.17 from MySQL 5.7 or MySQL 8.0 releases prior to MySQL
            8.0.14 to function as normal. However, the regression is
            still present in the MySQL 8.0.14, 8.0.15, and 8.0.16
            releases.
          </p><p>
            In-place upgrade on a case-sensitive file system from MySQL
            8.0.14, 8.0.15, or 8.0.16 to MySQL 8.0.17 fails with the
            following error when starting the server after upgrading
            binaries or packages to MySQL 8.0.17 if partitioned tables
            are present and
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=1</code></a>:
          </p><pre class="programlisting">Upgrading from server version <em class="replaceable"><code>version_number</code></em> with
partitioned tables and lower_case_table_names == 1 on a case sensitive file
system may cause issues, and is therefore prohibited. To upgrade anyway, restart
the new server version with the command line option &#39;upgrade=FORCE&#39;. When
upgrade is completed, please execute &#39;RENAME TABLE <em class="replaceable"><code>part_table_name</code></em>
TO <em class="replaceable"><code>new_table_name</code></em>; RENAME TABLE <em class="replaceable"><code>new_table_name</code></em>
TO <em class="replaceable"><code>part_table_name</code></em>;&#39; for each of the partitioned tables.
Please see the documentation for further information.
</pre><p>
            If you encounter this error when upgrading to MySQL 8.0.17,
            perform the following workaround:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                Restart the server with
                <a class="link" href="server-options.html#option_mysqld_upgrade"><code class="option">--upgrade=force</code></a> to force
                the upgrade operation to proceed.
              </p></li><li class="listitem"><p>
                Identify partitioned table file names with lowercase
                partition name delimiters <code class="literal">(#p#</code> or
                <code class="literal">#sp#</code>):
              </p><pre class="programlisting">mysql&gt; SELECT FILE_NAME FROM INFORMATION_SCHEMA.FILES WHERE FILE_NAME LIKE &#39;%#p#%&#39; OR FILE_NAME LIKE &#39;%#sp#%&#39;;</pre></li><li class="listitem"><p>
                For each file identified, rename the associated table
                using a temporary name, then rename the table back to
                its original name.
              </p><pre class="programlisting">mysql&gt; RENAME TABLE <em class="replaceable"><code>table_name</code></em> TO <em class="replaceable"><code>temporary_table_name</code></em>;
mysql&gt; RENAME TABLE <em class="replaceable"><code>temporary_table_name</code></em> TO <em class="replaceable"><code>table_name</code></em>;
</pre></li><li class="listitem"><p>
                Verify that there are no partitioned table file names
                lowercase partition name delimiters (an empty result set
                should be returned).
              </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FILE_NAME FROM INFORMATION_SCHEMA.FILES WHERE FILE_NAME LIKE &#39;%#p#%&#39; OR FILE_NAME LIKE &#39;%#sp#%&#39;;</code></strong>
Empty set (0.00 sec)
</pre></li><li class="listitem"><p>
                Run <a class="link" href="analyze-table.html" title="13.7.3.1&nbsp;ANALYZE TABLE Statement"><code class="literal">ANALYZE TABLE</code></a> on each
                renamed table to update the optimizer statistics in the
                <code class="literal">mysql.innodb_index_stats</code> and
                <code class="literal">mysql.innodb_table_stats</code> tables.
              </p></li></ol></div><p>
            Because of the regression still present in the MySQL 8.0.14,
            8.0.15, and 8.0.16 releases, importing partitioned tables
            from MySQL 8.0.14, 8.0.15, or 8.0.16 to MySQL 8.0.17 is not
            supported on case-sensitive file systems where
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names=1</code></a>.
            Attempting to do so results in a <span class="quote">&ldquo;<span class="quote">Tablespace is
            missing for table</span>&rdquo;</span> error.
          </p></li><li class="listitem"><p>
            MySQL uses delimiter strings when constructing tablespace
            names and file names for table partitions. A <span class="quote">&ldquo;<span class="quote">
            <code class="literal">#p#</code> </span>&rdquo;</span> delimiter string precedes
            partition names, and an <span class="quote">&ldquo;<span class="quote"> <code class="literal">#sp#</code>
            </span>&rdquo;</span> delimiter string precedes subpartition names, as
            shown:
          </p><pre class="programlisting">      <em class="replaceable"><code>schema_name</code></em>.<em class="replaceable"><code>table_name</code></em>#p#<em class="replaceable"><code>partition_name</code></em>#sp#<em class="replaceable"><code>subpartition_name</code></em>
      <em class="replaceable"><code>table_name</code></em>#p#<em class="replaceable"><code>partition_name</code></em>#sp#<em class="replaceable"><code>subpartition_name</code></em>.ibd
</pre><p>
            Historically, delimiter strings have been uppercase
            (<code class="literal">#P#</code> and <code class="literal">#SP#</code>) on
            case-sensitive file systems such as Linux, and lowercase
            (<code class="literal">#p#</code> and <code class="literal">#sp#</code>) on
            case-insensitive file systems such as Windows. As of MySQL
            8.0.19, delimiter strings are lowercase on all file systems.
            This change prevents issues when migrating data directories
            between case-sensitive and case-insensitive file systems.
            Uppercase delimiter strings are no longer used.
          </p><p>
            Additionally, partition tablespace names and file names
            generated based on user-specified partition or subpartition
            names, which can be specified in uppercase or lowercase, are
            now generated (and stored internally) in lowercase
            regardless of the
            <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
            setting to ensure case-insensitivity. For example, if a
            table partition is created with the name
            <code class="literal">PART_1</code>, the tablespace name and file name
            are generated in lowercase:
          </p><pre class="programlisting">      <em class="replaceable"><code>schema_name</code></em>.<em class="replaceable"><code>table_name</code></em>#p#<em class="replaceable"><code>part_1</code></em>
      <em class="replaceable"><code>table_name</code></em>#p#<em class="replaceable"><code>part_1</code></em>.ibd
</pre><p>
            During upgrade, MySQL checks and modifies if necessary:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Partition file names on disk and in the data dictionary
                to ensure lowercase delimiters and partition names.
              </p></li><li class="listitem"><p>
                Partition metadata in the data dictionary for related
                issues introduced by previous bug fixes.
              </p></li><li class="listitem"><p>
                <code class="literal">InnoDB</code> statistics data for related
                issues introduced by previous bug fixes.
              </p></li></ul></div><p>
            During tablespace import operations, partition tablespace
            file names on disk are checked and modified if necessary to
            ensure lowercase delimiters and partition names.
          </p></li><li class="listitem"><p>
            As of MySQL 8.0.21, a warning is written to the error log at
            startup or when upgrading from MySQL 5.7 if
            tablespace data files are found to reside in unknown
            directories. Known directories are those defined by the
            <a class="link" href="server-system-variables.html#sysvar_datadir"><code class="literal">datadir</code></a>,
            <a class="link" href="innodb-parameters.html#sysvar_innodb_data_home_dir"><code class="literal">innodb_data_home_dir</code></a>, and
            <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a>
            variables. To make a directory known, add it to the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a> setting.
            Making directories known ensures that data files can be
            found during recovery. For more information, see
            <a class="xref" href="innodb-recovery.html#innodb-recovery-tablespace-discovery" title="Tablespace Discovery During Crash Recovery">Tablespace Discovery During Crash Recovery</a>.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Important change</strong></span>: From
            MySQL 8.0.30, the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_redo_log_capacity"><code class="literal">innodb_redo_log_capacity</code></a>
            variable controls the amount of disk space occupied by redo
            log files. With this change, the default number of redo log
            files and their location has also changed. From MySQL
            8.0.30, <code class="literal">InnoDB</code> maintains 32 redo log
            files in the <code class="filename">#innodb_redo</code> directory in
            the data directory. Previously, <code class="literal">InnoDB</code>
            created two redo log files in the data directory by default,
            and the number and size of redo log files were controlled by
            the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_log_files_in_group"><code class="literal">innodb_log_files_in_group</code></a>
            and <a class="link" href="innodb-parameters.html#sysvar_innodb_log_file_size"><code class="literal">innodb_log_file_size</code></a>
            variables. These two variables are now deprecated.
          </p><p>
            When the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_redo_log_capacity"><code class="literal">innodb_redo_log_capacity</code></a>
            setting is defined,
            <a class="link" href="innodb-parameters.html#sysvar_innodb_log_files_in_group"><code class="literal">innodb_log_files_in_group</code></a>
            and <a class="link" href="innodb-parameters.html#sysvar_innodb_log_file_size"><code class="literal">innodb_log_file_size</code></a>
            settings are ignored; otherwise, those settings are used to
            compute the <code class="literal">innodb_redo_log_capacity</code>
            setting (<code class="literal">innodb_log_files_in_group</code> *
            <code class="literal">innodb_log_file_size</code> =
            <code class="literal">innodb_redo_log_capacity</code>). If none of
            those variables are set, redo log capacity is set to the
            <code class="literal">innodb_redo_log_capacity</code> default value,
            which is 104857600 bytes (100MB).
          </p><p>
            As is generally required for any upgrade, this change
            requires a clean shutdown before upgrading.
          </p><p>
            For more information about this feature, see
            <a class="xref" href="innodb-redo-log.html" title="15.6.5&nbsp;Redo Log">Section&nbsp;15.6.5, &ldquo;Redo Log&rdquo;</a>.
          </p></li><li class="listitem"><p>
            Before MySQL 5.7.35, there was no size limitation for
            indexes in tables with redundant or compact row format. As
            of MySQL 5.7.35, the limit is 767 bytes. An upgrade from a
            MySQL version before 5.7.35 to MySQL 8.0 can produce
            inaccessible tables. If a table with redundant or compact
            row format has an index larger than 767 bytes, drop the
            index and re-create it before an upgrade to MySQL 8.0. The
            error message is:
          </p><pre class="programlisting">mysql&gt; ERROR 1709 (HY000): Index column size too large. The maximum column size is 767 bytes.
</pre></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4490"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/SQL%20Changes"></a><h4 class="title"><a id="upgrade-sql-changes"></a>SQL Changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: As of
            MySQL 8.0.13, the deprecated <code class="literal">ASC</code> or
            <code class="literal">DESC</code> qualifiers for <code class="literal">GROUP
            BY</code> clauses have been removed. Queries that
            previously relied on <code class="literal">GROUP BY</code> sorting may
            produce results that differ from previous MySQL versions. To
            produce a given sort order, provide an <code class="literal">ORDER
            BY</code> clause.
          </p><p>
            Queries and stored program definitions from MySQL 8.0.12 or
            lower that use <code class="literal">ASC</code> or
            <code class="literal">DESC</code> qualifiers for <code class="literal">GROUP
            BY</code> clauses should be amended. Otherwise, upgrading
            to MySQL 8.0.13 or higher may fail, as may replicating to
            MySQL 8.0.13 or higher replica servers.
          </p></li><li class="listitem"><p>
            Some keywords may be reserved in MySQL 8.0 that
            were not reserved in MySQL 5.7. See
            <a class="xref" href="keywords.html" title="9.3&nbsp;Keywords and Reserved Words">Section&nbsp;9.3, &ldquo;Keywords and Reserved Words&rdquo;</a>. This can cause words previously
            used as identifiers to become illegal. To fix affected
            statements, use identifier quoting. See
            <a class="xref" href="identifiers.html" title="9.2&nbsp;Schema Object Names">Section&nbsp;9.2, &ldquo;Schema Object Names&rdquo;</a>.
          </p></li><li class="listitem"><p>
            After upgrading, it is recommended that you test optimizer
            hints specified in application code to ensure that the hints
            are still required to achieve the desired optimization
            strategy. Optimizer enhancements can sometimes render
            certain optimizer hints unnecessary. In some cases, an
            unnecessary optimizer hint may even be counterproductive.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: In
            MySQL 5.7, specifying a <code class="literal">FOREIGN KEY</code>
            definition for an <code class="literal">InnoDB</code> table without a
            <code class="literal">CONSTRAINT <em class="replaceable"><code>symbol</code></em>
            </code> clause, or specifying the
            <code class="literal">CONSTRAINT</code> keyword without a
            <code class="literal">symbol</code>, causes <code class="literal">InnoDB</code>
            to use a generated constraint name. That behavior changed in
            MySQL 8.0, with <code class="literal">InnoDB</code> using the
            <code class="literal">FOREIGN KEY <em class="replaceable"><code>index_name</code></em>
            </code> value instead of a generated name. Because
            constraint names must be unique per schema (database), the
            change caused errors due to foreign key index names that
            were not unique per schema. To avoid such errors, the new
            constraint naming behavior has been reverted in MySQL
            8.0.16, and <code class="literal">InnoDB</code> once again uses a
            generated constraint name.
          </p><p>
            For consistency with <code class="literal">InnoDB</code>,
            <code class="literal">NDB</code> releases based on MySQL 8.0.16 or
            higher use a generated constraint name if the
            <code class="literal">CONSTRAINT <em class="replaceable"><code>symbol</code></em>
            </code> clause is not specified, or the
            <code class="literal">CONSTRAINT</code> keyword is specified without a
            <code class="literal">symbol</code>. <code class="literal">NDB</code> releases
            based on MySQL 5.7 and earlier MySQL 8.0 releases used the
            <code class="literal">FOREIGN KEY <em class="replaceable"><code>index_name</code></em>
            </code> value.
          </p><p>
            The changes described above may introduce incompatibilities
            for applications that depend on the previous foreign key
            constraint naming behavior.
          </p></li><li class="listitem"><p>
            The handling of system variable values by MySQL flow control
            functions such as <a class="link" href="flow-control-functions.html#function_ifnull"><code class="literal">IFNULL()</code></a>
            and <a class="link" href="flow-control-functions.html#operator_case"><code class="literal">CASE()</code></a> changed in MySQL
            8.0.22; system variable values are now handled as column
            values of the same character and collation, rather than as
            constants. Some queries using these functions with system
            variables that were previously successful may subsequently
            be rejected with <span class="errortext">Illegal mix of
            collations</span>. In such cases, cast the system
            variable to the correct character set and collation.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span>: MySQL
            8.0.28 fixes an issue in previous MySQL 8.0 releases whereby
            the <a class="link" href="cast-functions.html#function_convert"><code class="literal">CONVERT()</code></a> function
            sometimes allowed invalid casts of
            <a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> values to nonbinary
            character sets. Applications which may have relied on this
            behavior should be checked and if necessary modified prior
            to upgrade.
          </p><p>
            In particular, where <code class="literal">CONVERT()</code> was used
            as part of an expression for an indexed generated column,
            the change in the function&#39;s behavior may result in
            index corruption following an upgrade to MySQL 8.0.28. You
            can prevent this from happening by following these steps:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                Prior to performing the upgrade, correct any invalid
                input data.
              </p></li><li class="listitem"><p>
                Drop and then re-create the index.
              </p><p>
                You can also force a table rebuild using
                <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE
                <em class="replaceable"><code>table</code></em> FORCE</code></a>,
                instead.
              </p></li><li class="listitem"><p>
                Upgrade the MySQL software.
              </p></li></ol></div><p>
            If you cannot validate the input data beforehand, you should
            not re-create the index or rebuild the table until after you
            perform the upgrade to MySQL 8.0.28.
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-4491"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Changed%20Server%20Defaults"></a><h4 class="title"><a id="upgrade-server-defaults"></a>Changed Server Defaults</h4></div></div></div><p>
        MySQL 8.0 comes with improved defaults, aiming at the best out
        of the box experience possible. These changes are driven by the
        fact that technology is advancing (machines have more CPUS, use
        SSDs and so on), more data is being stored, MySQL is evolving
        (InnoDB, Group Replication, AdminAPI), and so on. The
        following table summarizes the defaults which have been changed
        to provide the best MySQL experience for the majority of users.
      </p><div class="informaltable"><table summary="Summary of which MySQL Server defaults changed in this release."><colgroup><col style="width: 33%"/><col style="width: 33%"/><col style="width: 33%"/></colgroup><thead><tr>
            <th>Option/Parameter</th>
            <th>Old Default</th>
            <th>New Default</th>
          </tr></thead><tbody><tr>
            <td><span class="emphasis"><em>Server changes</em></span></td>
            <td></td>
            <td></td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a></td>
            <td>latin1</td>
            <td>utf8mb4</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="literal">collation_server</code></a></td>
            <td>latin1_swedish_ci</td>
            <td>utf8mb4_0900_ai_ci</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_optimizer_trace_max_mem_size"><code class="literal">optimizer_trace_max_mem_size</code></a></td>
            <td>16KB</td>
            <td>1MB</td>
          </tr><tr>
            <td><a class="link" href="validate-password-options-variables.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_back_log"><code class="literal">back_log</code></a></td>
            <td>-1 (autosize) changed from : back_log = 50 + (max_connections / 5)</td>
            <td>-1 (autosize) changed to : back_log = max_connections</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a></td>
            <td>4194304 (4MB)</td>
            <td>67108864 (64MB)</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a></td>
            <td>64</td>
            <td>1024</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_event_scheduler"><code class="literal">event_scheduler</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_table_open_cache"><code class="literal">table_open_cache</code></a></td>
            <td>2000</td>
            <td>4000</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_log_error_verbosity"><code class="literal">log_error_verbosity</code></a></td>
            <td>3 (Notes)</td>
            <td>2 (Warning)</td>
          </tr><tr>
            <td><a class="link" href="server-system-variables.html#sysvar_local_infile"><code class="literal">local_infile</code></a></td>
            <td>ON (5.7)</td>
            <td>OFF</td>
          </tr><tr>
            <td><span class="emphasis"><em>InnoDB changes</em></span></td>
            <td></td>
            <td></td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_undo_tablespaces"><code class="literal">innodb_undo_tablespaces</code></a></td>
            <td>0</td>
            <td>2</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_undo_log_truncate"><code class="literal">innodb_undo_log_truncate</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_flush_method"><code class="literal">innodb_flush_method</code></a></td>
            <td>NULL</td>
            <td>fsync (Unix), unbuffered (Windows)</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_autoinc_lock_mode"><code class="literal">innodb_autoinc_lock_mode</code></a></td>
            <td>1 (consecutive)</td>
            <td>2 (interleaved)</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_flush_neighbors"><code class="literal">innodb_flush_neighbors</code></a></td>
            <td>1 (enable)</td>
            <td>0 (disable)</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct_lwm"><code class="literal">innodb_max_dirty_pages_pct_lwm</code></a></td>
            <td>0 (%)</td>
            <td>10 (%)</td>
          </tr><tr>
            <td><a class="link" href="innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct"><code class="literal">innodb_max_dirty_pages_pct</code></a></td>
            <td>75 (%)</td>
            <td>90 (%)</td>
          </tr><tr>
            <td><span class="emphasis"><em>Performance Schema changes</em></span></td>
            <td></td>
            <td></td>
          </tr><tr>
            <td><code class="literal">performance-schema-instrument=&#39;wait/lock/metadata/sql/%=ON&#39;</code></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><code class="literal">performance-schema-instrument=&#39;memory/%=COUNTED&#39;</code></td>
            <td>OFF</td>
            <td>COUNTED</td>
          </tr><tr>
            <td><code class="literal">performance-schema-consumer-events-transactions-current=ON</code></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><code class="literal">performance-schema-consumer-events-transactions-history=ON</code></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><code class="literal">performance-schema-instrument=&#39;transaction%=ON&#39;</code></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><span class="emphasis"><em>Replication changes</em></span></td>
            <td></td>
            <td></td>
          </tr><tr>
            <td><a class="link" href="replication-options-binary-log.html#sysvar_log_bin"><code class="literal">log_bin</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="replication-options.html#sysvar_server_id"><code class="literal">server_id</code></a></td>
            <td>0</td>
            <td>1</td>
          </tr><tr>
            <td><a class="link" href="replication-options-binary-log.html#sysvar_log_slave_updates"><code class="literal">log-slave-updates</code></a></td>
            <td>OFF</td>
            <td>ON</td>
          </tr><tr>
            <td><a class="link" href="replication-options-binary-log.html#sysvar_expire_logs_days"><code class="literal">expire_logs_days</code></a></td>
            <td>0</td>
            <td>30</td>
          </tr><tr>
            <td><a class="link" href="replication-options-replica.html#sysvar_master_info_repository"><code class="literal">master-info-repository</code></a></td>
            <td>FILE</td>
            <td>TABLE</td>
          </tr><tr>
            <td><a class="link" href="replication-options-replica.html#sysvar_relay_log_info_repository"><code class="literal">relay-log-info-repository</code></a></td>
            <td>FILE</td>
            <td>TABLE</td>
          </tr><tr>
            <td><a class="link" href="replication-options-binary-log.html#sysvar_transaction_write_set_extraction"><code class="literal">transaction-write-set-extraction</code></a></td>
            <td>OFF</td>
            <td>XXHASH64</td>
          </tr><tr>
            <td><a class="link" href="replication-options-replica.html#sysvar_slave_rows_search_algorithms"><code class="literal">slave_rows_search_algorithms</code></a></td>
            <td>INDEX_SCAN, TABLE_SCAN</td>
            <td>INDEX_SCAN, HASH_SCAN</td>
          </tr><tr>
            <td><a class="link" href="replication-options-replica.html#sysvar_slave_pending_jobs_size_max"><code class="literal">slave_pending_jobs_size_max</code></a></td>
            <td>16M</td>
            <td>128M</td>
          </tr><tr>
            <td><a class="link" href="replication-options-gtids.html#sysvar_gtid_executed_compression_period"><code class="literal">gtid_executed_compression_period</code></a></td>
            <td>1000</td>
            <td>0</td>
          </tr><tr>
            <td><span class="emphasis"><em>Group Replication changes</em></span></td>
            <td></td>
            <td></td>
          </tr><tr>
            <td><a class="link" href="group-replication-options.html#sysvar_group_replication_autorejoin_tries"><code class="literal">group_replication_autorejoin_tries</code></a></td>
            <td>0</td>
            <td>3</td>
          </tr><tr>
            <td><a class="link" href="group-replication-options.html#sysvar_group_replication_exit_state_action"><code class="literal">group_replication_exit_state_action</code></a></td>
            <td>ABORT_SERVER</td>
            <td>READ_ONLY</td>
          </tr><tr>
            <td><a class="link" href="group-replication-options.html#sysvar_group_replication_member_expel_timeout"><code class="literal">group_replication_member_expel_timeout</code></a></td>
            <td>0</td>
            <td>5</td>
          </tr></tbody></table></div><p>
        For more information about options or variables which have been
        added, see <a class="ulink" href="https://dev.mysql.com/doc/mysqld-version-reference/en/optvar-changes-8-0.html" target="_top">Option/Variable Changes for MySQL 8.0</a>, in the
        <em class="citetitle">MySQL Server Version Reference</em>.
      </p><p>
        The following sections explain the changes to defaults and any
        impact they might have on your deployment.
      </p><div class="itemizedlist"><p class="title"><strong>Server Defaults</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a> system
            variable and command line option
            <a class="link" href="server-system-variables.html#sysvar_character_set_server"><code class="option">--character-set-server</code></a>&nbsp;
            changed from <code class="literal">latin1</code> to
            <code class="literal">utf8mb4</code>. This is the server&rsquo;s default
            character set. At this time, UTF8MB4 is the dominant
            character encoding for the web, and this change makes life
            easier for the vast majority of MySQL users. The upgrade
            from 5.7 to 8.0 does not change the character set for any
            existing database objects, but, unless you set
            <code class="literal">character_set_server</code> explicitly (either
            back to the previous value, or to a new one), a new schema
            uses <code class="literal">utf8mb4</code> by default. We recommend
            that you move to&nbsp;<code class="literal">utf8mb4</code> whenever
            possible.
          </p></li><li class="listitem"><p>
            The default value of the&nbsp;
            <a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="literal">collation_server</code></a> system
            variable&nbsp;and command line argument
            <a class="link" href="server-system-variables.html#sysvar_collation_server"><code class="option">--collation-server</code></a> changed
            from <code class="literal">latin1_swedish_ci</code>
            to&nbsp;<code class="literal">utf8mb4_0900_ai_ci</code>. This is the
            server&rsquo;s default collation, the ordering of characters in
            a character set. There is a link between collations and
            character sets as each character set comes with a list of
            possible collations. The upgrade from 5.7 to 8.0 does not
            change any collation for any existing database objects, but
            takes effect for new objects.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_explicit_defaults_for_timestamp"><code class="literal">explicit_defaults_for_timestamp</code></a>
            system variable changed from <code class="literal">OFF</code> (MySQL
            legacy behavior) to <code class="literal">ON</code> (SQL standard
            behavior). This option was originally introduced in 5.6 and
            was <code class="literal">OFF</code> in 5.6 and 5.7.&nbsp;
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_optimizer_trace_max_mem_size"><code class="literal">optimizer_trace_max_mem_size</code></a>
            system variable changed from <code class="literal">16KB</code> to
            <code class="literal">1MB</code>. The old default caused the optimizer
            trace to be truncated for any non-trivial query. This change
            ensures useful optimizer traces for most queries.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="validate-password-options-variables.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>
            system variable changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>. This means that when the
            <code class="literal">validate_password</code> plugin is enabled, by
            default it now rejects passwords that match the current
            session user name.
          </p></li><li class="listitem"><p>
            The autosize algorithm for the
            <a class="link" href="server-system-variables.html#sysvar_back_log"><code class="literal">back_log</code></a> system variable
            has changed.&nbsp; The value for autosize (-1) is now set to the
            value of <a class="link" href="server-system-variables.html#sysvar_max_connections"><code class="literal">max_connections</code></a>,
            which is bigger than the calculated by <code class="literal">50 +
            (max_connections / 5)</code>. The
            <code class="literal">back_log</code> queues up incoming IP connect
            requests in situations where the server is not able to keep
            up with incoming requests. In the worst case, with
            <a class="link" href="server-system-variables.html#sysvar_max_connections"><code class="literal">max_connections</code></a> number of
            clients trying to reconnect at the same time, for example
            after a network failure, they can all be buffered and
            reject-retry loops are avoided.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> system
            variable changed from <code class="literal">4194304</code> (4M) to
            <code class="literal">67108864</code> (64M). The main advantage with
            this larger default is less chance of receiving errors about
            an insert or query being larger than
            <code class="literal">max_allowed_packet</code>. It should be as big
            as the largest <a class="xref" href="blob.html" title="11.3.4&nbsp;The BLOB and TEXT Types">Section&nbsp;11.3.4, &ldquo;The BLOB and TEXT Types&rdquo;</a> you want to use. To
            revert to the previous behavior, set
            <code class="literal">max_allowed_packet=4194304</code>.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> system
            variable changed from <code class="literal">64</code> to
            <code class="literal">1024</code>. This ensures that MySQL handles a
            larger number of warnings, such as an UPDATE statement that
            touches 1000s of rows and many of them give conversion
            warnings. It is common for many tools to batch updates, to
            help reduce replication lag. External tools such as
            pt-online-schema-change defaults to 1000, and gh-ost
            defaults to 100. MySQL 8.0 covers full error history for
            these two use cases. There are no static allocations, so
            this change only affects memory consumption for statements
            that generate lots of warnings.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_event_scheduler"><code class="literal">event_scheduler</code></a> system
            variable changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>. In other words, the event scheduler
            is enabled by default. This is an enabler for new features
            in SYS, for example &ldquo;kill idle transactions&rdquo;.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_table_open_cache"><code class="literal">table_open_cache</code></a> system
            variable changed from <code class="literal">2000</code> to
            <code class="literal">4000</code>. This is a minor change which
            increases session concurrency on table access.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="server-system-variables.html#sysvar_log_error_verbosity"><code class="literal">log_error_verbosity</code></a> system
            variable changed from <code class="literal">3</code> (Notes) to
            <code class="literal">2</code> (Warning). The purpose is to make the
            MySQL 8.0 error log less verbose by default.
          </p></li></ul></div><div class="itemizedlist"><p class="title"><strong>InnoDB Defaults</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span> The
            default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_tablespaces"><code class="literal">innodb_undo_tablespaces</code></a>
            system variable changed from <code class="literal">0</code> to
            <code class="literal">2</code>. The configures the number of undo
            tablespaces used by InnoDB. In MySQL 8.0 the minimum value
            for <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_tablespaces"><code class="literal">innodb_undo_tablespaces</code></a>
            is 2 and rollback segments cannot be created in the system
            tablespace anymore. Thus, this is a case where you cannot
            revert back to 5.7 behavior. The purpose of this change is
            to be able to auto-truncate Undo logs (see next item),
            reclaiming disk space used by (occasional) long transactions
            such as a <a class="link" href="mysqldump.html" title="4.5.4&nbsp;mysqldump &mdash; A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_log_truncate"><code class="literal">innodb_undo_log_truncate</code></a>
            system variable&nbsp; changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>. When enabled, undo tablespaces that
            exceed the threshold value defined by
            <a class="link" href="innodb-parameters.html#sysvar_innodb_max_undo_log_size"><code class="literal">innodb_max_undo_log_size</code></a>
            are marked for truncation. Only undo tablespaces can be
            truncated. Truncating undo logs that reside in the system
            tablespace is not supported. An upgrade from 5.7 to 8.0
            automatically converts your system to use&nbsp; undo
            tablespaces, using the system tablespace is not an option in
            8.0.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_flush_method"><code class="literal">innodb_flush_method</code></a> system
            variable changed from <code class="literal">NULL</code> to
            <code class="literal">fsync</code> on Unix-like systems and from
            <code class="literal">NULL</code> to <code class="literal">unbuffered</code> on
            Windows systems. This is more of a terminology and option
            cleanup without any tangible impact. For Unix this is just a
            documentation change as the default was
            <code class="literal">fsync</code> also in 5.7 (the default
            <code class="literal">NULL</code> meant <code class="literal">fsync</code>).
            Similarly on Windows,
            <a class="link" href="innodb-parameters.html#sysvar_innodb_flush_method"><code class="literal">innodb_flush_method</code></a> default
            <code class="literal">NULL</code> meant
            <code class="literal">async_unbuffered</code> in 5.7, and is replaced
            by default <code class="literal">unbuffered</code> in 8.0, which in
            combination with the existing default
            <a class="link" href="innodb-parameters.html#sysvar_innodb_use_native_aio"><code class="literal">innodb_use_native_aio=ON</code></a>
            has the same effect.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Incompatible change</strong></span> The
            default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_autoinc_lock_mode"><code class="literal">innodb_autoinc_lock_mode</code></a>
            system variable changed from <code class="literal">1</code>
            (consecutive) to <code class="literal">2</code> (interleaved). The
            change to interleaved lock mode as the default setting
            reflects the change from statement-based to row-based
            replication as the default replication type, which occurred
            in MySQL 5.7. <span class="emphasis"><em>Statement-based
            replication</em></span> requires the consecutive
            auto-increment lock mode to ensure that auto-increment
            values are assigned in a predictable and repeatable order
            for a given sequence of SQL statements, whereas
            <span class="emphasis"><em>row-based replication</em></span> is not sensitive
            to the execution order of SQL statements. Thus, this change
            is known to be incompatible with statement based
            replication, and may break some applications or
            user-generated test suites that depend on sequential auto
            increment. The previous default can be restored by setting
            <code class="literal">innodb_autoinc_lock_mode=1;</code>
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_flush_neighbors"><code class="literal">innodb_flush_neighbors</code></a>
            system variable changes from <code class="literal">1</code> (enable)
            to <code class="literal">0</code> (disable). This is done because fast
            IO (SSDs) is now the default for deployment. We expect that
            for the majority of users, this results in a small
            performance gain. Users who are using slower hard drives may
            see a performance loss, and are encouraged to revert to the
            previous defaults by setting
            <code class="literal">innodb_flush_neighbors=1</code>.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct_lwm"><code class="literal">innodb_max_dirty_pages_pct_lwm</code></a>
            system variable changed from <code class="literal">0</code> (%) to
            <code class="literal">10</code> (%). With
            <code class="literal">innodb_max_dirty_pages_pct_lwm=10</code>, InnoDB
            increases its flushing activity when &gt;10% of the buffer
            pool contains modified (&lsquo;dirty&rsquo;) pages. The purpose of
            this change is to trade off peak throughput slightly, in
            exchange for more consistent performance.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct"><code class="literal">innodb_max_dirty_pages_pct</code></a>
            system variable changed from <code class="literal">75</code> (%) to
            <code class="literal">90</code> (%). This change combines with the
            change to
            <a class="link" href="innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct_lwm"><code class="literal">innodb_max_dirty_pages_pct_lwm</code></a>
            and together they ensure a smooth InnoDB flushing behavior,
            avoiding flushing bursts. To revert to the previous
            behavior, set
            <code class="literal">innodb_max_dirty_pages_pct=75</code> and
            <code class="literal">innodb_max_dirty_pages_pct_lwm=0</code>.
          </p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Performance Schema Defaults</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Performance Schema Meta Data Locking&nbsp; (MDL) instrumentation
            is turned on by default. The compiled default&nbsp; for
            <code class="literal">performance-schema-instrument=&#39;wait/lock/metadata/sql/%=ON&#39;</code>
            changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>.&nbsp; This is an enabler for adding MDL
            oriented views in SYS.
          </p></li><li class="listitem"><p>
            Performance Schema Memory instrumentation is turned on by
            default. The compiled default&nbsp; for
            <code class="literal">performance-schema-instrument=&#39;memory/%=COUNTED&#39;</code>
            changed from <code class="literal">OFF</code> to
            <code class="literal">COUNTED</code>. This is important because the
            accounting is incorrect if instrumentation is enabled after
            server start, and you could get a negative balance from
            missing an allocation, but catching a free.

            
          </p></li><li class="listitem"><p>
            Performance Schema Transaction instrumentation is turned on
            by default.&nbsp;The compiled default&nbsp; for&nbsp;
            <code class="literal">performance-schema-consumer-events-transactions-current=ON</code>,
            <code class="literal">performance-schema-consumer-events-transactions-history=ON</code>,
            and
            <code class="literal">performance-schema-instrument=&#39;transaction%=ON&#39;</code>
            changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>.
          </p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Replication Defaults</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-binary-log.html#sysvar_log_bin"><code class="literal">log_bin</code></a> system variable
            changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>. In other words, binary logging is
            enabled by default.&nbsp;Nearly all production installations
            have the binary log enabled as it is used for replication
            and point-in-time recovery. Thus, by enabling binary log by
            default we eliminate one configuration step, enabling it
            later requires a <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> restart. Enabling
            it by default also provides better test coverage and it
            becomes easier to spot performance regressions. Remember to
            also set <a class="link" href="replication-options.html#sysvar_server_id"><code class="literal">server_id</code></a> (see
            following change). The 8.0 default behavior is as if you
            issued <code class="literal">./mysqld --log-bin --server-id=1</code>.
            If you are on 8.0 and want 5.7 behavior you can
            issue&nbsp;<code class="literal">./mysqld --skip-log-bin
            --server-id=0</code>.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options.html#sysvar_server_id"><code class="literal">server_id</code></a> system
            variable&nbsp;changed from <code class="literal">0</code> to
            <code class="literal">1</code> (combines with the change to
            <a class="link" href="replication-options-binary-log.html#sysvar_log_bin"><code class="literal">log_bin=ON</code></a>). The server can
            be started with this default ID, but in practice you must
            set the <a class="link" href="replication-options.html#sysvar_server_id"><code class="literal">server-id</code></a> according
            to the replication infrastructure being deployed, to avoid
            having duplicate server ids.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-binary-log.html#sysvar_log_slave_updates"><code class="literal">log-slave-updates</code></a> system
            variable changed from <code class="literal">OFF</code> to
            <code class="literal">ON</code>.&nbsp; This causes a replica to log
            replicated events into its own binary log. This option is
            required for Group Replication, and also ensures correct
            behavior in various replication chain setups, which have
            become the norm today.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-binary-log.html#sysvar_expire_logs_days"><code class="option">expire_logs_days</code></a> system
            variable changed from <code class="literal">0</code> to
            <code class="literal">30</code>. The new default <code class="literal">30</code>
            causes <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to periodically purge
            unused binary logs that are older than 30 days. This change
            helps prevent excessive amounts of disk space being wasted
            on binary logs that are no longer needed for replication or
            recovery purposes. The old value of <code class="literal">0</code>
            disables any automatic binary log purges.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-replica.html#sysvar_master_info_repository"><code class="literal">master_info_repository</code></a> and
            <a class="link" href="replication-options-replica.html#sysvar_relay_log_info_repository"><code class="literal">relay_log_info_repository</code></a>
            system variables change from <code class="literal">FILE</code> to
            <code class="literal">TABLE</code>. Thus in 8.0, replication metadata
            is stored in InnoDB by default. This increases reliability
            to try and achieve crash safe replication by default.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-binary-log.html#sysvar_transaction_write_set_extraction"><code class="literal">transaction-write-set-extraction</code></a>
            system variable changed from <code class="literal">OFF</code> to
            <code class="literal">XXHASH64</code>. This change enables transaction
            write sets by default. By using Transaction Write Sets, the
            source has to do slightly more work to generate the write
            sets, but the result is helpful in conflict detection. This
            is a requirement for Group Replication and the new default
            makes it easy to enable binary log writeset parallelization
            on the source to speed up replication.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-replica.html#sysvar_slave_rows_search_algorithms"><code class="literal">slave_rows_search_algorithms</code></a>
            system variable changed from
            <code class="literal">INDEX_SCAN,TABLE_SCAN</code> to
            <code class="literal">INDEX_SCAN,HASH_SCAN</code>. This change speeds
            up row-based replication by reducing the number of table
            scans the replica applier has to do to apply the changes to
            a table without a primary key.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-replica.html#sysvar_slave_pending_jobs_size_max"><code class="literal">slave_pending_jobs_size_max</code></a>
            system variable changed from <code class="literal">16M</code> to
            <code class="literal">128M</code>. This change increases the amount of
            memory available to multithreaded replicas.
          </p></li><li class="listitem"><p>
            The default value of the
            <a class="link" href="replication-options-gtids.html#sysvar_gtid_executed_compression_period"><code class="literal">gtid_executed_compression_period</code></a>
            system variable changed from <code class="literal">1000</code> to
            <code class="literal">0</code>. This change ensures that compression
            of the <code class="literal">mysql.gtid_executed</code> table only
            occurs implicitly as required.
          </p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Group Replication Defaults</strong></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The default value of
            <a class="link" href="group-replication-options.html#sysvar_group_replication_autorejoin_tries"><code class="literal">group_replication_autorejoin_tries</code></a>
            changed from 0 to 3, which means that automatic rejoin is
            enabled by default. This system variable specifies the
            number of tries that a member makes to automatically rejoin
            the group if it is expelled, or if it is unable to contact a
            majority of the group before the
            <a class="link" href="group-replication-options.html#sysvar_group_replication_unreachable_majority_timeout"><code class="literal">group_replication_unreachable_majority_timeout</code></a>
            setting is reached.
          </p></li><li class="listitem"><p>
            The default value of
            <a class="link" href="group-replication-options.html#sysvar_group_replication_exit_state_action"><code class="literal">group_replication_exit_state_action</code></a>
            changed from <code class="literal">ABORT_SERVER</code> to
            <code class="literal">READ_ONLY</code>. This means that when a member
            exits the group, for example after a network failure, the
            instance becomes read-only, rather than being shut down.
          </p></li><li class="listitem"><p>
            The default value of
            <a class="link" href="group-replication-options.html#sysvar_group_replication_member_expel_timeout"><code class="literal">group_replication_member_expel_timeout</code></a>
            changed from 0 to 5, meaning that a member suspected of
            having lost contact with the group is liable for expulsion 5
            seconds after the 5-second detection period.
          </p></li></ul></div><p>
        Most of these defaults are reasonably good for both development
        and production environments. There is one exception to this, we
        decided to keep the new option called&nbsp;
        <a class="link" href="innodb-parameters.html#sysvar_innodb_dedicated_server"><code class="literal">innodb_dedicated_server</code></a> set to
        <code class="literal">OFF</code> although we recommend it to be
        <code class="literal">ON</code> for production environments. The reason
        for defaulting to <code class="literal">OFF</code> is that it causes
        shared environments such as developer laptops to become
        unusable, because it takes <span class="emphasis"><em>all</em></span> the memory
        it can find.
      </p><p>
        For production environments we recommend setting
        <a class="link" href="innodb-parameters.html#sysvar_innodb_dedicated_server"><code class="literal">innodb_dedicated_server</code></a> to
        <code class="literal">ON</code>.&nbsp; When set to <code class="literal">ON</code> the
        following InnoDB variables (if not specified explicitly) are
        autoscaled based on the available memory
        <a class="link" href="innodb-parameters.html#sysvar_innodb_buffer_pool_size"><code class="literal">innodb_buffer_pool_size</code></a>,
        <a class="link" href="innodb-parameters.html#sysvar_innodb_log_file_size"><code class="literal">innodb_log_file_size</code></a>, and
        <a class="link" href="innodb-parameters.html#sysvar_innodb_flush_method"><code class="literal">innodb_flush_method</code></a>. See
        <a class="xref" href="innodb-dedicated-server.html" title="15.8.12&nbsp;Enabling Automatic Configuration for a Dedicated MySQL Server">Section&nbsp;15.8.12, &ldquo;Enabling Automatic Configuration for a Dedicated MySQL Server&rdquo;</a>.
      </p><p>
        Although the new defaults are the best configuration choices for
        most use cases, there are special cases, as well as legacy
        reasons for using existing 5.7 configuration choices. For
        example, some people prefer to upgrade to 8.0 with as few
        changes to their applications or operational environment as
        possible. We recommend to evaluate all the new defaults and use
        as many as you can. Most new defaults can be tested in 5.7, so
        you can validate the new defaults in 5.7 production before
        upgrading to 8.0. For the few defaults where you need your old
        5.7 value, set the corresponding configuration variable or
        startup option in your operational environment.
      </p><p>
        MySQL 8.0 has the Performance Schema
        <a class="link" href="performance-schema-variables-info-table.html" title="27.12.14.2&nbsp;Performance Schema variables_info Table"><code class="literal">variables_info</code></a> table, which shows
        for each system variable the source from which it was most
        recently set, as well as its range of values. This provides SQL
        access to all there is to know about a configuration variable
        and its values.
      </p></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="upgrading-what-is-upgraded.html">Previous <span class="navHint"> What the MySQL Upgrade Process Upgrades </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="upgrading.html">Up <span class="navHint"> Upgrading MySQL </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="upgrade-prerequisites.html">Next <span class="navHint"> Preparing Your Installation for Upgrade </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>