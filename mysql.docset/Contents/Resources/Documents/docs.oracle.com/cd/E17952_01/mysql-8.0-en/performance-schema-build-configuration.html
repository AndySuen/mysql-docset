<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-3110"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/27.2%C2%A0Performance%20Schema%20Build%20Configuration"></a><title>27.2&nbsp;Performance Schema Build Configuration</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="performance-schema.html" title="Chapter&nbsp;27&nbsp;MySQL Performance Schema"/><link rel="prev" href="performance-schema-quick-start.html" title="27.1&nbsp;Performance Schema Quick Start"/><link rel="next" href="performance-schema-startup-configuration.html" title="27.3&nbsp;Performance Schema Startup Configuration"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="performance-schema-build-configuration.html#performance-schema-build-configuration">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="performance-schema-quick-start.html">Previous <span class="navHint"> Performance Schema Quick Start </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="performance-schema.html">Up <span class="navHint"> MySQL Performance Schema </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="performance-schema-startup-configuration.html">Next <span class="navHint"> Performance Schema Startup Configuration </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="performance-schema-build-configuration"></a>27.2&nbsp;Performance Schema Build Configuration</h2></div></div></div><p>
      The Performance Schema is mandatory and always compiled in. It is
      possible to exclude certain parts of the Performance Schema
      instrumentation. For example, to exclude stage and statement
      instrumentation, do this:
    </p><pre class="programlisting">$&gt; <strong class="userinput"><code>cmake . \</code></strong>
        <strong class="userinput"><code>-DDISABLE_PSI_STAGE=1 \</code></strong>
        <strong class="userinput"><code>-DDISABLE_PSI_STATEMENT=1</code></strong>
</pre><p>
      For more information, see the descriptions of the
      <code class="literal">DISABLE_PSI_<em class="replaceable"><code>XXX</code></em></code>
      <span class="command"><strong>CMake</strong></span> options in
      <a class="xref" href="source-configuration-options.html" title="2.8.7&nbsp;MySQL Source-Configuration Options">Section&nbsp;2.8.7, &ldquo;MySQL Source-Configuration Options&rdquo;</a>.
    </p><p>
      If you install MySQL over a previous installation that was
      configured without the Performance Schema (or with an older
      version of the Performance Schema that has missing or out-of-date
      tables). One indication of this issue is the presence of messages
      such as the following in the error log:
    </p><pre class="programlisting">[ERROR] Native table &#39;performance_schema&#39;.&#39;events_waits_history&#39;
has the wrong structure
[ERROR] Native table &#39;performance_schema&#39;.&#39;events_waits_history_long&#39;
has the wrong structure
...
</pre><p>
      To correct that problem, perform the MySQL upgrade procedure. See
      <a class="xref" href="upgrading.html" title="2.10&nbsp;Upgrading MySQL">Section&nbsp;2.10, &ldquo;Upgrading MySQL&rdquo;</a>.
    </p><p>
      Because the Performance Schema is configured into the server at
      build time, a row for
      <a class="link" href="performance-schema.html" title="Chapter&nbsp;27&nbsp;MySQL Performance Schema"><code class="literal">PERFORMANCE_SCHEMA</code></a> appears in the
      output from <a class="link" href="show-engines.html" title="13.7.7.16&nbsp;SHOW ENGINES Statement"><code class="literal">SHOW ENGINES</code></a>. This
      means that the Performance Schema is available, not that it is
      enabled. To enable it, you must do so at server startup, as
      described in the next section.
    </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="performance-schema-quick-start.html">Previous <span class="navHint"> Performance Schema Quick Start </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="performance-schema.html">Up <span class="navHint"> MySQL Performance Schema </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="performance-schema-startup-configuration.html">Next <span class="navHint"> Performance Schema Startup Configuration </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>