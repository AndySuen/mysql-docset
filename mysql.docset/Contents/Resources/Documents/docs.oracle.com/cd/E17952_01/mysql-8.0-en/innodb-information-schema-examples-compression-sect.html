<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-1481"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/15.15.1.3%C2%A0Using%20the%20Compression%20Information%20Schema%20Tables"></a><title>15.15.1.3&nbsp;Using the Compression Information Schema Tables</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="innodb-information-schema-compression-tables.html" title="15.15.1&nbsp;InnoDB INFORMATION_SCHEMA Tables about Compression"/><link rel="prev" href="innodb-information-schema-innodb_cmpmem.html" title="15.15.1.2&nbsp;INNODB_CMPMEM and INNODB_CMPMEM_RESET"/><link rel="next" href="innodb-information-schema-transactions.html" title="15.15.2&nbsp;InnoDB INFORMATION_SCHEMA Transaction and Locking Information"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="innodb-information-schema-examples-compression-sect.html#innodb-information-schema-examples-compression-sect">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="innodb-information-schema-innodb_cmpmem.html">Previous <span class="navHint"> INNODB_CMPMEM and INNODB_CMPMEM_RESET </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="innodb-information-schema-compression-tables.html">Up <span class="navHint"> InnoDB INFORMATION_SCHEMA Tables about Compression </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="innodb-information-schema-transactions.html">Next <span class="navHint"> InnoDB INFORMATION_SCHEMA Transaction and Locking Information </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-1480"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/15.15.1.3%C2%A0Using%20the%20Compression%20Information%20Schema%20Tables"></a><h4 class="title"><a id="innodb-information-schema-examples-compression-sect"></a>15.15.1.3&nbsp;Using the Compression Information Schema Tables</h4></div></div></div><div class="example"><a id="innodb-information-schema-examples-compression"></a><p class="title"><strong>Example&nbsp;15.1&nbsp;Using the Compression Information Schema Tables</strong></p><div class="example-contents"><p>
          The following is sample output from a database that contains
          compressed tables (see <a class="xref" href="innodb-compression.html" title="15.9&nbsp;InnoDB Table and Page Compression">Section&nbsp;15.9, &ldquo;InnoDB Table and Page Compression&rdquo;</a>,
          <a class="link" href="information-schema-innodb-cmp-table.html" title="26.4.6&nbsp;The INFORMATION_SCHEMA INNODB_CMP and INNODB_CMP_RESET Tables"><code class="literal">INNODB_CMP</code></a>,
          <a class="link" href="information-schema-innodb-cmp-per-index-table.html" title="26.4.8&nbsp;The INFORMATION_SCHEMA INNODB_CMP_PER_INDEX and INNODB_CMP_PER_INDEX_RESET Tables"><code class="literal">INNODB_CMP_PER_INDEX</code></a>, and
          <a class="link" href="information-schema-innodb-cmpmem-table.html" title="26.4.7&nbsp;The INFORMATION_SCHEMA INNODB_CMPMEM and INNODB_CMPMEM_RESET Tables"><code class="literal">INNODB_CMPMEM</code></a>).
        </p><p>
          The following table shows the contents of
          <a class="link" href="information-schema-innodb-cmp-table.html" title="26.4.6&nbsp;The INFORMATION_SCHEMA INNODB_CMP and INNODB_CMP_RESET Tables"><code class="literal">INFORMATION_SCHEMA.INNODB_CMP</code></a>
          under a light <a class="link" href="glossary.html#glos_workload" title="workload">workload</a>.
          The only compressed page size that the buffer pool contains is
          8K. Compressing or uncompressing pages has consumed less than
          a second since the time the statistics were reset, because the
          columns <code class="literal">COMPRESS_TIME</code> and
          <code class="literal">UNCOMPRESS_TIME</code> are zero.
        </p><div class="informaltable"><a id="innodb-information-schema-sample-innodb_cmp"></a><table summary="Sample data from the INFORMATION_SCHEMA.INNODB_CMP table, showing the internal workings of InnoDB table compression under a light workload."><colgroup><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 15%"/><col style="width: 20%"/><col style="width: 20%"/></colgroup><thead><tr>
              <th scope="col">page size</th>
              <th scope="col">compress ops</th>
              <th scope="col">compress ops ok</th>
              <th scope="col">compress time</th>
              <th scope="col">uncompress ops</th>
              <th scope="col">uncompress time</th>
            </tr></thead><tbody><tr>
              <th scope="row">1024</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">2048</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">4096</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">8192</th>
              <td>1048</td>
              <td>921</td>
              <td>0</td>
              <td>61</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">16384</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr></tbody></table></div><p>
          According to <a class="link" href="information-schema-innodb-cmpmem-table.html" title="26.4.7&nbsp;The INFORMATION_SCHEMA INNODB_CMPMEM and INNODB_CMPMEM_RESET Tables"><code class="literal">INNODB_CMPMEM</code></a>, there
          are 6169 compressed 8KB pages in the
          <a class="link" href="glossary.html#glos_buffer_pool" title="buffer pool">buffer pool</a>. The only
          other allocated block size is 64 bytes. The smallest
          <code class="literal">PAGE_SIZE</code> in
          <a class="link" href="information-schema-innodb-cmpmem-table.html" title="26.4.7&nbsp;The INFORMATION_SCHEMA INNODB_CMPMEM and INNODB_CMPMEM_RESET Tables"><code class="literal">INNODB_CMPMEM</code></a> is used for block
          descriptors of those compressed pages for which no
          uncompressed page exists in the buffer pool. We see that there
          are 5910 such pages. Indirectly, we see that 259 (6169-5910)
          compressed pages also exist in the buffer pool in uncompressed
          form.
        </p><p>
          The following table shows the contents of
          <a class="link" href="information-schema-innodb-cmpmem-table.html" title="26.4.7&nbsp;The INFORMATION_SCHEMA INNODB_CMPMEM and INNODB_CMPMEM_RESET Tables"><code class="literal">INFORMATION_SCHEMA.INNODB_CMPMEM</code></a>
          under a light <a class="link" href="glossary.html#glos_workload" title="workload">workload</a>.
          Some memory is unusable due to fragmentation of the memory
          allocator for compressed pages:
          <code class="literal">SUM(PAGE_SIZE*PAGES_FREE)=6784</code>. This is
          because small memory allocation requests are fulfilled by
          splitting bigger blocks, starting from the 16K blocks that are
          allocated from the main buffer pool, using the buddy
          allocation system. The fragmentation is this low because some
          allocated blocks have been relocated (copied) to form bigger
          adjacent free blocks. This copying of
          <code class="literal">SUM(PAGE_SIZE*RELOCATION_OPS)</code> bytes has
          consumed less than a second
          <code class="literal">(SUM(RELOCATION_TIME)=0)</code>.
        </p><div class="informaltable"><a id="innodb-information-schema-sample-innodb_cmpmem"></a><table summary="Sample data from the INFORMATION_SCHEMA.INNODB_CMPMEM table, showing buffer pool memory operations for InnoDB table compression under a light workload."><colgroup><col style="width: 15%"/><col style="width: 15%"/><col style="width: 20%"/><col style="width: 20%"/><col style="width: 20%"/></colgroup><thead><tr>
              <th scope="col">page size</th>
              <th scope="col">pages used</th>
              <th scope="col">pages free</th>
              <th scope="col">relocation ops</th>
              <th scope="col">relocation time</th>
            </tr></thead><tbody><tr>
              <th scope="row">64</th>
              <td>5910</td>
              <td>0</td>
              <td>2436</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">128</th>
              <td>0</td>
              <td>1</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">256</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">512</th>
              <td>0</td>
              <td>1</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">1024</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">2048</th>
              <td>0</td>
              <td>1</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">4096</th>
              <td>0</td>
              <td>1</td>
              <td>0</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">8192</th>
              <td>6169</td>
              <td>0</td>
              <td>5</td>
              <td>0</td>
            </tr><tr>
              <th scope="row">16384</th>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr></tbody></table></div></div></div><br class="example-break"/></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="innodb-information-schema-innodb_cmpmem.html">Previous <span class="navHint"> INNODB_CMPMEM and INNODB_CMPMEM_RESET </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="innodb-information-schema-compression-tables.html">Up <span class="navHint"> InnoDB INFORMATION_SCHEMA Tables about Compression </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="innodb-information-schema-transactions.html">Next <span class="navHint"> InnoDB INFORMATION_SCHEMA Transaction and Locking Information </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>