<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2854"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/4.5.1.6%C2%A0mysql%20Client%20Tips"></a><title>4.5.1.6&nbsp;mysql Client Tips</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"/><link rel="prev" href="mysql-batch-commands.html" title="4.5.1.5&nbsp;Executing SQL Statements from a Text File"/><link rel="next" href="mysqladmin.html" title="4.5.2&nbsp;mysqladmin &mdash; A MySQL Server Administration Program"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-tips.html#mysql-tips">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="mysql-batch-commands.html">Previous <span class="navHint"> Executing SQL Statements from a Text File </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="mysql.html">Up <span class="navHint"> mysql &mdash; The MySQL Command-Line Client </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="mysqladmin.html">Next <span class="navHint"> mysqladmin &mdash; A MySQL Server Administration Program </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-2853"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/4.5.1.6%C2%A0mysql%20Client%20Tips"></a><h4 class="title"><a id="mysql-tips"></a>4.5.1.6&nbsp;mysql Client Tips</h4></div></div></div><p>
        This section provides information about techniques for more
        effective use of <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and about
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> operational behavior.
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="mysql-tips.html#mysql-input-editing" title="Input-Line Editing">Input-Line Editing</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#mysql-history" title="Disabling Interactive History">Disabling Interactive History</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#windows-unicode-support" title="Unicode Support on Windows">Unicode Support on Windows</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#vertical-query-results" title="Displaying Query Results Vertically">Displaying Query Results Vertically</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#safe-updates" title="Using Safe-Updates Mode (--safe-updates)">Using Safe-Updates Mode (--safe-updates)</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#mysql-reconnect" title="Disabling mysql Auto-Reconnect">Disabling mysql Auto-Reconnect</a></p></li><li class="listitem"><p><a class="xref" href="mysql-tips.html#mysql-parsers" title="mysql Client Parser Versus Server Parser">mysql Client Parser Versus Server Parser</a></p></li></ul></div><h5><a id="mysql-input-editing"></a>Input-Line Editing</h5><p>
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> supports input-line editing, which
        enables you to modify the current input line in place or recall
        previous input lines. For example, the
        <span class="keycap"><strong>left-arrow</strong></span> and <span class="keycap"><strong>right-arrow</strong></span>
        keys move horizontally within the current input line, and the
        <span class="keycap"><strong>up-arrow</strong></span> and <span class="keycap"><strong>down-arrow</strong></span> keys
        move up and down through the set of previously entered lines.
        <span class="keycap"><strong>Backspace</strong></span> deletes the character before the
        cursor and typing new characters enters them at the cursor
        position. To enter the line, press <span class="keycap"><strong>Enter</strong></span>.
      </p><p>
        On Windows, the editing key sequences are the same as supported
        for command editing in console windows. On Unix, the key
        sequences depend on the input library used to build
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> (for example, the
        <code class="literal">libedit</code> or <code class="literal">readline</code>
        library).
      </p><p>
        Documentation for the <code class="literal">libedit</code> and
        <code class="literal">readline</code> libraries is available online. To
        change the set of key sequences permitted by a given input
        library, define key bindings in the library startup file. This
        is a file in your home directory: <code class="filename">.editrc</code>
        for <code class="literal">libedit</code> and <code class="filename">.inputrc</code>
        for <code class="literal">readline</code>.
      </p><p>
        For example, in <code class="literal">libedit</code>,
        <span class="keycap"><strong>Control+W</strong></span> deletes everything before the current
        cursor position and <span class="keycap"><strong>Control+U</strong></span> deletes the
        entire line. In <code class="literal">readline</code>,
        <span class="keycap"><strong>Control+W</strong></span> deletes the word before the cursor
        and <span class="keycap"><strong>Control+U</strong></span> deletes everything before the
        current cursor position. If <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> was built
        using <code class="literal">libedit</code>, a user who prefers the
        <code class="literal">readline</code> behavior for these two keys can put
        the following lines in the <code class="filename">.editrc</code> file
        (creating the file if necessary):
      </p><pre class="programlisting">bind &#34;^W&#34; ed-delete-prev-word
bind &#34;^U&#34; vi-kill-line-prev
</pre><p>
        To see the current set of key bindings, temporarily put a line
        that says only <code class="literal">bind</code> at the end of
        <code class="filename">.editrc</code>. <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> shows the
        bindings when it starts.
      </p><h5><a id="mysql-history"></a>Disabling Interactive History</h5><a id="idm45829043169840" class="indexterm"></a><p>
        The <span class="keycap"><strong>up-arrow</strong></span> key enables you to recall input
        lines from current and previous sessions. In cases where a
        console is shared, this behavior may be unsuitable.
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> supports disabling the interactive
        history partially or fully, depending on the host platform.
      </p><p>
        On Windows, the history is stored in memory.
        <span class="keycap"><strong>Alt+F7</strong></span> deletes all input lines stored in memory
        for the current history buffer. It also deletes the list of
        sequential numbers in front of the input lines displayed with
        <span class="keycap"><strong>F7</strong></span> and recalled (by number) with
        <span class="keycap"><strong>F9</strong></span>. New input lines entered after you press
        <span class="keycap"><strong>Alt+F7</strong></span> repopulate the current history buffer.
        Clearing the buffer does not prevent logging to the Windows
        Event Viewer, if the <a class="link" href="mysql-command-options.html#option_mysql_syslog"><code class="option">--syslog</code></a>
        option was used to start <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>. Closing the
        console window also clears the current history buffer.
      </p><p>
        To disable interactive history on Unix, first delete the
        <code class="filename">.mysql_history</code> file, if it exists (previous
        entries are recalled otherwise). Then start
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> with the
        <code class="literal">--histignore=&#34;*&#34;</code> option to ignore all new
        input lines. To re-enable the recall (and logging) behavior,
        restart <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> without the option.
      </p><p>
        If you prevent the <code class="filename">.mysql_history</code> file from
        being created (see <a class="xref" href="mysql-logging.html#mysql-logging-history-file" title="Controlling the History File">Controlling the History File</a>)
        and use <code class="literal">--histignore=&#34;*&#34;</code> to start the
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, the interactive history recall
        facility is disabled fully. Alternatively, if you omit the
        <a class="link" href="mysql-command-options.html#option_mysql_histignore"><code class="option">--histignore</code></a> option, you can
        recall the input lines entered during the current session.
      </p><h5><a id="windows-unicode-support"></a>Unicode Support on Windows</h5><p>
        Windows provides APIs based on UTF-16LE for reading from and
        writing to the console; the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client for
        Windows is able to use these APIs. The Windows installer creates
        an item in the MySQL menu named <code class="literal">MySQL command line
        client - Unicode</code>. This item invokes the
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client with properties set to
        communicate through the console to the MySQL server using
        Unicode.
      </p><p>
        To take advantage of this support manually, run
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> within a console that uses a compatible
        Unicode font and set the default character set to a Unicode
        character set that is supported for communication with the
        server:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Open a console window.
          </p></li><li class="listitem"><p>
            Go to the console window properties, select the font tab,
            and choose Lucida Console or some other compatible Unicode
            font. This is necessary because console windows start by
            default using a DOS raster font that is inadequate for
            Unicode.
          </p></li><li class="listitem"><p>
            Execute <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql.exe</strong></span></a> with the
            <a class="link" href="mysql-command-options.html#option_mysql_default-character-set"><code class="option">--default-character-set=utf8mb4</code></a>
            (or <code class="literal">utf8mb3</code>) option. This option is
            necessary because <code class="literal">utf16le</code> is one of the
            character sets that cannot be used as the client character
            set. See
            <a class="xref" href="charset-connection.html#charset-connection-impermissible-client-charset" title="Impermissible Client Character Sets">Impermissible Client Character Sets</a>.
          </p></li></ol></div><p>
        With those changes, <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> uses the Windows
        APIs to communicate with the console using UTF-16LE, and
        communicate with the server using UTF-8. (The menu item
        mentioned previously sets the font and character set as just
        described.)
      </p><p>
        To avoid those steps each time you run <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>,
        you can create a shortcut that invokes
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql.exe</strong></span></a>. The shortcut should set the
        console font to Lucida Console or some other compatible Unicode
        font, and pass the
        <a class="link" href="mysql-command-options.html#option_mysql_default-character-set"><code class="option">--default-character-set=utf8mb4</code></a>
        (or <code class="literal">utf8mb3</code>) option to
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql.exe</strong></span></a>.
      </p><p>
        Alternatively, create a shortcut that only sets the console
        font, and set the character set in the
        <code class="literal">[mysql]</code> group of your
        <code class="filename">my.ini</code> file:
      </p><pre class="programlisting">[mysql]
default-character-set=utf8mb4   # or utf8mb3
</pre><h5><a id="vertical-query-results"></a>Displaying Query Results Vertically</h5><p>
        Some query results are much more readable when displayed
        vertically, instead of in the usual horizontal table format.
        Queries can be displayed vertically by terminating the query
        with \G instead of a semicolon. For example, longer text values
        that include newlines often are much easier to read with
        vertical output:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM mails WHERE LENGTH(txt) &lt; 300 LIMIT 300,1\G</code></strong>
*************************** 1. row ***************************
  msg_nro: 3068
     date: 2000-03-01 23:29:50
time_zone: +0200
mail_from: Jones
    reply: jones@example.com
  mail_to: &#34;John Smith&#34; &lt;smith@example.com&gt;
      sbj: UTF-8
      txt: &gt;&gt;&gt;&gt;&gt; &#34;John&#34; == John Smith writes:

John&gt; Hi.  I think this is a good idea.  Is anyone familiar
John&gt; with UTF-8 or Unicode? Otherwise, I&#39;ll put this on my
John&gt; TODO list and see what happens.

Yes, please do that.

Regards,
Jones
     file: inbox-jani-1
     hash: 190402944
1 row in set (0.09 sec)
</pre><h5><a id="safe-updates"></a>Using Safe-Updates Mode (--safe-updates)</h5><a id="idm45829043118256" class="indexterm"></a><a id="idm45829043117216" class="indexterm"></a><a id="idm45829043115728" class="indexterm"></a><a id="idm45829043114640" class="indexterm"></a><a id="idm45829043113152" class="indexterm"></a><a id="idm45829043112064" class="indexterm"></a><a id="idm45829043110576" class="indexterm"></a><a id="idm45829043109488" class="indexterm"></a><p>
        For beginners, a useful startup option is
        <a class="link" href="mysql-command-options.html#option_mysql_safe-updates"><code class="option">--safe-updates</code></a> (or
        <a class="link" href="mysql-command-options.html#option_mysql_safe-updates"><code class="option">--i-am-a-dummy</code></a>,
        which has the same effect). Safe-updates mode is helpful for
        cases when you might have issued an
        <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> or
        <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a> statement but forgotten
        the <code class="literal">WHERE</code> clause indicating which rows to
        modify. Normally, such statements update or delete all rows in
        the table. With <a class="link" href="mysql-command-options.html#option_mysql_safe-updates"><code class="option">--safe-updates</code></a>,
        you can modify rows only by specifying the key values that
        identify them, or a <code class="literal">LIMIT</code> clause, or both.
        This helps prevent accidents. Safe-updates mode also restricts
        <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> statements that produce
        (or are estimated to produce) very large result sets.
      </p><p>
        The <a class="link" href="mysql-command-options.html#option_mysql_safe-updates"><code class="option">--safe-updates</code></a> option causes
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> to execute the following statement when
        it connects to the MySQL server, to set the session values of
        the <a class="link" href="server-system-variables.html#sysvar_sql_safe_updates"><code class="literal">sql_safe_updates</code></a>,
        <a class="link" href="server-system-variables.html#sysvar_sql_select_limit"><code class="literal">sql_select_limit</code></a>, and
        <a class="link" href="server-system-variables.html#sysvar_max_join_size"><code class="literal">max_join_size</code></a> system variables:
      </p><pre class="programlisting">SET sql_safe_updates=1, sql_select_limit=1000, max_join_size=1000000;
</pre><p>
        The <a class="link" href="set-variable.html" title="13.7.6.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET</code></a>
        statement affects statement processing as follows:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Enabling <a class="link" href="server-system-variables.html#sysvar_sql_safe_updates"><code class="literal">sql_safe_updates</code></a>
            causes <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> and
            <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a> statements to produce
            an error if they do not specify a key constraint in the
            <code class="literal">WHERE</code> clause, or provide a
            <code class="literal">LIMIT</code> clause, or both. For example:
          </p><pre class="programlisting">UPDATE <em class="replaceable"><code>tbl_name</code></em> SET <em class="replaceable"><code>not_key_column</code></em>=<em class="replaceable"><code>val</code></em> WHERE <em class="replaceable"><code>key_column</code></em>=<em class="replaceable"><code>val</code></em>;

UPDATE <em class="replaceable"><code>tbl_name</code></em> SET <em class="replaceable"><code>not_key_column</code></em>=<em class="replaceable"><code>val</code></em> LIMIT 1;
</pre></li><li class="listitem"><p>
            Setting <a class="link" href="server-system-variables.html#sysvar_sql_select_limit"><code class="literal">sql_select_limit</code></a> to
            1,000 causes the server to limit all
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> result sets to 1,000
            rows unless the statement includes a
            <code class="literal">LIMIT</code> clause.
          </p></li><li class="listitem"><p>
            Setting <a class="link" href="server-system-variables.html#sysvar_max_join_size"><code class="literal">max_join_size</code></a> to
            1,000,000 causes multiple-table
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> statements to produce
            an error if the server estimates it must examine more than
            1,000,000 row combinations.
          </p></li></ul></div><p>
        To specify result set limits different from 1,000 and 1,000,000,
        you can override the defaults by using the
        <a class="link" href="mysql-command-options.html#option_mysql_select-limit"><code class="option">--select-limit</code></a> and
        <a class="link" href="mysql-command-options.html#option_mysql_max-join-size"><code class="option">--max-join-size</code></a> options when you
        invoke <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>:
      </p><pre class="programlisting">mysql --safe-updates --select-limit=500 --max-join-size=10000
</pre><p>
        It is possible for <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> and
        <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a> statements to produce an
        error in safe-updates mode even with a key specified in the
        <code class="literal">WHERE</code> clause, if the optimizer decides not to
        use the index on the key column:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Range access on the index cannot be used if memory usage
            exceeds that permitted by the
            <a class="link" href="server-system-variables.html#sysvar_range_optimizer_max_mem_size"><code class="literal">range_optimizer_max_mem_size</code></a>
            system variable. The optimizer then falls back to a table
            scan. See <a class="xref" href="range-optimization.html#range-optimization-memory-use" title="Limiting Memory Use for Range Optimization">Limiting Memory Use for Range Optimization</a>.
          </p></li><li class="listitem"><p>
            If key comparisons require type conversion, the index may
            not be used (see <a class="xref" href="mysql-indexes.html" title="8.3.1&nbsp;How MySQL Uses Indexes">Section&nbsp;8.3.1, &ldquo;How MySQL Uses Indexes&rdquo;</a>). Suppose
            that an indexed string column <code class="literal">c1</code> is
            compared to a numeric value using <code class="literal">WHERE c1 =
            2222</code>. For such comparisons, the string value is
            converted to a number and the operands are compared
            numerically (see <a class="xref" href="type-conversion.html" title="12.3&nbsp;Type Conversion in Expression Evaluation">Section&nbsp;12.3, &ldquo;Type Conversion in Expression Evaluation&rdquo;</a>),
            preventing use of the index. If safe-updates mode is
            enabled, an error occurs.
          </p></li></ul></div><p>
        As of MySQL 8.0.13, safe-updates mode also includes these
        behaviors:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="explain.html" title="13.8.2&nbsp;EXPLAIN Statement"><code class="literal">EXPLAIN</code></a> with
            <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> and
            <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a> statements does not
            produce safe-updates errors. This enables use of
            <a class="link" href="explain.html" title="13.8.2&nbsp;EXPLAIN Statement"><code class="literal">EXPLAIN</code></a> plus
            <a class="link" href="show-warnings.html" title="13.7.7.42&nbsp;SHOW WARNINGS Statement"><code class="literal">SHOW WARNINGS</code></a> to see why an
            index is not used, which can be helpful in cases such as
            when a
            <a class="link" href="server-system-variables.html#sysvar_range_optimizer_max_mem_size"><code class="literal">range_optimizer_max_mem_size</code></a>
            violation or type conversion occurs and the optimizer does
            not use an index even though a key column was specified in
            the <code class="literal">WHERE</code> clause.
          </p></li><li class="listitem"><p>
            When a safe-updates error occurs, the error message includes
            the first diagnostic that was produced, to provide
            information about the reason for failure. For example, the
            message may indicate that the
            <a class="link" href="server-system-variables.html#sysvar_range_optimizer_max_mem_size"><code class="literal">range_optimizer_max_mem_size</code></a>
            value was exceeded or type conversion occurred, either of
            which can preclude use of an index.
          </p></li><li class="listitem"><p>
            For multiple-table deletes and updates, an error is produced
            with safe updates enabled only if any target table uses a
            table scan.
          </p></li></ul></div><h5><a id="mysql-reconnect"></a>Disabling mysql Auto-Reconnect</h5><p>
        If the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client loses its connection to
        the server while sending a statement, it immediately and
        automatically tries to reconnect once to the server and send the
        statement again. However, even if <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        succeeds in reconnecting, your first connection has ended and
        all your previous session objects and settings are lost:
        temporary tables, the autocommit mode, and user-defined and
        session variables. Also, any current transaction rolls back.
        This behavior may be dangerous for you, as in the following
        example where the server was shut down and restarted between the
        first and second statements without you knowing it:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @a=1;</code></strong>
Query OK, 0 rows affected (0.05 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(@a);</code></strong>
ERROR 2006: MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    1
Current database: test

Query OK, 1 row affected (1.30 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t;</code></strong>
+------+
| a    |
+------+
| NULL |
+------+
1 row in set (0.05 sec)
</pre><p>
        The <code class="literal">@a</code> user variable has been lost with the
        connection, and after the reconnection it is undefined. If it is
        important to have <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> terminate with an
        error if the connection has been lost, you can start the
        <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client with the
        <a class="link" href="mysql-command-options.html#option_mysql_reconnect"><code class="option">--skip-reconnect</code></a>
        option.
      </p><p>
        For more information about auto-reconnect and its effect on
        state information when a reconnection occurs, see
        <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/c-api-8.0-en/c-api-auto-reconnect.html" target="_top">Automatic Reconnection Control</a>.
      </p><h5><a id="mysql-parsers"></a>mysql Client Parser Versus Server Parser</h5><a id="idm45829043025536" class="indexterm"></a><a id="idm45829043024080" class="indexterm"></a><p>
        The <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client uses a parser on the client
        side that is not a duplicate of the complete parser used by the
        <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server on the server side. This can
        lead to differences in treatment of certain constructs.
        Examples:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The server parser treats strings delimited by
            <code class="literal">&#34;</code> characters as identifiers rather than
            as plain strings if the
            <a class="link" href="sql-mode.html#sqlmode_ansi_quotes"><code class="literal">ANSI_QUOTES</code></a> SQL mode is
            enabled.
          </p><p>
            The <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client parser does not take the
            <code class="literal">ANSI_QUOTES</code> SQL mode into account. It
            treats strings delimited by <code class="literal">&#34;</code>,
            <code class="literal">&#39;</code>, and <code class="literal">`</code> characters
            the same, regardless of whether
            <a class="link" href="sql-mode.html#sqlmode_ansi_quotes"><code class="literal">ANSI_QUOTES</code></a> is enabled.
          </p></li><li class="listitem"><p>
            Within <code class="literal">/*! ... */</code> and <code class="literal">/*+ ...
            */</code> comments, the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client
            parser interprets short-form <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
            commands. The server parser does not interpret them because
            these commands have no meaning on the server side.
          </p><p>
            If it is desirable for <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> not to
            interpret short-form commands within comments, a partial
            workaround is to use the
            <a class="link" href="mysql-command-options.html#option_mysql_binary-mode"><code class="option">--binary-mode</code></a> option, which
            causes all <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> commands to be disabled
            except <code class="literal">\C</code> and <code class="literal">\d</code> in
            noninteractive mode (for input piped to
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> or loaded using the
            <code class="literal">source</code> command).
          </p></li></ul></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-batch-commands.html">Previous <span class="navHint"> Executing SQL Statements from a Text File </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="mysql.html">Up <span class="navHint"> mysql &mdash; The MySQL Command-Line Client </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysqladmin.html">Next <span class="navHint"> mysqladmin &mdash; A MySQL Server Administration Program </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>