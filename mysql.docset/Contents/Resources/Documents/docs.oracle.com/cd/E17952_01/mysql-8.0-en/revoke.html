<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-3840"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/13.7.1.8%C2%A0REVOKE%20Statement"></a><title>13.7.1.8&nbsp;REVOKE Statement</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="account-management-statements.html" title="13.7.1&nbsp;Account Management Statements"/><link rel="prev" href="rename-user.html" title="13.7.1.7&nbsp;RENAME USER Statement"/><link rel="next" href="set-default-role.html" title="13.7.1.9&nbsp;SET DEFAULT ROLE Statement"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="revoke.html#revoke">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="rename-user.html">Previous <span class="navHint"> RENAME USER Statement </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="account-management-statements.html">Up <span class="navHint"> Account Management Statements </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="set-default-role.html">Next <span class="navHint"> SET DEFAULT ROLE Statement </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-3839"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/13.7.1.8%C2%A0REVOKE%20Statement"></a><h4 class="title"><a id="revoke"></a>13.7.1.8&nbsp;REVOKE Statement</h4></div></div></div><a id="idm45828898530432" class="indexterm"></a><a id="idm45828898529360" class="indexterm"></a><a id="idm45828898528320" class="indexterm"></a><a id="idm45828898526832" class="indexterm"></a><a id="idm45828898525760" class="indexterm"></a><a id="idm45828898524272" class="indexterm"></a><a id="idm45828898522784" class="indexterm"></a><pre class="programlisting">REVOKE [IF EXISTS]
    <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
      [, <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]] ...
    ON [<em class="replaceable"><code>object_type</code></em>] <em class="replaceable"><code>priv_level</code></em>
    FROM <em class="replaceable"><code>user_or_role</code></em> [, <em class="replaceable"><code>user_or_role</code></em>] ...
    [IGNORE UNKNOWN USER]

REVOKE [IF EXISTS] ALL [PRIVILEGES], GRANT OPTION
    FROM <em class="replaceable"><code>user_or_role</code></em> [, <em class="replaceable"><code>user_or_role</code></em>] ...
    [IGNORE UNKNOWN USER]

REVOKE [IF EXISTS] PROXY ON <em class="replaceable"><code>user_or_role</code></em>
    FROM <em class="replaceable"><code>user_or_role</code></em> [, <em class="replaceable"><code>user_or_role</code></em>] ...
    [IGNORE UNKNOWN USER]

REVOKE [IF EXISTS] <em class="replaceable"><code>role</code></em> [, <em class="replaceable"><code>role</code></em> ] ...
    FROM <em class="replaceable"><code>user_or_role</code></em> [, <em class="replaceable"><code>user_or_role</code></em> ] ...
    [IGNORE UNKNOWN USER]

<em class="replaceable"><code>user_or_role</code></em>: {
    <em class="replaceable"><code>user</code></em> (see <a class="xref" href="account-names.html" title="6.2.4&nbsp;Specifying Account Names">Section&nbsp;6.2.4, &ldquo;Specifying Account Names&rdquo;</a>)
  | <em class="replaceable"><code>role</code></em> (see <a class="xref" href="role-names.html" title="6.2.5&nbsp;Specifying Role Names">Section&nbsp;6.2.5, &ldquo;Specifying Role Names&rdquo;</a>
}
</pre><p>
        The <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> statement enables
        system administrators to revoke privileges and roles, which can
        be revoked from user accounts and roles.
      </p><p>
        For details on the levels at which privileges exist, the
        permissible <em class="replaceable"><code>priv_type</code></em>,
        <em class="replaceable"><code>priv_level</code></em>, and
        <em class="replaceable"><code>object_type</code></em> values, and the syntax
        for specifying users and passwords, see <a class="xref" href="grant.html" title="13.7.1.6&nbsp;GRANT Statement">Section&nbsp;13.7.1.6, &ldquo;GRANT Statement&rdquo;</a>.
      </p><p>
        For information about roles, see <a class="xref" href="roles.html" title="6.2.10&nbsp;Using Roles">Section&nbsp;6.2.10, &ldquo;Using Roles&rdquo;</a>.
      </p><p>
        When the <a class="link" href="server-system-variables.html#sysvar_read_only"><code class="literal">read_only</code></a> system
        variable is enabled, <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a>
        requires the <a class="link" href="privileges-provided.html#priv_connection-admin"><code class="literal">CONNECTION_ADMIN</code></a> or
        privilege (or the deprecated
        <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a> privilege), in addition to
        any other required privileges described in the following
        discussion.
      </p><p>
        Beginning with MySQL 8.0.30, all the forms shown for
        <code class="literal">REVOKE</code> support an <code class="literal">IF
        EXISTS</code> option as well as an <code class="literal">IGNORE UNKNOWN
        USER</code> option. With neither of these modifications,
        <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> either succeeds for all
        named users and roles, or rolls back and has no effect if any
        error occurs; the statement is written to the binary log only if
        it succeeds for all named users and roles. The precise effects
        of <code class="literal">IF EXISTS</code> and <code class="literal">IGNORE UNKNOWN
        USER</code> are discussed later in this section.
      </p><p>
        Each account name uses the format described in
        <a class="xref" href="account-names.html" title="6.2.4&nbsp;Specifying Account Names">Section&nbsp;6.2.4, &ldquo;Specifying Account Names&rdquo;</a>. Each role name uses the format
        described in <a class="xref" href="role-names.html" title="6.2.5&nbsp;Specifying Role Names">Section&nbsp;6.2.5, &ldquo;Specifying Role Names&rdquo;</a>. For example:
      </p><pre class="programlisting">REVOKE INSERT ON *.* FROM &#39;jeffrey&#39;@&#39;localhost&#39;;
REVOKE &#39;role1&#39;, &#39;role2&#39; FROM &#39;user1&#39;@&#39;localhost&#39;, &#39;user2&#39;@&#39;localhost&#39;;
REVOKE SELECT ON world.* FROM &#39;role3&#39;;
</pre><p>
        The host name part of the account or role name, if omitted,
        defaults to <code class="literal">&#39;%&#39;</code>.
      </p><p>
        To use the first <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> syntax,
        you must have the <a class="link" href="privileges-provided.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
        privilege, and you must have the privileges that you are
        revoking.
      </p><p>
        To revoke all privileges, use the second syntax, which drops all
        global, database, table, column, and routine privileges for the
        named users or roles:
      </p><pre class="programlisting">REVOKE ALL PRIVILEGES, GRANT OPTION
  FROM <em class="replaceable"><code>user_or_role</code></em> [, <em class="replaceable"><code>user_or_role</code></em>] ...
</pre><p>
        <code class="literal">REVOKE ALL PRIVILEGES, GRANT OPTION</code> does not
        revoke any roles.
      </p><p>
        To use this <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> syntax, you
        must have the global <a class="link" href="privileges-provided.html#priv_create-user"><code class="literal">CREATE USER</code></a>
        privilege, or the <a class="link" href="privileges-provided.html#priv_update"><code class="literal">UPDATE</code></a>
        privilege for the <code class="literal">mysql</code> system schema.
      </p><p>
        The syntax for which the <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a>
        keyword is followed by one or more role names takes a
        <code class="literal">FROM</code> clause indicating one or more users or
        roles from which to revoke the roles.
      </p><p>
        The <code class="literal">IF EXISTS</code> and <code class="literal">IGNORE UNKNOWN
        USER</code> options (MySQL 8.0.30 and later) have the effects
        listed here:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">IF EXISTS</code> means that, if the target user
            or role exists but no such privilege or role is found
            assigned to the target for any reason, a warning is raised,
            instead of an error; if no privilege or role named by the
            statement is assigned to the target, the statement has no
            (other) effect. Otherwise, <code class="literal">REVOKE</code>
            executes normally; if the user does not exist, the statement
            raises an error.
          </p><p>
            <span class="emphasis"><em>Example</em></span>: Given table
            <code class="literal">t1</code> in database <code class="literal">test</code>,
            we execute the following statements, with the results shown.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER jerry@localhost;</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>REVOKE SELECT ON test.t1 FROM jerry@localhost;</code></strong>
ERROR 1147 (42000): There is no such grant defined for user &#39;jerry&#39; on host
&#39;localhost&#39; on table &#39;t1&#39; 
mysql&gt; <strong class="userinput"><code>REVOKE IF EXISTS SELECT ON test.t1 FROM jerry@localhost;</code></strong>
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1147
Message: There is no such grant defined for user &#39;jerry&#39; on host &#39;localhost&#39; on
table &#39;t1&#39; 
1 row in set (0.00 sec)
</pre><p>
            <code class="literal">IF EXISTS</code> causes an error to be demoted
            to a warning even if the privilege or role named does not
            exist, or the statement attempts to assign it at the wrong
            level.
          </p></li><li class="listitem"><p>
            If the <code class="literal">REVOKE</code> statement includes
            <code class="literal">IGNORE UNKNOWN USER</code>, the statement raises
            a warning for any target user or role named in the statement
            but not found; if no target named by the statement exists,
            <code class="literal">REVOKE</code> succeeds but has no actual effect.
            Otherwise, the statement executes as usual, and attempting
            to revoke a privilege not assigned to the target for
            whatever reason raises an error, as expected.
          </p><p>
            <span class="emphasis"><em>Example</em></span> (continuing from the previous
            example):
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DROP USER IF EXISTS jerry@localhost;</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>REVOKE SELECT ON test.t1 FROM jerry@localhost;</code></strong>
ERROR 1147 (42000): There is no such grant defined for user &#39;jerry&#39; on host
&#39;localhost&#39; on table &#39;t1&#39; 
mysql&gt; <strong class="userinput"><code>REVOKE SELECT ON test.t1 FROM jerry@localhost IGNORE UNKNOWN USER;</code></strong>
Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 3162
Message: Authorization ID jerry does not exist.
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p>
            The combination of <code class="literal">IF EXISTS</code> and
            <code class="literal">IGNORE UNKNOWN USER</code> means that
            <code class="literal">REVOKE</code> never raises an error for an
            unknown target user or role or for an unassigned or
            unavailable privilege, and the statement as whole in such
            cases succeeds; roles or privileges are removed from
            existing target users or roles whenever possible, and any
            revocation which is not possible raises a warning and
            executes as a <code class="literal">NOOP</code>.
          </p><p>
            <span class="emphasis"><em>Example</em></span> (again continuing from example
            in the previous item):
          </p><pre class="programlisting"># No such user, no such role
mysql&gt; <strong class="userinput"><code>DROP ROLE IF EXISTS Bogus;</code></strong>
Query OK, 0 rows affected, 1 warning (0.02 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+-------+------+----------------------------------------------+
| Level | Code | Message                                      |
+-------+------+----------------------------------------------+
| Note  | 3162 | Authorization ID &#39;Bogus&#39;@&#39;%&#39; does not exist. |
+-------+------+----------------------------------------------+
1 row in set (0.00 sec)

# This statement attempts to revoke a nonexistent role from a nonexistent user
mysql&gt; <strong class="userinput"><code>REVOKE Bogus ON test FROM jerry@localhost;</code></strong>
ERROR 3619 (HY000): Illegal privilege level specified for test

# The same, with IF EXISTS
mysql&gt; <strong class="userinput"><code>REVOKE IF EXISTS Bogus ON test FROM jerry@localhost;</code></strong>
ERROR 1147 (42000): There is no such grant defined for user &#39;jerry&#39; on host
&#39;localhost&#39; on table &#39;test&#39; 

# The same, with IGNORE UNKNOWN USER
mysql&gt; <strong class="userinput"><code>REVOKE Bogus ON test FROM jerry@localhost IGNORE UNKNOWN USER;</code></strong>
ERROR 3619 (HY000): Illegal privilege level specified for test

# The same, with both options
mysql&gt; <strong class="userinput"><code>REVOKE IF EXISTS Bogus ON test FROM jerry@localhost IGNORE UNKNOWN USER;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+--------------------------------------------+
| Level   | Code | Message                                    |
+---------+------+--------------------------------------------+
| Warning | 3619 | Illegal privilege level specified for test |
| Warning | 3162 | Authorization ID jerry does not exist.     |
+---------+------+--------------------------------------------+
2 rows in set (0.00 sec)
</pre></li></ul></div><p>
        Roles named in the
        <a class="link" href="server-system-variables.html#sysvar_mandatory_roles"><code class="literal">mandatory_roles</code></a> system variable
        value cannot be revoked. When <code class="literal">IF EXISTS</code> and
        <code class="literal">IGNORE UNKNOWN USER</code> are used together in a
        statement that tries to remove a mandatory privilege, the error
        normally raised by attempting to do this is demoted to a
        warning; the statement executes successfully, but does not make
        any changes.
      </p><p>
        A revoked role immediately affects any user account from which
        it was revoked, such that within any current session for the
        account, its privileges are adjusted for the next statement
        executed.
      </p><p>
        Revoking a role revokes the role itself, not the privileges that
        it represents. Suppose that an account is granted a role that
        includes a given privilege, and is also granted the privilege
        explicitly or another role that includes the privilege. In this
        case, the account still possesses that privilege if the first
        role is revoked. For example, if an account is granted two roles
        that each include <a class="link" href="privileges-provided.html#priv_select"><code class="literal">SELECT</code></a>, the
        account still can select after either role is revoked.
      </p><p>
        <code class="literal">REVOKE ALL ON *.*</code> (at the global level)
        revokes all granted static global privileges and all granted
        dynamic privileges.
      </p><p>
        A revoked privilege that is granted but not known to the server
        is revoked with a warning. This situation can occur for dynamic
        privileges. For example, a dynamic privilege can be granted
        while the component that registers it is installed, but if that
        component is subsequently uninstalled, the privilege becomes
        unregistered, although accounts that possess the privilege still
        possess it and it can be revoked from them.
      </p><p>
        <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> removes privileges, but
        does not remove rows from the <code class="literal">mysql.user</code>
        system table. To remove a user account entirely, use
        <a class="link" href="drop-user.html" title="13.7.1.5&nbsp;DROP USER Statement"><code class="literal">DROP USER</code></a>. See
        <a class="xref" href="drop-user.html" title="13.7.1.5&nbsp;DROP USER Statement">Section&nbsp;13.7.1.5, &ldquo;DROP USER Statement&rdquo;</a>.
      </p><p>
        If the grant tables hold privilege rows that contain mixed-case
        database or table names and the
        <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable is set to a nonzero value,
        <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> cannot be used to revoke
        these privileges. It is necessary in such cases to manipulate
        the grant tables directly. (<a class="link" href="grant.html" title="13.7.1.6&nbsp;GRANT Statement"><code class="literal">GRANT</code></a>
        does not create such rows when
        <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> is set,
        but such rows might have been created prior to setting the
        variable. The
        <a class="link" href="server-system-variables.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> setting
        can only be configured when initializing the server.)
      </p><p>
        When successfully executed from the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        program, <a class="link" href="revoke.html" title="13.7.1.8&nbsp;REVOKE Statement"><code class="literal">REVOKE</code></a> responds with
        <code class="literal">Query OK, 0 rows affected</code>. To determine what
        privileges remain after the operation, use
        <a class="link" href="show-grants.html" title="13.7.7.21&nbsp;SHOW GRANTS Statement"><code class="literal">SHOW GRANTS</code></a>. See
        <a class="xref" href="show-grants.html" title="13.7.7.21&nbsp;SHOW GRANTS Statement">Section&nbsp;13.7.7.21, &ldquo;SHOW GRANTS Statement&rdquo;</a>.
      </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="rename-user.html">Previous <span class="navHint"> RENAME USER Statement </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="account-management-statements.html">Up <span class="navHint"> Account Management Statements </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="set-default-role.html">Next <span class="navHint"> SET DEFAULT ROLE Statement </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>