<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-4316"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/28.1%C2%A0Prerequisites%20for%20Using%20the%20sys%20Schema"></a><title>28.1&nbsp;Prerequisites for Using the sys Schema</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"/><link rel="prev" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"/><link rel="next" href="sys-schema-usage.html" title="28.2&nbsp;Using the sys Schema"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="sys-schema-prerequisites.html#sys-schema-prerequisites">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="sys-schema.html">Previous <span class="navHint"> MySQL sys Schema </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="sys-schema.html">Up <span class="navHint"> MySQL sys Schema </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="sys-schema-usage.html">Next <span class="navHint"> Using the sys Schema </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sys-schema-prerequisites"></a>28.1&nbsp;Prerequisites for Using the sys Schema</h2></div></div></div><p>
      Before using the <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema, the
      prerequisites described in this section must be satisfied.
    </p><p>
      Because the <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema provides an
      alternative means of accessing the Performance Schema, the
      Performance Schema must be enabled for the
      <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema to work. See
      <a class="xref" href="performance-schema-startup-configuration.html" title="27.3&nbsp;Performance Schema Startup Configuration">Section&nbsp;27.3, &ldquo;Performance Schema Startup Configuration&rdquo;</a>.
    </p><p>
      For full access to the <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema, a
      user must have these privileges:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="privileges-provided.html#priv_select"><code class="literal">SELECT</code></a> on all
          <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> tables and views
        </p></li><li class="listitem"><p>
          <a class="link" href="privileges-provided.html#priv_execute"><code class="literal">EXECUTE</code></a> on all
          <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> stored procedures and
          functions
        </p></li><li class="listitem"><p>
          <a class="link" href="privileges-provided.html#priv_insert"><code class="literal">INSERT</code></a> and
          <a class="link" href="privileges-provided.html#priv_update"><code class="literal">UPDATE</code></a> for the
          <a class="link" href="sys-sys-config.html" title="28.4.2.1&nbsp;The sys_config Table"><code class="literal">sys_config</code></a> table, if changes are
          to be made to it
        </p></li><li class="listitem"><p>
          Additional privileges for certain
          <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema stored procedures and
          functions, as noted in their descriptions (for example, the
          <a class="link" href="sys-ps-setup-save.html" title="28.4.4.14&nbsp;The ps_setup_save() Procedure"><code class="literal">ps_setup_save()</code></a> procedure)
        </p></li></ul></div><p>
      It is also necessary to have privileges for the objects underlying
      the <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema objects:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="privileges-provided.html#priv_select"><code class="literal">SELECT</code></a> on any Performance
          Schema tables accessed by <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a>
          schema objects, and <a class="link" href="privileges-provided.html#priv_update"><code class="literal">UPDATE</code></a> for
          any tables to be updated using
          <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema objects
        </p></li><li class="listitem"><p>
          <a class="link" href="privileges-provided.html#priv_process"><code class="literal">PROCESS</code></a> for the
          <code class="literal">INFORMATION_SCHEMA</code>
          <a class="link" href="information-schema-innodb-buffer-page-table.html" title="26.4.2&nbsp;The INFORMATION_SCHEMA INNODB_BUFFER_PAGE Table"><code class="literal">INNODB_BUFFER_PAGE</code></a> table
        </p></li></ul></div><p>
      Certain Performance Schema instruments and consumers must be
      enabled and (for instruments) timed to take full advantage of
      <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema capabilities:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          All <code class="literal">wait</code> instruments
        </p></li><li class="listitem"><p>
          All <code class="literal">stage</code> instruments
        </p></li><li class="listitem"><p>
          All <code class="literal">statement</code> instruments
        </p></li><li class="listitem"><p>
          <code class="literal"><em class="replaceable"><code>xxx</code></em>_current</code> and
          <code class="literal"><em class="replaceable"><code>xxx</code></em>_history_long</code>
          consumers for all events
        </p></li></ul></div><p>
      You can use the <a class="link" href="sys-schema.html" title="Chapter&nbsp;28&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema itself to
      enable all of the additional instruments and consumers:
    </p><pre class="programlisting">CALL sys.ps_setup_enable_instrument(&#39;wait&#39;);
CALL sys.ps_setup_enable_instrument(&#39;stage&#39;);
CALL sys.ps_setup_enable_instrument(&#39;statement&#39;);
CALL sys.ps_setup_enable_consumer(&#39;current&#39;);
CALL sys.ps_setup_enable_consumer(&#39;history_long&#39;);
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
        For many uses of the <code class="literal">sys</code> schema, the default
        Performance Schema is sufficient for data collection. Enabling
        all the instruments and consumers just mentioned has a
        performance impact, so it is preferable to enable only the
        additional configuration you need. Also, remember that if you
        enable additional configuration, you can easily restore the
        default configuration like this:
      </p><pre class="programlisting">CALL sys.ps_setup_reset_to_default(TRUE);
</pre></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="sys-schema.html">Previous <span class="navHint"> MySQL sys Schema </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="sys-schema.html">Up <span class="navHint"> MySQL sys Schema </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="sys-schema-usage.html">Next <span class="navHint"> Using the sys Schema </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>