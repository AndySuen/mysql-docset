<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2177"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/23.6.10%C2%A0MySQL%20Server%20Usage%20for%20NDB%20Cluster"></a><title>23.6.10&nbsp;MySQL Server Usage for NDB Cluster</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="mysql-cluster-management.html" title="23.6&nbsp;Management of NDB Cluster"/><link rel="prev" href="mysql-cluster-importing-data.html" title="23.6.9&nbsp;Importing Data Into MySQL Cluster"/><link rel="next" href="mysql-cluster-disk-data.html" title="23.6.11&nbsp;NDB Cluster Disk Data Tables"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="mysql-cluster-mysqld.html#mysql-cluster-mysqld">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="mysql-cluster-importing-data.html">Previous <span class="navHint"> Importing Data Into MySQL Cluster </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="mysql-cluster-management.html">Up <span class="navHint"> Management of NDB Cluster </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="mysql-cluster-disk-data.html">Next <span class="navHint"> NDB Cluster Disk Data Tables </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql-cluster-mysqld"></a>23.6.10&nbsp;MySQL Server Usage for NDB Cluster</h3></div></div></div><a id="idm45828809158320" class="indexterm"></a><a id="idm45828809156864" class="indexterm"></a><a id="idm45828809155376" class="indexterm"></a><a id="idm45828809153888" class="indexterm"></a><a id="idm45828809152816" class="indexterm"></a><p>
      <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is the traditional MySQL server process.
      To be used with NDB Cluster, <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> needs to be
      built with support for the <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>
      storage engine, as it is in the precompiled binaries available
      from <a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a>. If you build MySQL from
      source, you must invoke <span class="command"><strong>CMake</strong></span> with the
      <a class="link" href="source-configuration-options.html#option_cmake_with_ndb"><code class="option">-DWITH_NDB=1</code></a> or (deprecated)
      <a class="link" href="source-configuration-options.html#option_cmake_with_ndbcluster"><code class="option">-DWITH_NDBCLUSTER=1</code></a> option to
      include support for <code class="literal">NDB</code>.
    </p><p>
      For more information about compiling NDB Cluster from source, see
      <a class="xref" href="mysql-cluster-install-linux-source.html" title="23.3.1.4&nbsp;Building NDB Cluster from Source on Linux">Section&nbsp;23.3.1.4, &ldquo;Building NDB Cluster from Source on Linux&rdquo;</a>, and
      <a class="xref" href="mysql-cluster-install-windows-source.html" title="23.3.2.2&nbsp;Compiling and Installing NDB Cluster from Source on Windows">Section&nbsp;23.3.2.2, &ldquo;Compiling and Installing NDB Cluster from Source on Windows&rdquo;</a>.
    </p><p>
      (For information about <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and
      variables, in addition to those discussed in this section, which
      are relevant to NDB Cluster, see
      <a class="xref" href="mysql-cluster-options-variables.html" title="23.4.3.9&nbsp;MySQL Server Options and Variables for NDB Cluster">Section&nbsp;23.4.3.9, &ldquo;MySQL Server Options and Variables for NDB Cluster&rdquo;</a>.)
    </p><p>
      If the <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary has been built with
      Cluster support, the <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>
      storage engine is still disabled by default. You can use either of
      two possible options to enable this engine:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Use <a class="link" href="mysql-cluster-options-variables.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> as a startup
          option on the command line when starting
          <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
        </p></li><li class="listitem"><p>
          Insert a line containing <code class="literal">ndbcluster</code> in the
          <code class="literal">[mysqld]</code> section of your
          <code class="filename">my.cnf</code> file.
        </p></li></ul></div><p>
      An easy way to verify that your server is running with the
      <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a> storage engine enabled is
      to issue the <a class="link" href="show-engines.html" title="13.7.7.16&nbsp;SHOW ENGINES Statement"><code class="literal">SHOW ENGINES</code></a> statement
      in the MySQL Monitor (<a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>). You should see
      the value <code class="literal">YES</code> as the <code class="literal">Support</code>
      value in the row for <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDBCLUSTER</code></a>. If
      you see <code class="literal">NO</code> in this row or if there is no such
      row displayed in the output, you are not running an
      <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a>-enabled version of MySQL. If you
      see <code class="literal">DISABLED</code> in this row, you need to enable it
      in either one of the two ways just described.
    </p><a id="idm45828809119504" class="indexterm"></a><a id="idm45828809118016" class="indexterm"></a><a id="idm45828809116944" class="indexterm"></a><p>
      To read cluster configuration data, the MySQL server requires at a
      minimum three pieces of information:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The MySQL server&#39;s own cluster node ID
        </p></li><li class="listitem"><p>
          The host name or IP address for the management server
        </p></li><li class="listitem"><p>
          The number of the TCP/IP port on which it can connect to the
          management server
        </p></li></ul></div><p>
      Node IDs can be allocated dynamically, so it is not strictly
      necessary to specify them explicitly.
    </p><p>
      The <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> parameter
      <code class="literal">ndb-connectstring</code> is used to specify the
      connection string either on the command line when starting
      <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> or in <code class="filename">my.cnf</code>. The
      connection string contains the host name or IP address where the
      management server can be found, as well as the TCP/IP port it
      uses.
    </p><p>
      In the following example, <code class="literal">ndb_mgmd.mysql.com</code> is
      the host where the management server resides, and the management
      server listens for cluster messages on port 1186:
    </p><pre class="programlisting">$&gt; <strong class="userinput"><code>mysqld --ndbcluster --ndb-connectstring=ndb_mgmd.mysql.com:1186</code></strong>
</pre><p>
      See <a class="xref" href="mysql-cluster-connection-strings.html" title="23.4.3.3&nbsp;NDB Cluster Connection Strings">Section&nbsp;23.4.3.3, &ldquo;NDB Cluster Connection Strings&rdquo;</a>, for more
      information on connection strings.
    </p><p>
      Given this information, the MySQL server can act as a full
      participant in the cluster. (We often refer to a
      <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> process running in this manner as an SQL
      node.) It is fully aware of all cluster data nodes as well as
      their status, and establishes connections to all data nodes. In
      this case, it is able to use any data node as a transaction
      coordinator and to read and update node data.
    </p><p>
      You can see in the <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client whether a MySQL
      server is connected to the cluster using <a class="link" href="show-processlist.html" title="13.7.7.29&nbsp;SHOW PROCESSLIST Statement"><code class="literal">SHOW
      PROCESSLIST</code></a>. If the MySQL server is connected to the
      cluster, and you have the <a class="link" href="privileges-provided.html#priv_process"><code class="literal">PROCESS</code></a>
      privilege, then the first row of the output is as shown here:
    </p><pre class="programlisting">mysql&gt; SHOW PROCESSLIST \G
*************************** 1. row ***************************
     Id: 1
   User: system user
   Host:
     db:
Command: Daemon
   Time: 1
  State: Waiting for event from ndbcluster
   Info: NULL
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Important</div><p>
        To participate in an NDB Cluster, the <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        process must be started with <span class="emphasis"><em>both</em></span> the
        options <a class="link" href="mysql-cluster-options-variables.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> and
        <a class="link" href="mysql-cluster-options-variables.html#option_mysqld_ndb-connectstring"><code class="option">--ndb-connectstring</code></a> (or their
        equivalents in <code class="filename">my.cnf</code>). If
        <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is started with only the
        <a class="link" href="mysql-cluster-options-variables.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option, or if it is
        unable to contact the cluster, it is not possible to work with
        <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables, <span class="emphasis"><em>nor is it
        possible to create any new tables regardless of storage
        engine</em></span>. The latter restriction is a safety measure
        intended to prevent the creation of tables having the same names
        as <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> tables while the SQL node is
        not connected to the cluster. If you wish to create tables using
        a different storage engine while the <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
        process is not participating in an NDB Cluster, you must restart
        the server <span class="emphasis"><em>without</em></span> the
        <a class="link" href="mysql-cluster-options-variables.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option.
      </p></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="mysql-cluster-importing-data.html">Previous <span class="navHint"> Importing Data Into MySQL Cluster </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="mysql-cluster-management.html">Up <span class="navHint"> Management of NDB Cluster </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="mysql-cluster-disk-data.html">Next <span class="navHint"> NDB Cluster Disk Data Tables </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>