<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-2938"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/6.4.1.9%C2%A0No-Login%20Pluggable%20Authentication"></a><title>6.4.1.9&nbsp;No-Login Pluggable Authentication</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="authentication-plugins.html" title="6.4.1&nbsp;Authentication Plugins"/><link rel="prev" href="kerberos-pluggable-authentication.html" title="6.4.1.8&nbsp;Kerberos Pluggable Authentication"/><link rel="next" href="socket-pluggable-authentication.html" title="6.4.1.10&nbsp;Socket Peer-Credential Pluggable Authentication"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="no-login-pluggable-authentication.html#no-login-pluggable-authentication">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="kerberos-pluggable-authentication.html">Previous <span class="navHint"> Kerberos Pluggable Authentication </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="authentication-plugins.html">Up <span class="navHint"> Authentication Plugins </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="socket-pluggable-authentication.html">Next <span class="navHint"> Socket Peer-Credential Pluggable Authentication </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-2937"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.1.9%C2%A0No-Login%20Pluggable%20Authentication"></a><h4 class="title"><a id="no-login-pluggable-authentication"></a>6.4.1.9&nbsp;No-Login Pluggable Authentication</h4></div></div></div><a id="idm45828971865072" class="indexterm"></a><a id="idm45828971863984" class="indexterm"></a><p>
        The <code class="literal">mysql_no_login</code> server-side authentication
        plugin prevents all client connections to any account that uses
        it. Use cases for this plugin include:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Accounts that must be able to execute stored programs and
            views with elevated privileges without exposing those
            privileges to ordinary users.
          </p></li><li class="listitem"><p>
            Proxied accounts that should never permit direct login but
            are intended to be accessed only through proxy accounts.
          </p></li></ul></div><p>
        The following table shows the plugin and library file names. The
        file name suffix might differ on your system. The file must be
        located in the directory named by the
        <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
      </p><div class="table"><a id="idm45828971857088"></a><p class="title"><strong>Table&nbsp;6.25&nbsp;Plugin and Library Names for No-Login Authentication</strong></p><div class="table-contents"><table summary="Names for the plugins and library file used for no-login password authentication."><colgroup><col style="width: 30%"/><col style="width: 70%"/></colgroup><thead><tr>
            <th>Plugin or File</th>
            <th>Plugin or File Name</th>
          </tr></thead><tbody><tr>
            <td>Server-side plugin</td>
            <td><code class="literal">mysql_no_login</code></td>
          </tr><tr>
            <td>Client-side plugin</td>
            <td>None</td>
          </tr><tr>
            <td>Library file</td>
            <td><code class="filename">mysql_no_login.so</code></td>
          </tr></tbody></table></div></div><br class="table-break"/><p>
        The following sections provide installation and usage
        information specific to no-login pluggable authentication:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="no-login-pluggable-authentication.html#no-login-pluggable-authentication-installation" title="Installing No-Login Pluggable Authentication">Installing No-Login Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="no-login-pluggable-authentication.html#no-login-pluggable-authentication-uninstallation" title="Uninstalling No-Login Pluggable Authentication">Uninstalling No-Login Pluggable Authentication</a></p></li><li class="listitem"><p><a class="xref" href="no-login-pluggable-authentication.html#no-login-pluggable-authentication-usage" title="Using No-Login Pluggable Authentication">Using No-Login Pluggable Authentication</a></p></li></ul></div><p>
        For general information about pluggable authentication in MySQL,
        see <a class="xref" href="pluggable-authentication.html" title="6.2.17&nbsp;Pluggable Authentication">Section&nbsp;6.2.17, &ldquo;Pluggable Authentication&rdquo;</a>. For proxy user
        information, see <a class="xref" href="proxy-users.html" title="6.2.19&nbsp;Proxy Users">Section&nbsp;6.2.19, &ldquo;Proxy Users&rdquo;</a>.
      </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="no-login-pluggable-authentication-installation"></a>Installing No-Login Pluggable Authentication</h5></div></div></div><p>
          This section describes how to install the no-login
          authentication plugin. For general information about
          installing plugins, see <a class="xref" href="plugin-loading.html" title="5.6.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.6.1, &ldquo;Installing and Uninstalling Plugins&rdquo;</a>.
        </p><p>
          To be usable by the server, the plugin library file must be
          located in the MySQL plugin directory (the directory named by
          the <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
          variable). If necessary, configure the plugin directory
          location by setting the value of
          <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
        </p><p>
          The plugin library file base name is
          <code class="literal">mysql_no_login</code>. The file name suffix
          differs per platform (for example, <code class="filename">.so</code>
          for Unix and Unix-like systems, <code class="filename">.dll</code> for
          Windows).
        </p><p>
          To load the plugin at server startup, use the
          <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
          name the library file that contains it. With this
          plugin-loading method, the option must be given each time the
          server starts. For example, put these lines in the server
          <code class="filename">my.cnf</code> file, adjusting the
          <code class="filename">.so</code> suffix for your platform as
          necessary:
        </p><pre class="programlisting">[mysqld]
plugin-load-add=mysql_no_login.so
</pre><p>
          After modifying <code class="filename">my.cnf</code>, restart the
          server to cause the new settings to take effect.
        </p><p>
          Alternatively, to load the plugin at runtime, use this
          statement, adjusting the <code class="filename">.so</code> suffix for
          your platform as necessary:
        </p><pre class="programlisting">INSTALL PLUGIN mysql_no_login SONAME &#39;mysql_no_login.so&#39;;
</pre><p>
          <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
          immediately, and also registers it in the
          <code class="literal">mysql.plugins</code> system table to cause the
          server to load it for each subsequent normal startup without
          the need for <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
        </p><p>
          To verify plugin installation, examine the Information Schema
          <a class="link" href="information-schema-plugins-table.html" title="26.3.22&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">PLUGINS</code></a> table or use the
          <a class="link" href="show-plugins.html" title="13.7.7.25&nbsp;SHOW PLUGINS Statement"><code class="literal">SHOW PLUGINS</code></a> statement (see
          <a class="xref" href="obtaining-plugin-information.html" title="5.6.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.6.2, &ldquo;Obtaining Server Plugin Information&rdquo;</a>). For example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE &#39;%login%&#39;;</code></strong>
+----------------+---------------+
| PLUGIN_NAME    | PLUGIN_STATUS |
+----------------+---------------+
| mysql_no_login | ACTIVE        |
+----------------+---------------+
</pre><p>
          If the plugin fails to initialize, check the server error log
          for diagnostic messages.
        </p><p>
          To associate MySQL accounts with the no-login plugin, see
          <a class="xref" href="no-login-pluggable-authentication.html#no-login-pluggable-authentication-usage" title="Using No-Login Pluggable Authentication">Using No-Login Pluggable Authentication</a>.
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="no-login-pluggable-authentication-uninstallation"></a>Uninstalling No-Login Pluggable Authentication</h5></div></div></div><p>
          The method used to uninstall the no-login authentication
          plugin depends on how you installed it:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If you installed the plugin at server startup using a
              <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
              restart the server without the option.
            </p></li><li class="listitem"><p>
              If you installed the plugin at runtime using an
              <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> statement,
              it remains installed across server restarts. To uninstall
              it, use <a class="link" href="uninstall-plugin.html" title="13.7.4.6&nbsp;UNINSTALL PLUGIN Statement"><code class="literal">UNINSTALL PLUGIN</code></a>:
            </p><pre class="programlisting">UNINSTALL PLUGIN mysql_no_login;
</pre></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a id="no-login-pluggable-authentication-usage"></a>Using No-Login Pluggable Authentication</h5></div></div></div><p>
          This section describes how to use the no-login authentication
          plugin to prevent accounts from being used for connecting from
          MySQL client programs to the server. It is assumed that the
          server is running with the no-login plugin enabled, as
          described in
          <a class="xref" href="no-login-pluggable-authentication.html#no-login-pluggable-authentication-installation" title="Installing No-Login Pluggable Authentication">Installing No-Login Pluggable Authentication</a>.
        </p><p>
          To refer to the no-login authentication plugin in the
          <code class="literal">IDENTIFIED WITH</code> clause of a
          <a class="link" href="create-user.html" title="13.7.1.3&nbsp;CREATE USER Statement"><code class="literal">CREATE USER</code></a> statement, use the
          name <code class="literal">mysql_no_login</code>.
        </p><p>
          An account that authenticates using
          <code class="literal">mysql_no_login</code> may be used as the
          <code class="literal">DEFINER</code> for stored program and view
          objects. If such an object definition also includes
          <code class="literal">SQL SECURITY DEFINER</code>, it executes with that
          account&#39;s privileges. DBAs can use this behavior to provide
          access to confidential or sensitive data that is exposed only
          through well-controlled interfaces.
        </p><p>
          The following example illustrates these principles. It defines
          an account that does not permit client connections, and
          associates with it a view that exposes only certain columns of
          the <code class="literal">mysql.user</code> system table:
        </p><pre class="programlisting">CREATE DATABASE nologindb;
CREATE USER &#39;nologin&#39;@&#39;localhost&#39;
  IDENTIFIED WITH mysql_no_login;
GRANT ALL ON nologindb.*
  TO &#39;nologin&#39;@&#39;localhost&#39;;
GRANT SELECT ON mysql.user
  TO &#39;nologin&#39;@&#39;localhost&#39;;
CREATE DEFINER = &#39;nologin&#39;@&#39;localhost&#39;
  SQL SECURITY DEFINER
  VIEW nologindb.myview
  AS SELECT User, Host FROM mysql.user;
</pre><p>
          To provide protected access to the view to an ordinary user,
          do this:
        </p><pre class="programlisting">GRANT SELECT ON nologindb.myview
  TO &#39;ordinaryuser&#39;@&#39;localhost&#39;;
</pre><p>
          Now the ordinary user can use the view to access the limited
          information it presents:
        </p><pre class="programlisting">SELECT * FROM nologindb.myview;
</pre><p>
          Attempts by the user to access columns other than those
          exposed by the view result in an error, as do attempts to
          select from the view by users not granted access to it.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            Because the <code class="literal">nologin</code> account cannot be
            used directly, the operations required to set up objects
            that it uses must be performed by <code class="literal">root</code> or
            similar account that has the privileges required to create
            the objects and set <code class="literal">DEFINER</code> values.
          </p></div><p>
          The <code class="literal">mysql_no_login</code> plugin is also useful in
          proxying scenarios. (For a discussion of concepts involved in
          proxying, see <a class="xref" href="proxy-users.html" title="6.2.19&nbsp;Proxy Users">Section&nbsp;6.2.19, &ldquo;Proxy Users&rdquo;</a>.) An account that
          authenticates using <code class="literal">mysql_no_login</code> may be
          used as a proxied user for proxy accounts:
        </p><pre class="programlisting">-- create proxied account
CREATE USER &#39;proxied_user&#39;@&#39;localhost&#39;
  IDENTIFIED WITH mysql_no_login;
-- grant privileges to proxied account
GRANT ...
  ON ...
  TO &#39;proxied_user&#39;@&#39;localhost&#39;;
-- permit proxy_user to be a proxy account for proxied account
GRANT PROXY
  ON &#39;proxied_user&#39;@&#39;localhost&#39;
  TO &#39;proxy_user&#39;@&#39;localhost&#39;;
</pre><p>
          This enables clients to access MySQL through the proxy account
          (<code class="literal">proxy_user</code>) but not to bypass the proxy
          mechanism by connecting directly as the proxied user
          (<code class="literal">proxied_user</code>). A client who connects using
          the <code class="literal">proxy_user</code> account has the privileges
          of the <code class="literal">proxied_user</code> account, but
          <code class="literal">proxied_user</code> itself cannot be used to
          connect.
        </p><p>
          For alternative methods of protecting proxied accounts against
          direct use, see
          <a class="xref" href="proxy-users.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
        </p></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="kerberos-pluggable-authentication.html">Previous <span class="navHint"> Kerberos Pluggable Authentication </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="authentication-plugins.html">Up <span class="navHint"> Authentication Plugins </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="socket-pluggable-authentication.html">Next <span class="navHint"> Socket Peer-Credential Pluggable Authentication </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>