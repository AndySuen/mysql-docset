<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-794"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/A.4%C2%A0MySQL%208.0%20FAQ%3A%20Stored%20Procedures%20and%20Functions"></a><title>A.4&nbsp;MySQL 8.0 FAQ: Stored Procedures and Functions</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="faqs.html" title="Appendix&nbsp;A&nbsp;MySQL 8.0 Frequently Asked Questions"/><link rel="prev" href="faqs-sql-modes.html" title="A.3&nbsp;MySQL 8.0 FAQ: Server SQL Mode"/><link rel="next" href="faqs-triggers.html" title="A.5&nbsp;MySQL 8.0 FAQ: Triggers"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="faqs-stored-procs.html#faqs-stored-procs">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="faqs-sql-modes.html">Previous <span class="navHint"> MySQL 8.0 FAQ: Server SQL Mode </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="faqs.html">Up <span class="navHint"> MySQL 8.0 Frequently Asked Questions </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="faqs-triggers.html">Next <span class="navHint"> MySQL 8.0 FAQ: Triggers </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="faqs-stored-procs"></a>A.4&nbsp;MySQL 8.0 FAQ: Stored Procedures and Functions</h2></div></div></div><div class="qandaset"><a id="idm45828777320368"></a><dl><dt>A.4.1. <a href="faqs-stored-procs.html#faq-mysql-have-procedures-functions">
        Does MySQL 8.0 support stored procedures and
        functions?
      </a></dt><dt>A.4.2. <a href="faqs-stored-procs.html#faq-mysql-where-procedures-functions-docs">
        Where can I find documentation for MySQL stored procedures and
        stored functions?
      </a></dt><dt>A.4.3. <a href="faqs-stored-procs.html#faq-mysql-where-procedures-forum">
        Is there a discussion forum for MySQL stored procedures?
      </a></dt><dt>A.4.4. <a href="faqs-stored-procs.html#faq-mysql-where-ansi-2003-spec">
        Where can I find the ANSI SQL 2003 specification for stored
        procedures?
      </a></dt><dt>A.4.5. <a href="faqs-stored-procs.html#faq-mysql-how-manage-routines">
        How do you manage stored routines?
      </a></dt><dt>A.4.6. <a href="faqs-stored-procs.html#faq-mysql-how-view-procedures-functions">
        Is there a way to view all stored procedures and stored
        functions in a given database?
      </a></dt><dt>A.4.7. <a href="faqs-stored-procs.html#faq-mysql-where-procedures-stored">
        Where are stored procedures stored?
      </a></dt><dt>A.4.8. <a href="faqs-stored-procs.html#faq-mysql-how-group-procedures-functions">
        Is it possible to group stored procedures or stored functions
        into packages?
      </a></dt><dt>A.4.9. <a href="faqs-stored-procs.html#faq-mysql-can-procedure-call-procedure">
        Can a stored procedure call another stored procedure?
      </a></dt><dt>A.4.10. <a href="faqs-stored-procs.html#faq-mysql-can-procedure-call-trigger">
        Can a stored procedure call a trigger?
      </a></dt><dt>A.4.11. <a href="faqs-stored-procs.html#faq-mysql-can-procedure-access-table">
        Can a stored procedure access tables?
      </a></dt><dt>A.4.12. <a href="faqs-stored-procs.html#faq-mysql-can-procedure-raise-error">
        Do stored procedures have a statement for raising application
        errors?
      </a></dt><dt>A.4.13. <a href="faqs-stored-procs.html#faq-mysql-have-exceptions">
        Do stored procedures provide exception handling?
      </a></dt><dt>A.4.14. <a href="faqs-stored-procs.html#faq-mysql-can-routine-results">
        Can MySQL 8.0 stored routines return result sets?
      </a></dt><dt>A.4.15. <a href="faqs-stored-procs.html#faq-mysql-have-with-recompile">
        Is WITH RECOMPILE supported for stored
        procedures?
      </a></dt><dt>A.4.16. <a href="faqs-stored-procs.html#faq-mysql-have-mod-plsql">
        Is there a MySQL equivalent to using
        mod_plsql as a gateway on Apache to talk
        directly to a stored procedure in the database?
      </a></dt><dt>A.4.17. <a href="faqs-stored-procs.html#faq-mysql-can-procedure-array">
        Can I pass an array as input to a stored procedure?
      </a></dt><dt>A.4.18. <a href="faqs-stored-procs.html#faq-mysql-can-pass-cursor-in">
        Can I pass a cursor as an IN parameter to a
        stored procedure?
      </a></dt><dt>A.4.19. <a href="faqs-stored-procs.html#faq-mysql-can-return-cursor-out">
        Can I return a cursor as an OUT parameter
        from a stored procedure?
      </a></dt><dt>A.4.20. <a href="faqs-stored-procs.html#faq-mysql-can-print-var-in-procedure">
        Can I print out a variable&#39;s value within a stored routine for
        debugging purposes?
      </a></dt><dt>A.4.21. <a href="faqs-stored-procs.html#faq-mysql-can-rollback-transaction-procedure">
        Can I commit or roll back transactions inside a stored
        procedure?
      </a></dt><dt>A.4.22. <a href="faqs-stored-procs.html#faq-mysql-can-procedures-replicatation">
        Do MySQL 8.0 stored procedures and functions work
        with replication?
      </a></dt><dt>A.4.23. <a href="faqs-stored-procs.html#faq-mysql-are-procedures-replicated">
        Are stored procedures and functions created on a replication
        source server replicated to a replica?
      </a></dt><dt>A.4.24. <a href="faqs-stored-procs.html#faq-mysql-how-procedures-replicated">
        How are actions that take place inside stored procedures and
        functions replicated?
      </a></dt><dt>A.4.25. <a href="faqs-stored-procs.html#faq-mysql-security-procedures-replication">
        Are there special security requirements for using stored
        procedures and functions together with replication?
      </a></dt><dt>A.4.26. <a href="faqs-stored-procs.html#faq-mysql-limitations-procedures-replication">
        What limitations exist for replicating stored procedure and
        function actions?
      </a></dt><dt>A.4.27. <a href="faqs-stored-procs.html#faq-mysql-limitations-pit-recovery">
        Do the preceding limitations affect the ability of MySQL to do
        point-in-time recovery?
      </a></dt><dt>A.4.28. <a href="faqs-stored-procs.html#faq-mysql-when-limitations-resolved">
        What is being done to correct the aforementioned limitations?
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="faq-mysql-have-procedures-functions"></a><a id="idm45828777319616"></a><p><strong>A.4.1.</strong></p></td><td align="left" valign="top"><p>
        Does MySQL 8.0 support stored procedures and
        functions?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. MySQL 8.0 supports two types of stored
        routines, stored procedures and stored functions.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-where-procedures-functions-docs"></a><a id="idm45828777317488"></a><p><strong>A.4.2.</strong></p></td><td align="left" valign="top"><p>
        Where can I find documentation for MySQL stored procedures and
        stored functions?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        See <a class="xref" href="stored-routines.html" title="25.2&nbsp;Using Stored Routines">Section&nbsp;25.2, &ldquo;Using Stored Routines&rdquo;</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-where-procedures-forum"></a><a id="idm45828777314848"></a><p><strong>A.4.3.</strong></p></td><td align="left" valign="top"><p>
        Is there a discussion forum for MySQL stored procedures?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. See
        <a class="ulink" href="https://forums.mysql.com/list.php?98" target="_top">https://forums.mysql.com/list.php?98</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-where-ansi-2003-spec"></a><a id="idm45828777312032"></a><p><strong>A.4.4.</strong></p></td><td align="left" valign="top"><p>
        Where can I find the ANSI SQL 2003 specification for stored
        procedures?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Unfortunately, the official specifications are not freely
        available (ANSI makes them available for purchase). However,
        there are books, such as <em class="citetitle">SQL-99 Complete,
        Really</em> by Peter Gulutzan and Trudy Pelzer, that
        provide a comprehensive overview of the standard, including
        coverage of stored procedures.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-how-manage-routines"></a><a id="idm45828777309200"></a><p><strong>A.4.5.</strong></p></td><td align="left" valign="top"><p>
        How do you manage stored routines?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        It is always good practice to use a clear naming scheme for your
        stored routines. You can manage stored procedures with
        <code class="literal">CREATE [FUNCTION|PROCEDURE]</code>, <code class="literal">ALTER
        [FUNCTION|PROCEDURE]</code>, <code class="literal">DROP
        [FUNCTION|PROCEDURE]</code>, and <code class="literal">SHOW CREATE
        [FUNCTION|PROCEDURE]</code>. You can obtain information about
        existing stored procedures using the
        <a class="link" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">ROUTINES</code></a> table in the
        <code class="literal">INFORMATION_SCHEMA</code> database (see
        <a class="xref" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table">Section&nbsp;26.3.30, &ldquo;The INFORMATION_SCHEMA ROUTINES Table&rdquo;</a>).
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-how-view-procedures-functions"></a><a id="idm45828777301392"></a><p><strong>A.4.6.</strong></p></td><td align="left" valign="top"><p>
        Is there a way to view all stored procedures and stored
        functions in a given database?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. For a database named <em class="replaceable"><code>dbname</code></em>, use
        this query on the
        <a class="link" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">INFORMATION_SCHEMA.ROUTINES</code></a> table:
      </p><pre class="programlisting">SELECT ROUTINE_TYPE, ROUTINE_NAME
    FROM INFORMATION_SCHEMA.ROUTINES
    WHERE ROUTINE_SCHEMA=&#39;<em class="replaceable"><code>dbname</code></em>&#39;;
</pre><p>
        For more information, see
        <a class="xref" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table">Section&nbsp;26.3.30, &ldquo;The INFORMATION_SCHEMA ROUTINES Table&rdquo;</a>.
      </p><p>
        The body of a stored routine can be viewed using
        <a class="link" href="show-create-function.html" title="13.7.7.8&nbsp;SHOW CREATE FUNCTION Statement"><code class="literal">SHOW CREATE FUNCTION</code></a> (for a
        stored function) or <a class="link" href="show-create-procedure.html" title="13.7.7.9&nbsp;SHOW CREATE PROCEDURE Statement"><code class="literal">SHOW CREATE
        PROCEDURE</code></a> (for a stored procedure). See
        <a class="xref" href="show-create-procedure.html" title="13.7.7.9&nbsp;SHOW CREATE PROCEDURE Statement">Section&nbsp;13.7.7.9, &ldquo;SHOW CREATE PROCEDURE Statement&rdquo;</a>, for more information.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-where-procedures-stored"></a><a id="idm45828777291328"></a><p><strong>A.4.7.</strong></p></td><td align="left" valign="top"><p>
        Where are stored procedures stored?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Stored procedures are stored in the
        <code class="literal">mysql.routines</code> and
        <code class="literal">mysql.parameters</code> tables, which are part of
        the data dictionary. You cannot access these tables directly.
        Instead, query the <code class="literal">INFORMATION_SCHEMA</code>
        <a class="link" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">ROUTINES</code></a> and
        <a class="link" href="information-schema-parameters-table.html" title="26.3.20&nbsp;The INFORMATION_SCHEMA PARAMETERS Table"><code class="literal">PARAMETERS</code></a> tables. See
        <a class="xref" href="information-schema-routines-table.html" title="26.3.30&nbsp;The INFORMATION_SCHEMA ROUTINES Table">Section&nbsp;26.3.30, &ldquo;The INFORMATION_SCHEMA ROUTINES Table&rdquo;</a>, and
        <a class="xref" href="information-schema-parameters-table.html" title="26.3.20&nbsp;The INFORMATION_SCHEMA PARAMETERS Table">Section&nbsp;26.3.20, &ldquo;The INFORMATION_SCHEMA PARAMETERS Table&rdquo;</a>.
      </p><p>
        You can also use <a class="link" href="show-create-function.html" title="13.7.7.8&nbsp;SHOW CREATE FUNCTION Statement"><code class="literal">SHOW CREATE
        FUNCTION</code></a> to obtain information about stored functions,
        and <a class="link" href="show-create-procedure.html" title="13.7.7.9&nbsp;SHOW CREATE PROCEDURE Statement"><code class="literal">SHOW CREATE PROCEDURE</code></a> to
        obtain information about stored procedures. See
        <a class="xref" href="show-create-procedure.html" title="13.7.7.9&nbsp;SHOW CREATE PROCEDURE Statement">Section&nbsp;13.7.7.9, &ldquo;SHOW CREATE PROCEDURE Statement&rdquo;</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-how-group-procedures-functions"></a><a id="idm45828777279408"></a><p><strong>A.4.8.</strong></p></td><td align="left" valign="top"><p>
        Is it possible to group stored procedures or stored functions
        into packages?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        No. This is not supported in MySQL 8.0.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedure-call-procedure"></a><a id="idm45828777277392"></a><p><strong>A.4.9.</strong></p></td><td align="left" valign="top"><p>
        Can a stored procedure call another stored procedure?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedure-call-trigger"></a><a id="idm45828777275360"></a><p><strong>A.4.10.</strong></p></td><td align="left" valign="top"><p>
        Can a stored procedure call a trigger?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        A stored procedure can execute an SQL statement, such as an
        <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a>, that causes a trigger to
        activate.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedure-access-table"></a><a id="idm45828777272064"></a><p><strong>A.4.11.</strong></p></td><td align="left" valign="top"><p>
        Can a stored procedure access tables?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. A stored procedure can access one or more tables as
        required.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedure-raise-error"></a><a id="idm45828777269968"></a><p><strong>A.4.12.</strong></p></td><td align="left" valign="top"><p>
        Do stored procedures have a statement for raising application
        errors?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. MySQL 8.0 implements the SQL standard
        <code class="literal">SIGNAL</code> and <code class="literal">RESIGNAL</code>
        statements. See <a class="xref" href="condition-handling.html" title="13.6.7&nbsp;Condition Handling">Section&nbsp;13.6.7, &ldquo;Condition Handling&rdquo;</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-have-exceptions"></a><a id="idm45828777265728"></a><p><strong>A.4.13.</strong></p></td><td align="left" valign="top"><p>
        Do stored procedures provide exception handling?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL implements <a class="link" href="handler.html" title="13.2.5&nbsp;HANDLER Statement"><code class="literal">HANDLER</code></a>
        definitions according to the SQL standard. See
        <a class="xref" href="declare-handler.html" title="13.6.7.2&nbsp;DECLARE ... HANDLER Statement">Section&nbsp;13.6.7.2, &ldquo;DECLARE ... HANDLER Statement&rdquo;</a>, for details.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-routine-results"></a><a id="idm45828777261728"></a><p><strong>A.4.14.</strong></p></td><td align="left" valign="top"><p>
        Can MySQL 8.0 stored routines return result sets?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="emphasis"><em>Stored procedures</em></span> can, but stored functions
        cannot. If you perform an ordinary
        <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> inside a stored procedure,
        the result set is returned directly to the client. You need to
        use the MySQL 4.1 (or higher) client/server protocol for this to
        work. This means that, for example, in PHP, you need to use the
        <code class="literal">mysqli</code> extension rather than the old
        <code class="literal">mysql</code> extension.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-have-with-recompile"></a><a id="idm45828777256352"></a><p><strong>A.4.15.</strong></p></td><td align="left" valign="top"><p>
        Is <code class="literal">WITH RECOMPILE</code> supported for stored
        procedures?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Not in MySQL 8.0.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-have-mod-plsql"></a><a id="idm45828777253664"></a><p><strong>A.4.16.</strong></p></td><td align="left" valign="top"><p>
        Is there a MySQL equivalent to using
        <code class="literal">mod_plsql</code> as a gateway on Apache to talk
        directly to a stored procedure in the database?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        There is no equivalent in MySQL 8.0.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedure-array"></a><a id="idm45828777250816"></a><p><strong>A.4.17.</strong></p></td><td align="left" valign="top"><p>
        Can I pass an array as input to a stored procedure?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Not in MySQL 8.0.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-pass-cursor-in"></a><a id="idm45828777248832"></a><p><strong>A.4.18.</strong></p></td><td align="left" valign="top"><p>
        Can I pass a cursor as an <code class="literal">IN</code> parameter to a
        stored procedure?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        In MySQL 8.0, cursors are available inside stored
        procedures only.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-return-cursor-out"></a><a id="idm45828777246032"></a><p><strong>A.4.19.</strong></p></td><td align="left" valign="top"><p>
        Can I return a cursor as an <code class="literal">OUT</code> parameter
        from a stored procedure?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        In MySQL 8.0, cursors are available inside stored
        procedures only. However, if you do not open a cursor on a
        <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a>, the result is sent
        directly to the client. You can also <code class="literal">SELECT
        INTO</code> variables. See <a class="xref" href="select.html" title="13.2.13&nbsp;SELECT Statement">Section&nbsp;13.2.13, &ldquo;SELECT Statement&rdquo;</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-print-var-in-procedure"></a><a id="idm45828777240528"></a><p><strong>A.4.20.</strong></p></td><td align="left" valign="top"><p>
        Can I print out a variable&#39;s value within a stored routine for
        debugging purposes?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes, you can do this in a <span class="emphasis"><em>stored procedure</em></span>,
        but not in a stored function. If you perform an ordinary
        <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> inside a stored procedure,
        the result set is returned directly to the client. You must use
        the MySQL 4.1 (or above) client/server protocol for this to
        work. This means that, for example, in PHP, you need to use the
        <code class="literal">mysqli</code> extension rather than the old
        <code class="literal">mysql</code> extension.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-rollback-transaction-procedure"></a><a id="idm45828777234944"></a><p><strong>A.4.21.</strong></p></td><td align="left" valign="top"><p>
        Can I commit or roll back transactions inside a stored
        procedure?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. However, you cannot perform transactional operations within
        a stored function.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-can-procedures-replicatation"></a><a id="idm45828777232864"></a><p><strong>A.4.22.</strong></p></td><td align="left" valign="top"><p>
        Do MySQL 8.0 stored procedures and functions work
        with replication?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes, standard actions carried out in stored procedures and
        functions are replicated from a replication source server to a
        replica. There are a few limitations that are described in
        detail in <a class="xref" href="stored-programs-logging.html" title="25.7&nbsp;Stored Program Binary Logging">Section&nbsp;25.7, &ldquo;Stored Program Binary Logging&rdquo;</a>.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-are-procedures-replicated"></a><a id="idm45828777229984"></a><p><strong>A.4.23.</strong></p></td><td align="left" valign="top"><p>
        Are stored procedures and functions created on a replication
        source server replicated to a replica?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes, creation of stored procedures and functions carried out
        through normal DDL statements on a replication source server are
        replicated to a replica, so that the objects exist on both
        servers. <code class="literal">ALTER</code> and <code class="literal">DROP</code>
        statements for stored procedures and functions are also
        replicated.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-how-procedures-replicated"></a><a id="idm45828777226224"></a><p><strong>A.4.24.</strong></p></td><td align="left" valign="top"><p>
        How are actions that take place inside stored procedures and
        functions replicated?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL records each DML event that occurs in a stored procedure
        and replicates those individual actions to a replica. The actual
        calls made to execute stored procedures are not replicated.
      </p><p>
        Stored functions that change data are logged as function
        invocations, not as the DML events that occur inside each
        function.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-security-procedures-replication"></a><a id="idm45828777223392"></a><p><strong>A.4.25.</strong></p></td><td align="left" valign="top"><p>
        Are there special security requirements for using stored
        procedures and functions together with replication?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Yes. Because a replica has authority to execute any statement
        read from a source&#39;s binary log, special security constraints
        exist for using stored functions with replication. If
        replication or binary logging in general (for the purpose of
        point-in-time recovery) is active, then MySQL DBAs have two
        security options open to them:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              Any user wishing to create stored functions must be
              granted the <a class="link" href="privileges-provided.html#priv_super"><code class="literal">SUPER</code></a>
              privilege.
            </p></li><li class="listitem"><p>
              Alternatively, a DBA can set the
              <a class="link" href="replication-options-binary-log.html#sysvar_log_bin_trust_function_creators"><code class="literal">log_bin_trust_function_creators</code></a>
              system variable to 1, which enables anyone with the
              standard <a class="link" href="privileges-provided.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a>
              privilege to create stored functions.
            </p></li></ol></div><p>
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-limitations-procedures-replication"></a><a id="idm45828777214352"></a><p><strong>A.4.26.</strong></p></td><td align="left" valign="top"><p>
        What limitations exist for replicating stored procedure and
        function actions?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Nondeterministic (random) or time-based actions embedded in
        stored procedures may not replicate properly. By their very
        nature, randomly produced results are not predictable and cannot
        be exactly reproduced; therefore, random actions replicated to a
        replica do not mirror those performed on a source. Declaring
        stored functions to be <code class="literal">DETERMINISTIC</code> or
        setting the
        <a class="link" href="replication-options-binary-log.html#sysvar_log_bin_trust_function_creators"><code class="literal">log_bin_trust_function_creators</code></a>
        system variable to 0 keeps random operations producing random
        values from being invoked.
      </p><p>
        In addition, time-based actions cannot be reproduced on a
        replica because the timing of such actions in a stored procedure
        is not reproducible through the binary log used for replication.
        It records only DML events and does not factor in timing
        constraints.
      </p><p>
        Finally, nontransactional tables for which errors occur during
        large DML actions (such as bulk inserts) may experience
        replication issues in that a source may be partially updated
        from DML activity, but no updates are done to the replica
        because of the errors that occurred. A workaround is for a
        function&#39;s DML actions to be carried out with the
        <code class="literal">IGNORE</code> keyword so that updates on the source
        that cause errors are ignored and updates that do not cause
        errors are replicated to the replica.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-limitations-pit-recovery"></a><a id="idm45828777207456"></a><p><strong>A.4.27.</strong></p></td><td align="left" valign="top"><p>
        Do the preceding limitations affect the ability of MySQL to do
        point-in-time recovery?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        The same limitations that affect replication do affect
        point-in-time recovery.
      </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mysql-when-limitations-resolved"></a><a id="idm45828777205360"></a><p><strong>A.4.28.</strong></p></td><td align="left" valign="top"><p>
        What is being done to correct the aforementioned limitations?
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        You can choose either statement-based replication or row-based
        replication. The original replication implementation is based on
        statement-based binary logging. Row-based binary logging
        resolves the limitations mentioned earlier.
      </p><p>
        <span class="firstterm">Mixed</span> replication is also
        available (by starting the server with
        <a class="link" href="replication-options-binary-log.html#sysvar_binlog_format"><code class="option">--binlog-format=mixed</code></a>). This
        hybrid form of replication <span class="quote">&ldquo;<span class="quote">knows</span>&rdquo;</span> whether
        statement-level replication can safely be used, or row-level
        replication is required.
      </p><p>
        For additional information, see
        <a class="xref" href="replication-formats.html" title="17.2.1&nbsp;Replication Formats">Section&nbsp;17.2.1, &ldquo;Replication Formats&rdquo;</a>.
      </p></td></tr></tbody></table></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="faqs-sql-modes.html">Previous <span class="navHint"> MySQL 8.0 FAQ: Server SQL Mode </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="faqs.html">Up <span class="navHint"> MySQL 8.0 Frequently Asked Questions </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="faqs-triggers.html">Next <span class="navHint"> MySQL 8.0 FAQ: Triggers </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>