<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-483"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/13.1.21%C2%A0CREATE%20TABLESPACE%20Statement"></a><title>13.1.21&nbsp;CREATE TABLESPACE Statement</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="sql-data-definition-statements.html" title="13.1&nbsp;Data Definition Statements"/><link rel="prev" href="create-table-ndb-comment-options.html" title="13.1.20.12&nbsp;Setting NDB Comment Options"/><link rel="next" href="create-trigger.html" title="13.1.22&nbsp;CREATE TRIGGER Statement"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="create-tablespace.html#create-tablespace">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="create-table-ndb-comment-options.html">Previous <span class="navHint"> Setting NDB Comment Options </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="sql-data-definition-statements.html">Up <span class="navHint"> Data Definition Statements </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="create-trigger.html">Next <span class="navHint"> CREATE TRIGGER Statement </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="create-tablespace"></a>13.1.21&nbsp;CREATE TABLESPACE Statement</h3></div></div></div><a id="idm45828910590608" class="indexterm"></a><a id="idm45828910589568" class="indexterm"></a><a id="idm45828910588080" class="indexterm"></a><pre class="programlisting">CREATE [UNDO] TABLESPACE <em class="replaceable"><code>tablespace_name</code></em>

  <span class="emphasis"><em>InnoDB and NDB:</em></span>
    [ADD DATAFILE &#39;<em class="replaceable"><code>file_name</code></em>&#39;]
    [AUTOEXTEND_SIZE [=] <em class="replaceable"><code>value</code></em>]

  <span class="emphasis"><em>InnoDB only:</em></span>
    [FILE_BLOCK_SIZE = value]
    [ENCRYPTION [=] {&#39;Y&#39; | &#39;N&#39;}]

  <span class="emphasis"><em>NDB only:</em></span>
    USE LOGFILE GROUP <em class="replaceable"><code>logfile_group</code></em>
    [EXTENT_SIZE [=] <em class="replaceable"><code>extent_size</code></em>]
    [INITIAL_SIZE [=] <em class="replaceable"><code>initial_size</code></em>]
    [MAX_SIZE [=] <em class="replaceable"><code>max_size</code></em>]
    [NODEGROUP [=] <em class="replaceable"><code>nodegroup_id</code></em>]
    [WAIT]
    [COMMENT [=] &#39;<em class="replaceable"><code>string</code></em>&#39;]

  <span class="emphasis"><em>InnoDB and NDB:</em></span>
    [ENGINE [=] <em class="replaceable"><code>engine_name</code></em>]

  <span class="emphasis"><em>Reserved for future use:</em></span>
    [ENGINE_ATTRIBUTE [=] &#39;<em class="replaceable"><code>string</code></em>&#39;]
 </pre><p>
      This statement is used to create a tablespace. The precise syntax
      and semantics depend on the storage engine used. In standard MySQL
      releases, this is always an <a class="link" href="innodb-storage-engine.html" title="Chapter&nbsp;15&nbsp;The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
      tablespace. MySQL NDB Cluster also supports tablespaces using the
      <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> storage engine.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-innodb" title="Considerations for InnoDB">Considerations for InnoDB</a></p></li><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-ndb" title="Considerations for NDB Cluster">Considerations for NDB Cluster</a></p></li><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-options" title="Options">Options</a></p></li><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-notes" title="Notes">Notes</a></p></li><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-innodb-examples" title="InnoDB Examples">InnoDB Examples</a></p></li><li class="listitem"><p><a class="xref" href="create-tablespace.html#create-tablespace-ndb-examples" title="NDB Example">NDB Example</a></p></li></ul></div><a class="dashingAutolink" name="autolink-477"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Considerations%20for%20InnoDB"></a><h4><a id="create-tablespace-innodb"></a>Considerations for InnoDB</h4><p>
      <a class="link" href="create-tablespace.html" title="13.1.21&nbsp;CREATE TABLESPACE Statement"><code class="literal">CREATE TABLESPACE</code></a> syntax is used to
      create general tablespaces or undo tablespaces. The
      <code class="literal">UNDO</code> keyword, introduced in MySQL 8.0.14, must
      be specified to create an undo tablespace.
    </p><p>
      A general tablespace is a shared tablespace. It can hold multiple
      tables, and supports all table row formats. General tablespaces
      can be created in a location relative to or independent of the
      data directory.
    </p><p>
      After creating an <code class="literal">InnoDB</code> general tablespace,
      use <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE
      <em class="replaceable"><code>tbl_name</code></em> ... TABLESPACE [=]
      <em class="replaceable"><code>tablespace_name</code></em></code></a> or
      <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE
      <em class="replaceable"><code>tbl_name</code></em> TABLESPACE [=]
      <em class="replaceable"><code>tablespace_name</code></em></code></a> to add tables
      to the tablespace. For more information, see
      <a class="xref" href="general-tablespaces.html" title="15.6.3.3&nbsp;General Tablespaces">Section&nbsp;15.6.3.3, &ldquo;General Tablespaces&rdquo;</a>.
    </p><p>
      Undo tablespaces contain undo logs. Undo tablespaces can be
      created in a chosen location by specifying a fully qualified data
      file path. For more information, see
      <a class="xref" href="innodb-undo-tablespaces.html" title="15.6.3.4&nbsp;Undo Tablespaces">Section&nbsp;15.6.3.4, &ldquo;Undo Tablespaces&rdquo;</a>.
    </p><a class="dashingAutolink" name="autolink-478"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Considerations%20for%20NDB%20Cluster"></a><h4><a id="create-tablespace-ndb"></a>Considerations for NDB Cluster</h4><p>
      This statement is used to create a tablespace, which can contain
      one or more data files, providing storage space for NDB Cluster
      Disk Data tables (see <a class="xref" href="mysql-cluster-disk-data.html" title="23.6.11&nbsp;NDB Cluster Disk Data Tables">Section&nbsp;23.6.11, &ldquo;NDB Cluster Disk Data Tables&rdquo;</a>).
      One data file is created and added to the tablespace using this
      statement. Additional data files may be added to the tablespace by
      using the <a class="link" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement"><code class="literal">ALTER TABLESPACE</code></a>
      statement (see <a class="xref" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement">Section&nbsp;13.1.10, &ldquo;ALTER TABLESPACE Statement&rdquo;</a>).
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
        All NDB Cluster Disk Data objects share the same namespace. This
        means that <span class="emphasis"><em>each Disk Data object</em></span> must be
        uniquely named (and not merely each Disk Data object of a given
        type). For example, you cannot have a tablespace and a log file
        group with the same name, or a tablespace and a data file with
        the same name.
      </p></div><p>
      A log file group of one or more <code class="literal">UNDO</code> log files
      must be assigned to the tablespace to be created with the
      <code class="literal">USE LOGFILE GROUP</code> clause.
      <em class="replaceable"><code>logfile_group</code></em> must be an existing log
      file group created with <a class="link" href="create-logfile-group.html" title="13.1.16&nbsp;CREATE LOGFILE GROUP Statement"><code class="literal">CREATE LOGFILE
      GROUP</code></a> (see <a class="xref" href="create-logfile-group.html" title="13.1.16&nbsp;CREATE LOGFILE GROUP Statement">Section&nbsp;13.1.16, &ldquo;CREATE LOGFILE GROUP Statement&rdquo;</a>).
      Multiple tablespaces may use the same log file group for
      <code class="literal">UNDO</code> logging.
    </p><p>
      When setting <code class="literal">EXTENT_SIZE</code> or
      <code class="literal">INITIAL_SIZE</code>, you may optionally follow the
      number with a one-letter abbreviation for an order of magnitude,
      similar to those used in <code class="filename">my.cnf</code>. Generally,
      this is one of the letters <code class="literal">M</code> (for megabytes) or
      <code class="literal">G</code> (for gigabytes).
    </p><p>
      <code class="literal">INITIAL_SIZE</code> and <code class="literal">EXTENT_SIZE</code>
      are subject to rounding as follows:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">EXTENT_SIZE</code> is rounded up to the nearest
          whole multiple of 32K.
        </p></li><li class="listitem"><p>
          <code class="literal">INITIAL_SIZE</code> is rounded
          <span class="emphasis"><em>down</em></span> to the nearest whole multiple of
          32K; this result is rounded up to the nearest whole multiple
          of <code class="literal">EXTENT_SIZE</code> (after any rounding).
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
        <a class="link" href="mysql-cluster.html" title="Chapter&nbsp;23&nbsp;MySQL NDB Cluster 8.0"><code class="literal">NDB</code></a> reserves 4% of a tablespace for
        data node restart operations. This reserved space cannot be used
        for data storage.
      </p></div><p>
      The rounding just described is done explicitly, and a warning is
      issued by the MySQL Server when any such rounding is performed.
      The rounded values are also used by the NDB kernel for calculating
      <a class="link" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table"><code class="literal">INFORMATION_SCHEMA.FILES</code></a> column
      values and other purposes. However, to avoid an unexpected result,
      we suggest that you always use whole multiples of 32K in
      specifying these options.
    </p><p>
      When <a class="link" href="create-tablespace.html" title="13.1.21&nbsp;CREATE TABLESPACE Statement"><code class="literal">CREATE TABLESPACE</code></a> is used with
      <code class="literal">ENGINE [=] NDB</code>, a tablespace and associated
      data file are created on each Cluster data node. You can verify
      that the data files were created and obtain information about them
      by querying the Information Schema
      <a class="link" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table. (See the example later
      in this section.)
    </p><p>
      (See <a class="xref" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table">Section&nbsp;26.3.15, &ldquo;The INFORMATION_SCHEMA FILES Table&rdquo;</a>.)
    </p><a class="dashingAutolink" name="autolink-479"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Options"></a><h4><a id="create-tablespace-options"></a>Options</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">ADD DATAFILE</code>: Defines the name of a
          tablespace data file. This option is always required when
          creating an <code class="literal">NDB</code> tablespace; for
          <code class="literal">InnoDB</code> in MySQL 8.0.14 and later, it is
          required only when creating an undo tablespace. The
          <code class="literal"><em class="replaceable"><code>file_name</code></em></code>,
          including any specified path, must be quoted with single or
          double quotation marks. File names (not counting the file
          extension) and directory names must be at least one byte in
          length. Zero length file names and directory names are not
          supported.
        </p><p>
          Because there are considerable differences in how
          <code class="literal">InnoDB</code> and <code class="literal">NDB</code> treat
          data files, the two storage engines are covered separately in
          the discussion that follows.
        </p><p><strong>InnoDB data files.&nbsp;</strong>
            An <code class="literal">InnoDB</code> tablespace supports only a
            single data file, whose name must include a
            <code class="literal">.ibd</code> extension.
          </p><p>
          To place an <code class="literal">InnoDB</code> general tablespace data
          file in a location outside of the data directory, include a
          fully qualified path or a path relative to the data directory.
          Only a fully qualified path is permitted for undo tablespaces.
          If you do not specify a path, a general tablespace is created
          in the data directory. An undo tablespace created without
          specifying a path is created in the directory defined by the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_directory"><code class="literal">innodb_undo_directory</code></a>
          variable. If the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_undo_directory"><code class="literal">innodb_undo_directory</code></a>
          variable is undefined, undo tablespaces are created in the
          data directory.
        </p><p>
          To avoid conflicts with implicitly created file-per-table
          tablespaces, creating an <code class="literal">InnoDB</code> general
          tablespace in a subdirectory under the data directory is not
          supported. When creating a general tablespace or undo
          tablespace outside of the data directory, the directory must
          exist and must be known to <code class="literal">InnoDB</code> prior to
          creating the tablespace. To make a directory known to
          <code class="literal">InnoDB</code>, add it to the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a> value or
          to one of the variables whose values are appended to the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a> value.
          <a class="link" href="innodb-parameters.html#sysvar_innodb_directories"><code class="literal">innodb_directories</code></a> is a
          read-only variable. Configuring it requires restarting the
          server.
        </p><p>
          If the <code class="literal">ADD DATAFILE</code> clause is not specified
          when creating an <code class="literal">InnoDB</code> tablespace, a
          tablespace data file with a unique file name is created
          implicitly. The unique file name is a 128 bit UUID formatted
          into five groups of hexadecimal numbers separated by dashes
          (<em class="replaceable"><code>aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</code></em>).
          A file extension is added if required by the storage engine.
          An <code class="filename">.ibd</code> file extension is added for
          <code class="literal">InnoDB</code> general tablespace data files. In a
          replication environment, the data file name created on the
          replication source server is not the same as the data file
          name created on the replica.
        </p><p>
          As of MySQL 8.0.17, the <code class="literal">ADD DATAFILE</code> clause
          does not permit circular directory references when creating an
          <code class="literal">InnoDB</code> tablespace. For example, the
          circular directory reference (<code class="literal">/../</code>) in the
          following statement is not permitted:
        </p><pre class="programlisting">CREATE TABLESPACE ts1 ADD DATAFILE ts1.ibd &#39;<em class="replaceable"><code>any_directory</code></em>/../ts1.ibd&#39;;
</pre><p>
          An exception to this restriction exists on Linux, where a
          circular directory reference is permitted if the preceding
          directory is a symbolic link. For example, the data file path
          in the example above is permitted if
          <em class="replaceable"><code>any_directory</code></em> is a symbolic link.
          (It is still permitted for data file paths to begin with
          &#39;<code class="literal">../</code>&#39;.)
        </p><p><strong>NDB data files.&nbsp;</strong>
            An <code class="literal">NDB</code> tablespace supports multiple data
            files which can have any legal file names; more data files
            can be added to an NDB Cluster tablespace following its
            creation by using an <a class="link" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement"><code class="literal">ALTER
            TABLESPACE</code></a> statement.
          </p><p>
          An <code class="literal">NDB</code> tablespace data file is created by
          default in the data node file system directory&mdash;that is,
          the directory named
          <code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_fs/TS</code>
          under the data node&#39;s data directory
          (<a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbd-datadir"><code class="literal">DataDir</code></a>), where
          <em class="replaceable"><code>nodeid</code></em> is the data node&#39;s
          <a class="link" href="mysql-cluster-ndbd-definition.html#ndbparam-ndbd-nodeid"><code class="literal">NodeId</code></a>. To place the
          data file in a location other than the default, include an
          absolute directory path or a path relative to the default
          location. If the directory specified does not exist,
          <code class="literal">NDB</code> attempts to create it; the system user
          account under which the data node process is running must have
          the appropriate permissions to do so.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
            When determining the path used for a data file,
            <code class="literal">NDB</code> does not expand the
            <code class="literal">~</code> (tilde) character.
          </p></div><p>
          When multiple data nodes are run on the same physical host,
          the following considerations apply:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              You cannot specify an absolute path when creating a data
              file.
            </p></li><li class="listitem"><p>
              It is not possible to create tablespace data files outside
              the data node file system directory, unless each data node
              has a separate data directory.
            </p></li><li class="listitem"><p>
              If each data node has its own data directory, data files
              can be created anywhere within this directory.
            </p></li><li class="listitem"><p>
              If each data node has its own data directory, it may also
              be possible to create a data file outside the node&#39;s
              data directory using a relative path, as long as this path
              resolves to a unique location on the host file system for
              each data node running on that host.
            </p></li></ul></div></li><li class="listitem"><p>
          <code class="literal">FILE_BLOCK_SIZE</code>: This option&mdash;which is
          specific to <code class="literal">InnoDB</code> general tablespaces, and
          is ignored by <code class="literal">NDB</code>&mdash;defines the block
          size for the tablespace data file. Values can be specified in
          bytes or kilobytes. For example, an 8 kilobyte file block size
          can be specified as 8192 or 8K. If you do not specify this
          option, <code class="literal">FILE_BLOCK_SIZE</code> defaults to the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_page_size"><code class="literal">innodb_page_size</code></a> value.
          <code class="literal">FILE_BLOCK_SIZE</code> is required when you intend
          to use the tablespace for storing compressed
          <code class="literal">InnoDB</code> tables
          (<code class="literal">ROW_FORMAT=COMPRESSED</code>). In this case, you
          must define the tablespace <code class="literal">FILE_BLOCK_SIZE</code>
          when creating the tablespace.
        </p><p>
          If <code class="literal">FILE_BLOCK_SIZE</code> is equal the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_page_size"><code class="literal">innodb_page_size</code></a> value, the
          tablespace can contain only tables having an uncompressed row
          format (<code class="literal">COMPACT</code>,
          <code class="literal">REDUNDANT</code>, and <code class="literal">DYNAMIC</code>).
          Tables with a <code class="literal">COMPRESSED</code> row format have a
          different physical page size than uncompressed tables.
          Therefore, compressed tables cannot coexist in the same
          tablespace as uncompressed tables.
        </p><p>
          For a general tablespace to contain compressed tables,
          <code class="literal">FILE_BLOCK_SIZE</code> must be specified, and the
          <code class="literal">FILE_BLOCK_SIZE</code> value must be a valid
          compressed page size in relation to the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_page_size"><code class="literal">innodb_page_size</code></a> value. Also,
          the physical page size of the compressed table
          (<code class="literal">KEY_BLOCK_SIZE</code>) must be equal to
          <code class="literal">FILE_BLOCK_SIZE/1024</code>. For example, if
          <a class="link" href="innodb-parameters.html#sysvar_innodb_page_size"><code class="literal">innodb_page_size=16K</code></a>, and
          <code class="literal">FILE_BLOCK_SIZE=8K</code>, the
          <code class="literal">KEY_BLOCK_SIZE</code> of the table must be 8. For
          more information, see <a class="xref" href="general-tablespaces.html" title="15.6.3.3&nbsp;General Tablespaces">Section&nbsp;15.6.3.3, &ldquo;General Tablespaces&rdquo;</a>.
        </p></li><li class="listitem"><p>
          <code class="literal">USE LOGFILE GROUP</code>: Required for
          <code class="literal">NDB</code>, this is the name of a log file group
          previously created using <a class="link" href="create-logfile-group.html" title="13.1.16&nbsp;CREATE LOGFILE GROUP Statement"><code class="literal">CREATE LOGFILE
          GROUP</code></a>. Not supported for <code class="literal">InnoDB</code>,
          where it fails with an error.
        </p></li><li class="listitem"><p>
          <code class="literal">EXTENT_SIZE</code>: This option is specific to
          NDB, and is not supported by InnoDB, where it fails with an
          error. <code class="literal">EXTENT_SIZE</code> sets the size, in bytes,
          of the extents used by any files belonging to the tablespace.
          The default value is 1M. The minimum size is 32K, and
          theoretical maximum is 2G, although the practical maximum size
          depends on a number of factors. In most cases, changing the
          extent size does not have any measurable effect on
          performance, and the default value is recommended for all but
          the most unusual situations.
        </p><p>
          An <span class="firstterm">extent</span> is a unit of
          disk space allocation. One extent is filled with as much data
          as that extent can contain before another extent is used. In
          theory, up to 65,535 (64K) extents may used per data file;
          however, the recommended maximum is 32,768 (32K). The
          recommended maximum size for a single data file is
          32G&mdash;that is, 32K extents &times; 1 MB per extent. In
          addition, once an extent is allocated to a given partition, it
          cannot be used to store data from a different partition; an
          extent cannot store data from more than one partition. This
          means, for example that a tablespace having a single datafile
          whose <code class="literal">INITIAL_SIZE</code> (described in the
          following item) is 256 MB and whose
          <code class="literal">EXTENT_SIZE</code> is 128M has just two extents,
          and so can be used to store data from at most two different
          disk data table partitions.
        </p><p>
          You can see how many extents remain free in a given data file
          by querying the Information Schema
          <a class="link" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table, and so derive an
          estimate for how much space remains free in the file. For
          further discussion and examples, see
          <a class="xref" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table">Section&nbsp;26.3.15, &ldquo;The INFORMATION_SCHEMA FILES Table&rdquo;</a>.
        </p></li><li class="listitem"><p>
          <code class="literal">INITIAL_SIZE</code>: This option is specific to
          <code class="literal">NDB</code>, and is not supported by
          <code class="literal">InnoDB</code>, where it fails with an error.
        </p><p>
          The <code class="literal">INITIAL_SIZE</code> parameter sets the total
          size in bytes of the data file that was specific using
          <code class="literal">ADD DATATFILE</code>. Once this file has been
          created, its size cannot be changed; however, you can add more
          data files to the tablespace using
          <a class="link" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement"><code class="literal">ALTER
          TABLESPACE ... ADD DATAFILE</code></a>.
        </p><p>
          <code class="literal">INITIAL_SIZE</code> is optional; its default value
          is 134217728 (128 MB).
        </p><p>
          On 32-bit systems, the maximum supported value for
          <code class="literal">INITIAL_SIZE</code> is 4294967296 (4 GB).
        </p></li><li class="listitem"><p>
          <code class="literal">AUTOEXTEND_SIZE</code>: Ignored by MySQL prior to
          MySQL 8.0.23; From MySQL 8.0.23, defines the amount by which
          <code class="literal">InnoDB</code> extends the size of the tablespace
          when it becomes full. The setting must be a multiple of 4MB.
          The default setting is 0, which causes the tablespace to be
          extended according to the implicit default behavior. For more
          information, see
          <a class="xref" href="innodb-tablespace-autoextend-size.html" title="15.6.3.9&nbsp;Tablespace AUTOEXTEND_SIZE Configuration">Section&nbsp;15.6.3.9, &ldquo;Tablespace AUTOEXTEND_SIZE Configuration&rdquo;</a>.
        </p><p>
          Has no effect in any release of MySQL NDB Cluster 8.0,
          regardless of the storage engine used.
        </p></li><li class="listitem"><p>
          <code class="literal">MAX_SIZE</code>: Currently ignored by MySQL;
          reserved for possible future use. Has no effect in any release
          of MySQL 8.0 or MySQL NDB Cluster 8.0, regardless of the
          storage engine used.
        </p></li><li class="listitem"><p>
          <code class="literal">NODEGROUP</code>: Currently ignored by MySQL;
          reserved for possible future use. Has no effect in any release
          of MySQL 8.0 or MySQL NDB Cluster 8.0, regardless of the
          storage engine used.
        </p></li><li class="listitem"><p>
          <code class="literal">WAIT</code>: Currently ignored by MySQL; reserved
          for possible future use. Has no effect in any release of MySQL
          8.0 or MySQL NDB Cluster 8.0, regardless of the storage engine
          used.
        </p></li><li class="listitem"><p>
          <code class="literal">COMMENT</code>: Currently ignored by MySQL;
          reserved for possible future use. Has no effect in any release
          of MySQL 8.0 or MySQL NDB Cluster 8.0, regardless of the
          storage engine used.
        </p></li><li class="listitem"><p>
          The <code class="literal">ENCRYPTION</code> clause enables or disables
          page-level data encryption for an <code class="literal">InnoDB</code>
          general tablespace. Encryption support for general tablespaces
          was introduced in MySQL 8.0.13.
        </p><p>
          As of MySQL 8.0.16, if the <code class="literal">ENCRYPTION</code>
          clause is not specified, the
          <a class="link" href="server-system-variables.html#sysvar_default_table_encryption"><code class="literal">default_table_encryption</code></a>
          setting controls whether encryption is enabled. The
          <code class="literal">ENCRYPTION</code> clause overrides the
          <a class="link" href="server-system-variables.html#sysvar_default_table_encryption"><code class="literal">default_table_encryption</code></a>
          setting. However, if the
          <a class="link" href="server-system-variables.html#sysvar_table_encryption_privilege_check"><code class="literal">table_encryption_privilege_check</code></a>
          variable is enabled, the
          <a class="link" href="privileges-provided.html#priv_table-encryption-admin"><code class="literal">TABLE_ENCRYPTION_ADMIN</code></a>
          privilege is required to use an <code class="literal">ENCRYPTION</code>
          clause setting that differs from the
          <a class="link" href="server-system-variables.html#sysvar_default_table_encryption"><code class="literal">default_table_encryption</code></a>
          setting.
        </p><p>
          A keyring plugin must be installed and configured before an
          encryption-enabled tablespace can be created.
        </p><p>
          When a general tablespace is encrypted, all tables residing in
          the tablespace are encrypted. Likewise, a table created in an
          encrypted tablespace is encrypted.
        </p><p>
          For more information, see
          <a class="xref" href="innodb-data-encryption.html" title="15.13&nbsp;InnoDB Data-at-Rest Encryption">Section&nbsp;15.13, &ldquo;InnoDB Data-at-Rest Encryption&rdquo;</a>
        </p></li><li class="listitem"><p>
          <code class="literal">ENGINE</code>: Defines the storage engine which
          uses the tablespace, where
          <em class="replaceable"><code>engine_name</code></em> is the name of the
          storage engine. Currently, only the <code class="literal">InnoDB</code>
          storage engine is supported by standard MySQL 8.0
          releases. MySQL NDB Cluster supports both
          <code class="literal">NDB</code> and <code class="literal">InnoDB</code>
          tablespaces. The value of the
          <a class="link" href="server-system-variables.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> system
          variable is used for <code class="literal">ENGINE</code> if the option
          is not specified.
        </p></li><li class="listitem"><p>
          The <code class="literal">ENGINE_ATTRIBUTE</code> option (available as
          of MySQL 8.0.21) is used to specify tablespace attributes for
          primary storage engines. The option is reserved for future
          use.
        </p><p>
          Permitted values are a string literal containing a valid
          <code class="literal">JSON</code> document or an empty string (&#39;&#39;).
          Invalid <code class="literal">JSON</code> is rejected.
        </p><pre class="programlisting">CREATE TABLESPACE ts1 ENGINE_ATTRIBUTE=&#39;{&#34;<em class="replaceable"><code>key</code></em>&#34;:&#34;<em class="replaceable"><code>value</code></em>&#34;}&#39;;
</pre><p>
          <code class="literal">ENGINE_ATTRIBUTE</code> values can be repeated
          without error. In this case, the last specified value is used.
        </p><p>
          <code class="literal">ENGINE_ATTRIBUTE</code> values are not checked by
          the server, nor are they cleared when the table&#39;s storage
          engine is changed.
        </p></li></ul></div><a class="dashingAutolink" name="autolink-480"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Notes"></a><h4><a id="create-tablespace-notes"></a>Notes</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          For the rules covering the naming of MySQL tablespaces, see
          <a class="xref" href="identifiers.html" title="9.2&nbsp;Schema Object Names">Section&nbsp;9.2, &ldquo;Schema Object Names&rdquo;</a>. In addition to these rules, the
          slash character (<span class="quote">&ldquo;<span class="quote">/</span>&rdquo;</span>) is not permitted, nor can
          you use names beginning with <code class="literal">innodb_</code>, as
          this prefix is reserved for system use.
        </p></li><li class="listitem"><p>
          Creation of temporary general tablespaces is not supported.
        </p></li><li class="listitem"><p>
          General tablespaces do not support temporary tables.
        </p></li><li class="listitem"><p>
          The <code class="literal">TABLESPACE</code> option may be used with
          <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a> or
          <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a> to assign an
          <code class="literal">InnoDB</code> table partition or subpartition to a
          file-per-table tablespace. All partitions must belong to the
          same storage engine. Assigning table partitions to shared
          <code class="literal">InnoDB</code> tablespaces is not supported. Shared
          tablespaces include the <code class="literal">InnoDB</code> system
          tablespace and general tablespaces.
        </p></li><li class="listitem"><p>
          General tablespaces support the addition of tables of any row
          format using
          <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE ...
          TABLESPACE</code></a>.
          <a class="link" href="innodb-parameters.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a> does
          not need to be enabled.
        </p></li><li class="listitem"><p>
          <a class="link" href="innodb-parameters.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> is not
          applicable to general tablespaces. Tablespace management rules
          are strictly enforced independently of
          <a class="link" href="innodb-parameters.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a>. If
          <code class="literal">CREATE TABLESPACE</code> parameters are incorrect
          or incompatible, the operation fails regardless of the
          <a class="link" href="innodb-parameters.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> setting.
          When a table is added to a general tablespace using
          <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE ...
          TABLESPACE</code></a> or
          <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE ...
          TABLESPACE</code></a>,
          <a class="link" href="innodb-parameters.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> is ignored
          but the statement is evaluated as if
          <a class="link" href="innodb-parameters.html#sysvar_innodb_strict_mode"><code class="literal">innodb_strict_mode</code></a> is
          enabled.
        </p></li><li class="listitem"><p>
          Use <code class="literal">DROP TABLESPACE</code> to remove a tablespace.
          All tables must be dropped from a tablespace using
          <a class="link" href="drop-table.html" title="13.1.32&nbsp;DROP TABLE Statement"><code class="literal">DROP TABLE</code></a> prior to dropping
          the tablespace. Before dropping an NDB Cluster tablespace you
          must also remove all its data files using one or more
          <a class="link" href="alter-tablespace.html" title="13.1.10&nbsp;ALTER TABLESPACE Statement"><code class="literal">ALTER
          TABLESPACE ... DROP DATATFILE</code></a> statements. See
          <a class="xref" href="mysql-cluster-disk-data-objects.html" title="23.6.11.1&nbsp;NDB Cluster Disk Data Objects">Section&nbsp;23.6.11.1, &ldquo;NDB Cluster Disk Data Objects&rdquo;</a>.
        </p></li><li class="listitem"><p>
          All parts of an <code class="literal">InnoDB</code> table added to an
          <code class="literal">InnoDB</code> general tablespace reside in the
          general tablespace, including indexes and
          <a class="link" href="blob.html" title="11.3.4&nbsp;The BLOB and TEXT Types"><code class="literal">BLOB</code></a> pages.
        </p><p>
          For an <code class="literal">NDB</code> table assigned to a tablespace,
          only those columns which are not indexed are stored on disk,
          and actually use the tablespace data files. Indexes and
          indexed columns for all <code class="literal">NDB</code> tables are
          always kept in memory.
        </p></li><li class="listitem"><p>
          Similar to the system tablespace, truncating or dropping
          tables stored in a general tablespace creates free space
          internally in the general tablespace
          <a class="link" href="glossary.html#glos_ibd_file" title=".ibd file">.ibd data file</a> which can
          only be used for new <code class="literal">InnoDB</code> data. Space is
          not released back to the operating system as it is for
          file-per-table tablespaces.
        </p></li><li class="listitem"><p>
          A general tablespace is not associated with any database or
          schema.
        </p></li><li class="listitem"><p>
          <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE ...
          DISCARD TABLESPACE</code></a> and
          <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE
          ...IMPORT TABLESPACE</code></a> are not supported for tables
          that belong to a general tablespace.
        </p></li><li class="listitem"><p>
          The server uses tablespace-level metadata locking for DDL that
          references general tablespaces. By comparison, the server uses
          table-level metadata locking for DDL that references
          file-per-table tablespaces.
        </p></li><li class="listitem"><p>
          A generated or existing tablespace cannot be changed to a
          general tablespace.
        </p></li><li class="listitem"><p>
          There is no conflict between general tablespace names and
          file-per-table tablespace names. The <span class="quote">&ldquo;<span class="quote">/</span>&rdquo;</span>
          character, which is present in file-per-table tablespace
          names, is not permitted in general tablespace names.
        </p></li><li class="listitem"><p>
          <a class="link" href="mysqldump.html" title="4.5.4&nbsp;mysqldump &mdash; A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> and <a class="link" href="mysqlpump.html" title="4.5.6&nbsp;mysqlpump &mdash; A Database Backup Program"><span class="command"><strong>mysqlpump</strong></span></a>
          do not dump <code class="literal">InnoDB</code>
          <a class="link" href="create-tablespace.html" title="13.1.21&nbsp;CREATE TABLESPACE Statement"><code class="literal">CREATE TABLESPACE</code></a> statements.
        </p></li></ul></div><a class="dashingAutolink" name="autolink-481"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/InnoDB%20Examples"></a><h4><a id="create-tablespace-innodb-examples"></a>InnoDB Examples</h4><p>
      This example demonstrates creating a general tablespace and adding
      three uncompressed tables of different row formats.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE `ts1` ADD DATAFILE &#39;ts1.ibd&#39; ENGINE=INNODB;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT PRIMARY KEY) TABLESPACE ts1 ROW_FORMAT=REDUNDANT;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (c1 INT PRIMARY KEY) TABLESPACE ts1 ROW_FORMAT=COMPACT;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE t3 (c1 INT PRIMARY KEY) TABLESPACE ts1 ROW_FORMAT=DYNAMIC;</code></strong>
</pre><p>
      This example demonstrates creating a general tablespace and adding
      a compressed table. The example assumes a default
      <a class="link" href="innodb-parameters.html#sysvar_innodb_page_size"><code class="literal">innodb_page_size</code></a> value of 16K.
      The <code class="literal">FILE_BLOCK_SIZE</code> of 8192 requires that the
      compressed table have a <code class="literal">KEY_BLOCK_SIZE</code> of 8.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE `ts2` ADD DATAFILE &#39;ts2.ibd&#39; FILE_BLOCK_SIZE = 8192 Engine=InnoDB;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE t4 (c1 INT PRIMARY KEY) TABLESPACE ts2 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;</code></strong>
</pre><p>
      This example demonstrates creating a general tablespace without
      specifying the <code class="literal">ADD DATAFILE</code> clause, which is
      optional as of MySQL 8.0.14.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE `ts3` ENGINE=INNODB;</code></strong>
</pre><p>
      This example demonstrates creating an undo tablespace.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE UNDO TABLESPACE <em class="replaceable"><code>undo_003</code></em> ADD DATAFILE &#39;<em class="replaceable"><code>undo_003</code></em>.ibu&#39;;</code></strong>
</pre><a class="dashingAutolink" name="autolink-482"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/NDB%20Example"></a><h4><a id="create-tablespace-ndb-examples"></a>NDB Example</h4><p>
      Suppose that you wish to create an NDB Cluster Disk Data
      tablespace named <code class="literal">myts</code> using a datafile named
      <code class="filename">mydata-1.dat</code>. An <code class="filename">NDB</code>
      tablespace always requires the use of a log file group consisting
      of one or more undo log files. For this example, we first create a
      log file group named <code class="literal">mylg</code> that contains one
      undo long file named <code class="filename">myundo-1.dat</code>, using the
      <a class="link" href="create-logfile-group.html" title="13.1.16&nbsp;CREATE LOGFILE GROUP Statement"><code class="literal">CREATE LOGFILE GROUP</code></a> statement
      shown here:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE LOGFILE GROUP myg1</code></strong>
    -&gt;     <strong class="userinput"><code>ADD UNDOFILE &#39;myundo-1.dat&#39;</code></strong>
    -&gt;     <strong class="userinput"><code>ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (3.29 sec)
</pre><p>
      Now you can create the tablespace previously described using the
      following statement:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLESPACE myts</code></strong>
    -&gt;     <strong class="userinput"><code>ADD DATAFILE &#39;mydata-1.dat&#39;</code></strong>
    -&gt;     <strong class="userinput"><code>USE LOGFILE GROUP mylg</code></strong>
    -&gt;     <strong class="userinput"><code>ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (2.98 sec)
</pre><p>
      You can now create a Disk Data table using a
      <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a> statement with the
      <code class="literal">TABLESPACE</code> and <code class="literal">STORAGE DISK</code>
      options, similar to what is shown here:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE mytable (</code></strong>
    -&gt;     <strong class="userinput"><code>id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,</code></strong>
    -&gt;     <strong class="userinput"><code>lname VARCHAR(50) NOT NULL,</code></strong>
    -&gt;     <strong class="userinput"><code>fname VARCHAR(50) NOT NULL,</code></strong>
    -&gt;     <strong class="userinput"><code>dob DATE NOT NULL,</code></strong>
    -&gt;     <strong class="userinput"><code>joined DATE NOT NULL,</code></strong>
    -&gt;     <strong class="userinput"><code>INDEX(last_name, first_name)</code></strong>
    -&gt; <strong class="userinput"><code>)</code></strong>
    -&gt;     <strong class="userinput"><code>TABLESPACE myts STORAGE DISK</code></strong>
    -&gt;     <strong class="userinput"><code>ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.41 sec)
</pre><p>
      It is important to note that only the <code class="literal">dob</code> and
      <code class="literal">joined</code> columns from <code class="literal">mytable</code>
      are actually stored on disk, due to the fact that the
      <code class="literal">id</code>, <code class="literal">lname</code>, and
      <code class="literal">fname</code> columns are all indexed.
    </p><p>
      As mentioned previously, when <code class="literal">CREATE TABLESPACE</code>
      is used with <code class="literal">ENGINE [=] NDB</code>, a tablespace and
      associated data file are created on each NDB Cluster data node.
      You can verify that the data files were created and obtain
      information about them by querying the Information Schema
      <a class="link" href="information-schema-files-table.html" title="26.3.15&nbsp;The INFORMATION_SCHEMA FILES Table"><code class="literal">FILES</code></a> table, as shown here:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FILE_NAME, FILE_TYPE, LOGFILE_GROUP_NAME, STATUS, EXTRA</code></strong>
    -&gt;     <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE TABLESPACE_NAME = &#39;myts&#39;;</code></strong>

+--------------+------------+--------------------+--------+----------------+
| file_name    | file_type  | logfile_group_name | status | extra          |
+--------------+------------+--------------------+--------+----------------+
| mydata-1.dat | DATAFILE   | mylg               | NORMAL | CLUSTER_NODE=5 |
| mydata-1.dat | DATAFILE   | mylg               | NORMAL | CLUSTER_NODE=6 |
| NULL         | TABLESPACE | mylg               | NORMAL | NULL           |
+--------------+------------+--------------------+--------+----------------+
3 rows in set (0.01 sec)
</pre><p>
      For additional information and examples, see
      <a class="xref" href="mysql-cluster-disk-data-objects.html" title="23.6.11.1&nbsp;NDB Cluster Disk Data Objects">Section&nbsp;23.6.11.1, &ldquo;NDB Cluster Disk Data Objects&rdquo;</a>.
    </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="create-table-ndb-comment-options.html">Previous <span class="navHint"> Setting NDB Comment Options </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="sql-data-definition-statements.html">Up <span class="navHint"> Data Definition Statements </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="create-trigger.html">Next <span class="navHint"> CREATE TRIGGER Statement </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>