<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-147"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/12.12%C2%A0Bit%20Functions%20and%20Operators"></a><title>12.12&nbsp;Bit Functions and Operators</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="functions.html" title="Chapter&nbsp;12&nbsp;Functions and Operators"/><link rel="prev" href="xml-functions.html" title="12.11&nbsp;XML Functions"/><link rel="next" href="encryption-functions.html" title="12.13&nbsp;Encryption and Compression Functions"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="bit-functions.html#bit-functions">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="xml-functions.html">Previous <span class="navHint"> XML Functions </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="functions.html">Up <span class="navHint"> Functions and Operators </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="encryption-functions.html">Next <span class="navHint"> Encryption and Compression Functions </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="bit-functions"></a>12.12&nbsp;Bit Functions and Operators</h2></div></div></div><a id="idm45828926408176" class="indexterm"></a><a id="idm45828926406720" class="indexterm"></a><a id="idm45828926405232" class="indexterm"></a><a id="idm45828926404160" class="indexterm"></a><a id="idm45828926403088" class="indexterm"></a><a id="idm45828926401584" class="indexterm"></a><a id="idm45828926400128" class="indexterm"></a><a id="idm45828926399056" class="indexterm"></a><div class="table"><a id="idm45828926397984"></a><p class="title"><strong>Table&nbsp;12.17&nbsp;Bit Functions and Operators</strong></p><div class="table-contents"><table frame="box" rules="all" summary="A reference that lists bit functions and operators."><colgroup><col style="width: 28%"/><col style="width: 71%"/></colgroup><thead><tr><th>Name</th>
<th>Description</th>
</tr></thead><tbody><tr><td><a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td>
<td>
      Bitwise AND
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td>
<td>
      Right shift
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td>
<td>
      Left shift
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td>
<td>
      Bitwise XOR
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a></td>
<td>
      Return the number of bits that are set
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#operator_bitwise-or"><code class="literal">|</code></a></td>
<td>
      Bitwise OR
    </td>
</tr><tr><td><a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td>
<td>
      Bitwise inversion
    </td>
</tr></tbody></table></div></div><br class="table-break"/><p>
      Bit functions and operators comprise
      <a class="link" href="bit-functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a>,
      <a class="link" href="aggregate-functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a>,
      <a class="link" href="aggregate-functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a>,
      <a class="link" href="aggregate-functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a>,
      <a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>,
      <a class="link" href="bit-functions.html#operator_bitwise-or"><code class="literal">|</code></a>,
      <a class="link" href="bit-functions.html#operator_bitwise-xor"><code class="literal">^</code></a>,
      <a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a>,
      <a class="link" href="bit-functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>, and
      <a class="link" href="bit-functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>.
      (The <a class="link" href="aggregate-functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a>,
      <a class="link" href="aggregate-functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a>, and
      <a class="link" href="aggregate-functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a> aggregate functions are
      described in <a class="xref" href="aggregate-functions.html" title="12.19.1&nbsp;Aggregate Function Descriptions">Section&nbsp;12.19.1, &ldquo;Aggregate Function Descriptions&rdquo;</a>.) Prior to
      MySQL 8.0, bit functions and operators required
      <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> (64-bit integer) arguments
      and returned <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> values, so they
      had a maximum range of 64 bits.
      Non-<a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> arguments were converted
      to <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> prior to performing the
      operation and truncation could occur.
    </p><p>
      In MySQL 8.0, bit functions and operators permit
      binary string type arguments
      (<a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
      <a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, and the
      <a class="link" href="blob.html" title="11.3.4&nbsp;The BLOB and TEXT Types"><code class="literal">BLOB</code></a> types) and return a value of
      like type, which enables them to take arguments and produce return
      values larger than 64 bits. Nonbinary string arguments are
      converted to <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> and processed
      as such, as before.
    </p><p>
      An implication of this change in behavior is that bit operations
      on binary string arguments might produce a different result in
      MySQL 8.0 than in 5.7. For information
      about how to prepare in MySQL 5.7 for potential
      incompatibilities between MySQL 5.7 and 8.0, see
      <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-5.7-en/bit-functions.html" target="_top">Bit Functions and Operators</a>, in
      <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-5.7-en/" target="_top">MySQL 5.7 Reference Manual</a>.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-5-7" title="Bit Operations Prior to MySQL 8.0">Bit Operations Prior to MySQL 8.0</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-8-0" title="Bit Operations in MySQL 8.0">Bit Operations in MySQL 8.0</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-binary-string-examples" title="Binary String Bit-Operation Examples">Binary String Bit-Operation Examples</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-and-or-xor" title="Bitwise AND, OR, and XOR Operations">Bitwise AND, OR, and XOR Operations</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-complement-shift" title="Bitwise Complement and Shift Operations">Bitwise Complement and Shift Operations</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-bit-count" title="BIT_COUNT() Operations">BIT_COUNT() Operations</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-bit-aggregate" title="BIT_AND(), BIT_OR(), and BIT_XOR() Operations">BIT_AND(), BIT_OR(), and BIT_XOR() Operations</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-literal-handling" title="Special Handling of Hexadecimal Literals, Bit Literals, and NULL Literals">Special Handling of Hexadecimal Literals, Bit Literals, and NULL
        Literals</a></p></li><li class="listitem"><p><a class="xref" href="bit-functions.html#bit-operations-incompatibilities" title="Bit-Operation Incompatibilities with MySQL 5.7">Bit-Operation Incompatibilities with MySQL 5.7</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-5-7"></a>Bit Operations Prior to MySQL 8.0</h3></div></div></div><p>
        Bit operations prior to MySQL 8.0 handle only unsigned 64-bit
        integer argument and result values (that is, unsigned
        <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> values). Conversion of
        arguments of other types to
        <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> occurs as necessary.
        Examples:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            This statement operates on numeric literals, treated as
            unsigned 64-bit integers:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 127 | 128, 128 &lt;&lt; 2, BIT_COUNT(15);</code></strong>
+-----------+----------+---------------+
| 127 | 128 | 128 &lt;&lt; 2 | BIT_COUNT(15) |
+-----------+----------+---------------+
|       255 |      512 |             4 |
+-----------+----------+---------------+
</pre></li><li class="listitem"><p>
            This statement performs to-number conversions on the string
            arguments (<code class="literal">&#39;127&#39;</code> to
            <code class="literal">127</code>, and so forth) before performing the
            same operations as the first statement and producing the
            same results:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT &#39;127&#39; | &#39;128&#39;, &#39;128&#39; &lt;&lt; 2, BIT_COUNT(&#39;15&#39;);</code></strong>
+---------------+------------+-----------------+
| &#39;127&#39; | &#39;128&#39; | &#39;128&#39; &lt;&lt; 2 | BIT_COUNT(&#39;15&#39;) |
+---------------+------------+-----------------+
|           255 |        512 |               4 |
+---------------+------------+-----------------+
</pre></li><li class="listitem"><p>
            This statement uses hexadecimal literals for the
            bit-operation arguments. MySQL by default treats hexadecimal
            literals as binary strings, but in numeric context evaluates
            them as numbers (see
            <a class="xref" href="hexadecimal-literals.html" title="9.1.4&nbsp;Hexadecimal Literals">Section&nbsp;9.1.4, &ldquo;Hexadecimal Literals&rdquo;</a>). Prior to MySQL 8.0,
            numeric context includes bit operations. Examples:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT X&#39;7F&#39; | X&#39;80&#39;, X&#39;80&#39; &lt;&lt; 2, BIT_COUNT(X&#39;0F&#39;);</code></strong>
+---------------+------------+------------------+
| X&#39;7F&#39; | X&#39;80&#39; | X&#39;80&#39; &lt;&lt; 2 | BIT_COUNT(X&#39;0F&#39;) |
+---------------+------------+------------------+
|           255 |        512 |                4 |
+---------------+------------+------------------+
</pre><p>
            Handling of bit-value literals in bit operations is similar
            to hexadecimal literals (that is, as numbers).
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-8-0"></a>Bit Operations in MySQL 8.0</h3></div></div></div><p>
        MySQL 8.0 extends bit operations to handle binary string
        arguments directly (without conversion) and produce binary
        string results. (Arguments that are not integers or binary
        strings are still converted to integers, as before.) This
        extension enhances bit operations in the following ways:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Bit operations become possible on values longer than 64
            bits.
          </p></li><li class="listitem"><p>
            It is easier to perform bit operations on values that are
            more naturally represented as binary strings than as
            integers.
          </p></li></ul></div><p>
        For example, consider UUID values and IPv6 addresses, which have
        human-readable text formats like this:
      </p><pre class="programlisting">UUID: 6ccd780c-baba-1026-9564-5b8c656024db
IPv6: fe80::219:d1ff:fe91:1a72
</pre><p>
        It is cumbersome to operate on text strings in those formats. An
        alternative is convert them to fixed-length binary strings
        without delimiters. <a class="link" href="miscellaneous-functions.html#function_uuid-to-bin"><code class="literal">UUID_TO_BIN()</code></a>
        and <a class="link" href="miscellaneous-functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a> each produce a
        value of data type <a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">BINARY(16)</code></a>, a
        binary string 16 bytes (128 bits) long. The following statements
        illustrate this (<code class="literal">HEX()</code> is used to produce
        displayable values):
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(UUID_TO_BIN(&#39;6ccd780c-baba-1026-9564-5b8c656024db&#39;));</code></strong>
+----------------------------------------------------------+
| HEX(UUID_TO_BIN(&#39;6ccd780c-baba-1026-9564-5b8c656024db&#39;)) |
+----------------------------------------------------------+
| 6CCD780CBABA102695645B8C656024DB                         |
+----------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON(&#39;fe80::219:d1ff:fe91:1a72&#39;));</code></strong>
+---------------------------------------------+
| HEX(INET6_ATON(&#39;fe80::219:d1ff:fe91:1a72&#39;)) |
+---------------------------------------------+
| FE800000000000000219D1FFFE911A72            |
+---------------------------------------------+
</pre><p>
        Those binary values are easily manipulable with bit operations
        to perform actions such as extracting the timestamp from UUID
        values, or extracting the network and host parts of IPv6
        addresses. (For examples, see later in this discussion.)
      </p><p>
        Arguments that count as binary strings include column values,
        routine parameters, local variables, and user-defined variables
        that have a binary string type:
        <a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
        <a class="link" href="binary-varbinary.html" title="11.3.3&nbsp;The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, or one of the
        <a class="link" href="blob.html" title="11.3.4&nbsp;The BLOB and TEXT Types"><code class="literal">BLOB</code></a> types.
      </p><p>
        What about hexadecimal literals and bit literals? Recall that
        those are binary strings by default in MySQL, but numbers in
        numeric context. How are they handled for bit operations in
        MySQL 8.0? Does MySQL continue to evaluate them in numeric
        context, as is done prior to MySQL 8.0? Or do bit operations
        evaluate them as binary strings, now that binary strings can be
        handled <span class="quote">&ldquo;<span class="quote">natively</span>&rdquo;</span> without conversion?
      </p><p>
        Answer: It has been common to specify arguments to bit
        operations using hexadecimal literals or bit literals with the
        intent that they represent numbers, so MySQL continues to
        evaluate bit operations in numeric context when all bit
        arguments are hexadecimal or bit literals, for backward
        compatbility. If you require evaluation as binary strings
        instead, that is easily accomplished: Use the
        <code class="literal">_binary</code> introducer for at least one literal.
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            These bit operations evaluate the hexadecimal literals and
            bit literals as integers:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT X&#39;40&#39; | X&#39;01&#39;, b&#39;11110001&#39; &amp; b&#39;01001111&#39;;</code></strong>
+---------------+---------------------------+
| X&#39;40&#39; | X&#39;01&#39; | b&#39;11110001&#39; &amp; b&#39;01001111&#39; |
+---------------+---------------------------+
|            65 |                        65 |
+---------------+---------------------------+
</pre></li><li class="listitem"><p>
            These bit operations evaluate the hexadecimal literals and
            bit literals as binary strings, due to the
            <code class="literal">_binary</code> introducer:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;40&#39; | X&#39;01&#39;, b&#39;11110001&#39; &amp; _binary b&#39;01001111&#39;;</code></strong>
+-----------------------+-----------------------------------+
| _binary X&#39;40&#39; | X&#39;01&#39; | b&#39;11110001&#39; &amp; _binary b&#39;01001111&#39; |
+-----------------------+-----------------------------------+
| A                     | A                                 |
+-----------------------+-----------------------------------+
</pre></li></ul></div><p>
        Although the bit operations in both statements produce a result
        with a numeric value of 65, the second statement operates in
        binary-string context, for which 65 is ASCII
        <code class="literal">A</code>.
      </p><p>
        In numeric evaluation context, permitted values of hexadecimal
        literal and bit literal arguments have a maximum of 64 bits, as
        do results. By contrast, in binary-string evaluation context,
        permitted arguments (and results) can exceed 64 bits:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;4040404040404040&#39; | X&#39;0102030405060708&#39;;</code></strong>
+---------------------------------------------------+
| _binary X&#39;4040404040404040&#39; | X&#39;0102030405060708&#39; |
+---------------------------------------------------+
| ABCDEFGH                                          |
+---------------------------------------------------+
</pre><p>
        There are several ways to refer to a hexadecimal literal or bit
        literal in a bit operation to cause binary-string evaluation:
      </p><pre class="programlisting">_binary <em class="replaceable"><code>literal</code></em>
BINARY <em class="replaceable"><code>literal</code></em>
CAST(<em class="replaceable"><code>literal</code></em> AS BINARY)
</pre><p>
        Another way to produce binary-string evaluation of hexadecimal
        literals or bit literals is to assign them to user-defined
        variables, which results in variables that have a binary string
        type:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @v1 = X&#39;40&#39;, @v2 = X&#39;01&#39;, @v3 = b&#39;11110001&#39;, @v4 = b&#39;01001111&#39;;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @v1 | @v2, @v3 &amp; @v4;</code></strong>
+-----------+-----------+
| @v1 | @v2 | @v3 &amp; @v4 |
+-----------+-----------+
| A         | A         |
+-----------+-----------+
</pre><p>
        In binary-string context, bitwise operation arguments must have
        the same length or an
        <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
        error occurs:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;40&#39; | X&#39;0001&#39;;</code></strong>
ERROR 3513 (HY000): Binary operands of bitwise
operators must be of equal length
</pre><p>
        To satisfy the equal-length requirement, pad the shorter value
        with leading zero digits or, if the longer value begins with
        leading zero digits and a shorter result value is acceptable,
        strip them:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;0040&#39; | X&#39;0001&#39;;</code></strong>
+---------------------------+
| _binary X&#39;0040&#39; | X&#39;0001&#39; |
+---------------------------+
|  A                        |
+---------------------------+
mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;40&#39; | X&#39;01&#39;;</code></strong>
+-----------------------+
| _binary X&#39;40&#39; | X&#39;01&#39; |
+-----------------------+
| A                     |
+-----------------------+
</pre><p>
        Padding or stripping can also be accomplished using functions
        such as <a class="link" href="string-functions.html#function_lpad"><code class="literal">LPAD()</code></a>,
        <a class="link" href="string-functions.html#function_rpad"><code class="literal">RPAD()</code></a>,
        <a class="link" href="string-functions.html#function_substr"><code class="literal">SUBSTR()</code></a>, or
        <a class="link" href="cast-functions.html#function_cast"><code class="literal">CAST()</code></a>. In such cases, the
        expression arguments are no longer all literals and
        <code class="literal">_binary</code> becomes unnecessary. Examples:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LPAD(X&#39;40&#39;, 2, X&#39;00&#39;) | X&#39;0001&#39;;</code></strong>
+---------------------------------+
| LPAD(X&#39;40&#39;, 2, X&#39;00&#39;) | X&#39;0001&#39; |
+---------------------------------+
|  A                              |
+---------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT X&#39;40&#39; | SUBSTR(X&#39;0001&#39;, 2, 1);</code></strong>
+-------------------------------+
| X&#39;40&#39; | SUBSTR(X&#39;0001&#39;, 2, 1) |
+-------------------------------+
| A                             |
+-------------------------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-binary-string-examples"></a>Binary String Bit-Operation Examples</h3></div></div></div><p>
        The following example illustrates use of bit operations to
        extract parts of a UUID value, in this case, the timestamp and
        IEEE 802 node number. This technique requires bitmasks for each
        extracted part.
      </p><p>
        Convert the text UUID to the corresponding 16-byte binary value
        so that it can be manipulated using bit operations in
        binary-string context:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @uuid = UUID_TO_BIN(&#39;6ccd780c-baba-1026-9564-5b8c656024db&#39;);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(@uuid);</code></strong>
+----------------------------------+
| HEX(@uuid)                       |
+----------------------------------+
| 6CCD780CBABA102695645B8C656024DB |
+----------------------------------+
</pre><p>
        Construct bitmasks for the timestamp and node number parts of
        the value. The timestamp comprises the first three parts (64
        bits, bits 0 to 63) and the node number is the last part (48
        bits, bits 80 to 127):
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ts_mask = CAST(X&#39;FFFFFFFFFFFFFFFF&#39; AS BINARY(16));</code></strong>
mysql&gt; <strong class="userinput"><code>SET @node_mask = CAST(X&#39;FFFFFFFFFFFF&#39; AS BINARY(16)) &gt;&gt; 80;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(@ts_mask);</code></strong>
+----------------------------------+
| HEX(@ts_mask)                    |
+----------------------------------+
| FFFFFFFFFFFFFFFF0000000000000000 |
+----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(@node_mask);</code></strong>
+----------------------------------+
| HEX(@node_mask)                  |
+----------------------------------+
| 00000000000000000000FFFFFFFFFFFF |
+----------------------------------+
</pre><p>
        The <code class="literal">CAST(... AS BINARY(16))</code> function is used
        here because the masks must be the same length as the UUID value
        against which they are applied. The same result can be produced
        using other functions to pad the masks to the required length:
      </p><pre class="programlisting">SET @ts_mask= RPAD(X&#39;FFFFFFFFFFFFFFFF&#39; , 16, X&#39;00&#39;);
SET @node_mask = LPAD(X&#39;FFFFFFFFFFFF&#39;, 16, X&#39;00&#39;) ;
</pre><p>
        Use the masks to extract the timestamp and node number parts:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(@uuid &amp; @ts_mask) AS &#39;timestamp part&#39;;</code></strong>
+----------------------------------+
| timestamp part                   |
+----------------------------------+
| 6CCD780CBABA10260000000000000000 |
+----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(@uuid &amp; @node_mask) AS &#39;node part&#39;;</code></strong>
+----------------------------------+
| node part                        |
+----------------------------------+
| 000000000000000000005B8C656024DB |
+----------------------------------+
</pre><p>
        The preceding example uses these bit operations: right shift
        (<a class="link" href="bit-functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>)
        and bitwise AND
        (<a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>).
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          <a class="link" href="miscellaneous-functions.html#function_uuid-to-bin"><code class="literal">UUID_TO_BIN()</code></a> takes a flag that
          causes some bit rearrangement in the resulting binary UUID
          value. If you use that flag, modify the extraction masks
          accordingly.
        </p></div><p>
        The next example uses bit operations to extract the network and
        host parts of an IPv6 address. Suppose that the network part has
        a length of 80 bits. Then the host part has a length of 128
        &minus; 80 = 48 bits. To extract the network and host parts of
        the address, convert it to a binary string, then use bit
        operations in binary-string context.
      </p><p>
        Convert the text IPv6 address to the corresponding binary
        string:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ip = INET6_ATON(&#39;fe80::219:d1ff:fe91:1a72&#39;);</code></strong>
</pre><p>
        Define the network length in bits:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @net_len = 80;</code></strong>
</pre><p>
        Construct network and host masks by shifting the all-ones
        address left or right. To do this, begin with the address
        <code class="literal">::</code>, which is shorthand for all zeros, as you
        can see by converting it to a binary string like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON(&#39;::&#39;)) AS &#39;all zeros&#39;;</code></strong>
+----------------------------------+
| all zeros                        |
+----------------------------------+
| 00000000000000000000000000000000 |
+----------------------------------+
</pre><p>
        To produce the complementary value (all ones), use the
        <a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a>
        operator to invert the bits:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(~INET6_ATON(&#39;::&#39;)) AS &#39;all ones&#39;;</code></strong>
+----------------------------------+
| all ones                         |
+----------------------------------+
| FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF |
+----------------------------------+
</pre><p>
        Shift the all-ones value left or right to produce the network
        and host masks:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @net_mask = ~INET6_ATON(&#39;::&#39;) &lt;&lt; (128 - @net_len);</code></strong>
mysql&gt; <strong class="userinput"><code>SET @host_mask = ~INET6_ATON(&#39;::&#39;) &gt;&gt; @net_len;</code></strong>
</pre><p>
        Display the masks to verify that they cover the correct parts of
        the address:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(@net_mask) AS &#39;network mask&#39;;</code></strong>
+----------------------------+
| network mask               |
+----------------------------+
| ffff:ffff:ffff:ffff:ffff:: |
+----------------------------+
mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(@host_mask) AS &#39;host mask&#39;;</code></strong>
+------------------------+
| host mask              |
+------------------------+
| ::ffff:255.255.255.255 |
+------------------------+
</pre><p>
        Extract and display the network and host parts of the address:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @net_part = @ip &amp; @net_mask;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @host_part = @ip &amp; @host_mask;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(@net_part) AS &#39;network part&#39;;</code></strong>
+-----------------+
| network part    |
+-----------------+
| fe80::219:0:0:0 |
+-----------------+
mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(@host_part) AS &#39;host part&#39;;</code></strong>
+------------------+
| host part        |
+------------------+
| ::d1ff:fe91:1a72 |
+------------------+
</pre><p>
        The preceding example uses these bit operations: Complement
        (<a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a>),
        left shift
        (<a class="link" href="bit-functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>),
        and bitwise AND
        (<a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>).
      </p><p>
        The remaining discussion provides details on argument handling
        for each group of bit operations, more information about
        literal-value handling in bit operations, and potential
        incompatibilities between MySQL 8.0 and older MySQL versions.
      </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-and-or-xor"></a>Bitwise AND, OR, and XOR Operations</h3></div></div></div><p>
        For <a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>,
        <a class="link" href="bit-functions.html#operator_bitwise-or"><code class="literal">|</code></a>, and
        <a class="link" href="bit-functions.html#operator_bitwise-xor"><code class="literal">^</code></a> bit
        operations, the result type depends on whether the arguments are
        evaluated as binary strings or numbers:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Binary-string evaluation occurs when the arguments have a
            binary string type, and at least one of them is not a
            hexadecimal literal, bit literal, or <code class="literal">NULL</code>
            literal. Numeric evaluation occurs otherwise, with argument
            conversion to unsigned 64-bit integers as necessary.
          </p></li><li class="listitem"><p>
            Binary-string evaluation produces a binary string of the
            same length as the arguments. If the arguments have unequal
            lengths, an
            <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
            error occurs. Numeric evaluation produces an unsigned 64-bit
            integer.
          </p></li></ul></div><p>
        Examples of numeric evaluation:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 64 | 1, X&#39;40&#39; | X&#39;01&#39;;</code></strong>
+--------+---------------+
| 64 | 1 | X&#39;40&#39; | X&#39;01&#39; |
+--------+---------------+
|     65 |            65 |
+--------+---------------+
</pre><p>
        Examples of binary-string evaluation:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;40&#39; | X&#39;01&#39;;</code></strong>
+-----------------------+
| _binary X&#39;40&#39; | X&#39;01&#39; |
+-----------------------+
| A                     |
+-----------------------+
mysql&gt; <strong class="userinput"><code>SET @var1 = X&#39;40&#39;, @var2 = X&#39;01&#39;;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @var1 | @var2;</code></strong>
+---------------+
| @var1 | @var2 |
+---------------+
| A             |
+---------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-complement-shift"></a>Bitwise Complement and Shift Operations</h3></div></div></div><p>
        For <a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a>,
        <a class="link" href="bit-functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>,
        and
        <a class="link" href="bit-functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>
        bit operations, the result type depends on whether the bit
        argument is evaluated as a binary string or number:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Binary-string evaluation occurs when the bit argument has a
            binary string type, and is not a hexadecimal literal, bit
            literal, or <code class="literal">NULL</code> literal. Numeric
            evaluation occurs otherwise, with argument conversion to an
            unsigned 64-bit integer as necessary.
          </p></li><li class="listitem"><p>
            Binary-string evaluation produces a binary string of the
            same length as the bit argument. Numeric evaluation produces
            an unsigned 64-bit integer.
          </p></li></ul></div><p>
        For shift operations, bits shifted off the end of the value are
        lost without warning, regardless of the argument type. In
        particular, if the shift count is greater or equal to the number
        of bits in the bit argument, all bits in the result are 0.
      </p><p>
        Examples of numeric evaluation:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ~0, 64 &lt;&lt; 2, X&#39;40&#39; &lt;&lt; 2;</code></strong>
+----------------------+---------+------------+
| ~0                   | 64 &lt;&lt; 2 | X&#39;40&#39; &lt;&lt; 2 |
+----------------------+---------+------------+
| 18446744073709551615 |     256 |        256 |
+----------------------+---------+------------+
</pre><p>
        Examples of binary-string evaluation:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;1111000022220000&#39; &gt;&gt; 16);</code></strong>
+----------------------------------------+
| HEX(_binary X&#39;1111000022220000&#39; &gt;&gt; 16) |
+----------------------------------------+
| 0000111100002222                       |
+----------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;1111000022220000&#39; &lt;&lt; 16);</code></strong>
+----------------------------------------+
| HEX(_binary X&#39;1111000022220000&#39; &lt;&lt; 16) |
+----------------------------------------+
| 0000222200000000                       |
+----------------------------------------+
mysql&gt; <strong class="userinput"><code>SET @var1 = X&#39;F0F0F0F0&#39;;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(~@var1);</code></strong>
+-------------+
| HEX(~@var1) |
+-------------+
| 0F0F0F0F    |
+-------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-bit-count"></a>BIT_COUNT() Operations</h3></div></div></div><p>
        The <a class="link" href="bit-functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a> function always
        returns an unsigned 64-bit integer, or <code class="literal">NULL</code>
        if the argument is <code class="literal">NULL</code>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(127);</code></strong>
+----------------+
| BIT_COUNT(127) |
+----------------+
|              7 |
+----------------+
mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(b&#39;010101&#39;), BIT_COUNT(_binary b&#39;010101&#39;);</code></strong>
+----------------------+------------------------------+
| BIT_COUNT(b&#39;010101&#39;) | BIT_COUNT(_binary b&#39;010101&#39;) |
+----------------------+------------------------------+
|                    3 |                            3 |
+----------------------+------------------------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-bit-aggregate"></a>BIT_AND(), BIT_OR(), and BIT_XOR() Operations</h3></div></div></div><p>
        For the <a class="link" href="aggregate-functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a>,
        <a class="link" href="aggregate-functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a>, and
        <a class="link" href="aggregate-functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a> bit functions, the
        result type depends on whether the function argument values are
        evaluated as binary strings or numbers:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Binary-string evaluation occurs when the argument values
            have a binary string type, and the argument is not a
            hexadecimal literal, bit literal, or <code class="literal">NULL</code>
            literal. Numeric evaluation occurs otherwise, with argument
            value conversion to unsigned 64-bit integers as necessary.
          </p></li><li class="listitem"><p>
            Binary-string evaluation produces a binary string of the
            same length as the argument values. If argument values have
            unequal lengths, an
            <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
            error occurs. If the argument size exceeds 511 bytes, an
            <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_aggregate_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_AGGREGATE_OPERANDS_SIZE</code></a>
            error occurs. Numeric evaluation produces an unsigned 64-bit
            integer.
          </p></li></ul></div><p>
        <code class="literal">NULL</code> values do not affect the result unless
        all values are <code class="literal">NULL</code>. In that case, the result
        is a neutral value having the same length as the length of the
        argument values (all bits 1 for
        <a class="link" href="aggregate-functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a>, all bits 0 for
        <a class="link" href="aggregate-functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a>, and
        <a class="link" href="aggregate-functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a>).
      </p><p>
        Example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t (group_id INT, a VARBINARY(6));</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (1, NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (1, NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (2, NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (2, X&#39;1234&#39;);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (2, X&#39;FF34&#39;);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(BIT_AND(a)), HEX(BIT_OR(a)), HEX(BIT_XOR(a))</code></strong>
       <strong class="userinput"><code>FROM t GROUP BY group_id;</code></strong>
+-----------------+----------------+-----------------+
| HEX(BIT_AND(a)) | HEX(BIT_OR(a)) | HEX(BIT_XOR(a)) |
+-----------------+----------------+-----------------+
| FFFFFFFFFFFF    | 000000000000   | 000000000000    |
| 1234            | FF34           | ED00            |
+-----------------+----------------+-----------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-literal-handling"></a>Special Handling of Hexadecimal Literals, Bit Literals, and NULL
        Literals</h3></div></div></div><p>
        For backward compatibility, MySQL 8.0 evaluates bit operations
        in numeric context when all bit arguments are hexadecimal
        literals, bit literals, or <code class="literal">NULL</code> literals.
        That is, bit operations on binary-string bit arguments do not
        use binary-string evaluation if all bit arguments are unadorned
        hexadecimal literals, bit literals, or <code class="literal">NULL</code>
        literals. (This does not apply to such literals if they are
        written with a <code class="literal">_binary</code> introducer,
        <a class="link" href="cast-functions.html#operator_binary"><code class="literal">BINARY</code></a> operator, or other way of
        specifying them explicitly as binary strings.)
      </p><p>
        The literal handling just described is the same as prior to
        MySQL 8.0. Examples:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            These bit operations evaluate the literals in numeric
            context and produce a <code class="literal">BIGINT</code> result:
          </p><pre class="programlisting">b&#39;0001&#39; | b&#39;0010&#39;
X&#39;0008&#39; &lt;&lt; 8
</pre></li><li class="listitem"><p>
            These bit operations evaluate <code class="literal">NULL</code> in
            numeric context and produce a <code class="literal">BIGINT</code>
            result that has a <code class="literal">NULL</code> value:
          </p><pre class="programlisting">NULL &amp; NULL
NULL &gt;&gt; 4
</pre></li></ul></div><p>
        In MySQL 8.0, you can cause those operations to evaluate the
        arguments in binary-string context by indicating explicitly that
        at least one argument is a binary string:
      </p><pre class="programlisting">_binary b&#39;0001&#39; | b&#39;0010&#39;
_binary X&#39;0008&#39; &lt;&lt; 8
BINARY NULL &amp; NULL
BINARY NULL &gt;&gt; 4
</pre><p>
        The result of the last two expressions is
        <code class="literal">NULL</code>, just as without the
        <code class="literal">BINARY</code> operator, but the data type of the
        result is a binary string type rather than an integer type.
      </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a id="bit-operations-incompatibilities"></a>Bit-Operation Incompatibilities with MySQL 5.7</h3></div></div></div><p>
        Because bit operations can handle binary string arguments
        natively in MySQL 8.0, some expressions produce a different
        result in MySQL 8.0 than in 5.7. The five problematic expression
        types to watch out for are:
      </p><pre class="programlisting"><em class="replaceable"><code>nonliteral_binary</code></em> { &amp; | ^ } <em class="replaceable"><code>binary</code></em>
<em class="replaceable"><code>binary</code></em>  { &amp; | ^ } <em class="replaceable"><code>nonliteral_binary</code></em>
<em class="replaceable"><code>nonliteral_binary</code></em> { &lt;&lt; &gt;&gt; } <em class="replaceable"><code>anything</code></em>
~ <em class="replaceable"><code>nonliteral_binary</code></em>
<em class="replaceable"><code>AGGR_BIT_FUNC</code></em>(<em class="replaceable"><code>nonliteral_binary</code></em>)
</pre><p>
        Those expressions return <a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>
        in MySQL 5.7, binary string in 8.0.
      </p><p>
        Explanation of notation:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">{ <em class="replaceable"><code>op1</code></em>
            <em class="replaceable"><code>op2</code></em> ... }</code>: List of
            operators that apply to the given expression type.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>binary</code></em>: Any kind of binary string
            argument, including a hexadecimal literal, bit literal, or
            <code class="literal">NULL</code> literal.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>nonliteral_binary</code></em>: An argument
            that is a binary string value other than a hexadecimal
            literal, bit literal, or <code class="literal">NULL</code> literal.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>AGGR_BIT_FUNC</code></em>: An aggregate
            function that takes bit-value arguments:
            <a class="link" href="aggregate-functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a>,
            <a class="link" href="aggregate-functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a>,
            <a class="link" href="aggregate-functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a>.
          </p></li></ul></div><p>
        For information about how to prepare in MySQL 5.7 for potential
        incompatibilities between MySQL 5.7 and 8.0, see
        <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-5.7-en/bit-functions.html" target="_top">Bit Functions and Operators</a>, in
        <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-5.7-en/" target="_top">MySQL 5.7 Reference Manual</a>.
      </p><p>
        The following list describes available bit functions and
        operators:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="operator_bitwise-or"></a><p>
            <a class="link" href="bit-functions.html#operator_bitwise-or"><code class="literal">|</code></a>
          </p><a id="idm45828926098080" class="indexterm"></a><a id="idm45828926097008" class="indexterm"></a><p>
            Bitwise OR.
          </p><p>
            The result type depends on whether the arguments are
            evaluated as binary strings or numbers:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the arguments have
                a binary string type, and at least one of them is not a
                hexadecimal literal, bit literal, or
                <code class="literal">NULL</code> literal. Numeric evaluation
                occurs otherwise, with argument conversion to unsigned
                64-bit integers as necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the arguments. If the arguments have
                unequal lengths, an
                <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
                error occurs. Numeric evaluation produces an unsigned
                64-bit integer.
              </p></li></ul></div><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 29 | 15;</code></strong>
        -&gt; 31
mysql&gt; <strong class="userinput"><code>SELECT _binary X&#39;40404040&#39; | X&#39;01020304&#39;;</code></strong>
        -&gt; &#39;ABCD&#39;
</pre><p>
            If bitwise OR is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="operator_bitwise-and"></a><p>
            <a class="link" href="bit-functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>
          </p><a id="idm45828926077056" class="indexterm"></a><a id="idm45828926075968" class="indexterm"></a><p>
            Bitwise AND.
          </p><p>
            The result type depends on whether the arguments are
            evaluated as binary strings or numbers:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the arguments have
                a binary string type, and at least one of them is not a
                hexadecimal literal, bit literal, or
                <code class="literal">NULL</code> literal. Numeric evaluation
                occurs otherwise, with argument conversion to unsigned
                64-bit integers as necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the arguments. If the arguments have
                unequal lengths, an
                <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
                error occurs. Numeric evaluation produces an unsigned
                64-bit integer.
              </p></li></ul></div><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 29 &amp; 15;</code></strong>
        -&gt; 13
mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;FF&#39; &amp; b&#39;11110000&#39;);</code></strong>
        -&gt; &#39;F0&#39;
</pre><p>
            If bitwise AND is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="operator_bitwise-xor"></a><p>
            <a class="link" href="bit-functions.html#operator_bitwise-xor"><code class="literal">^</code></a>
          </p><a id="idm45828926056080" class="indexterm"></a><a id="idm45828926055008" class="indexterm"></a><p>
            Bitwise XOR.
          </p><p>
            The result type depends on whether the arguments are
            evaluated as binary strings or numbers:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the arguments have
                a binary string type, and at least one of them is not a
                hexadecimal literal, bit literal, or
                <code class="literal">NULL</code> literal. Numeric evaluation
                occurs otherwise, with argument conversion to unsigned
                64-bit integers as necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the arguments. If the arguments have
                unequal lengths, an
                <a class="ulink" href="https://docs.oracle.com/cd/E17952_01/mysql-errors-8.0-en/server-error-reference.html#error_er_invalid_bitwise_operands_size" target="_top"><code class="literal">ER_INVALID_BITWISE_OPERANDS_SIZE</code></a>
                error occurs. Numeric evaluation produces an unsigned
                64-bit integer.
              </p></li></ul></div><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 ^ 1;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 1 ^ 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 11 ^ 3;</code></strong>
        -&gt; 8
mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;FEDC&#39; ^ X&#39;1111&#39;);</code></strong>
        -&gt; &#39;EFCD&#39;
</pre><p>
            If bitwise XOR is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="operator_left-shift"></a><p>
            <a class="link" href="bit-functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>
          </p><a id="idm45828926033632" class="indexterm"></a><p>
            Shifts a longlong (<a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>)
            number or binary string to the left.
          </p><p>
            The result type depends on whether the bit argument is
            evaluated as a binary string or number:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the bit argument
                has a binary string type, and is not a hexadecimal
                literal, bit literal, or <code class="literal">NULL</code>
                literal. Numeric evaluation occurs otherwise, with
                argument conversion to an unsigned 64-bit integer as
                necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the bit argument. Numeric evaluation
                produces an unsigned 64-bit integer.
              </p></li></ul></div><p>
            Bits shifted off the end of the value are lost without
            warning, regardless of the argument type. In particular, if
            the shift count is greater or equal to the number of bits in
            the bit argument, all bits in the result are 0.
          </p><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 &lt;&lt; 2;</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;00FF00FF00FF&#39; &lt;&lt; 8);</code></strong>
        -&gt; &#39;FF00FF00FF00&#39;
</pre><p>
            If a bit shift is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="operator_right-shift"></a><p>
            <a class="link" href="bit-functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>
          </p><a id="idm45828926013392" class="indexterm"></a><p>
            Shifts a longlong (<a class="link" href="integer-types.html" title="11.1.2&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>)
            number or binary string to the right.
          </p><p>
            The result type depends on whether the bit argument is
            evaluated as a binary string or number:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the bit argument
                has a binary string type, and is not a hexadecimal
                literal, bit literal, or <code class="literal">NULL</code>
                literal. Numeric evaluation occurs otherwise, with
                argument conversion to an unsigned 64-bit integer as
                necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the bit argument. Numeric evaluation
                produces an unsigned 64-bit integer.
              </p></li></ul></div><p>
            Bits shifted off the end of the value are lost without
            warning, regardless of the argument type. In particular, if
            the shift count is greater or equal to the number of bits in
            the bit argument, all bits in the result are 0.
          </p><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 4 &gt;&gt; 2;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT HEX(_binary X&#39;00FF00FF00FF&#39; &gt;&gt; 8);</code></strong>
        -&gt; &#39;0000FF00FF00&#39;
</pre><p>
            If a bit shift is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="operator_bitwise-invert"></a><p>
            <a class="link" href="bit-functions.html#operator_bitwise-invert"><code class="literal">~</code></a>
          </p><a id="idm45828925993152" class="indexterm"></a><p>
            Invert all bits.
          </p><p>
            The result type depends on whether the bit argument is
            evaluated as a binary string or number:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Binary-string evaluation occurs when the bit argument
                has a binary string type, and is not a hexadecimal
                literal, bit literal, or <code class="literal">NULL</code>
                literal. Numeric evaluation occurs otherwise, with
                argument conversion to an unsigned 64-bit integer as
                necessary.
              </p></li><li class="listitem"><p>
                Binary-string evaluation produces a binary string of the
                same length as the bit argument. Numeric evaluation
                produces an unsigned 64-bit integer.
              </p></li></ul></div><p>
            For more information, see the introductory discussion in
            this section.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 5 &amp; ~1;</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT HEX(~X&#39;0000FFFF1111EEEE&#39;);</code></strong>
        -&gt; &#39;FFFF0000EEEE1111&#39;
</pre><p>
            If bitwise inversion is invoked from within the
            <a class="link" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, binary string results
            display using hexadecimal notation, depending on the value
            of the <a class="link" href="mysql-command-options.html#option_mysql_binary-as-hex"><code class="option">--binary-as-hex</code></a>. For
            more information about that option, see
            <a class="xref" href="mysql.html" title="4.5.1&nbsp;mysql &mdash; The MySQL Command-Line Client">Section&nbsp;4.5.1, &ldquo;mysql &mdash; The MySQL Command-Line Client&rdquo;</a>.
          </p></li><li class="listitem"><a id="function_bit-count"></a><p>
            <a class="link" href="bit-functions.html#function_bit-count"><code class="literal">BIT_COUNT(<em class="replaceable"><code>N</code></em>)</code></a>
          </p><a id="idm45828925974464" class="indexterm"></a><p>
            Returns the number of bits that are set in the argument
            <em class="replaceable"><code>N</code></em> as an unsigned 64-bit integer,
            or <code class="literal">NULL</code> if the argument is
            <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(64), BIT_COUNT(BINARY 64);</code></strong>
        -&gt; 1, 7
mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(&#39;64&#39;), BIT_COUNT(_binary &#39;64&#39;);</code></strong>
        -&gt; 1, 7
mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(X&#39;40&#39;), BIT_COUNT(_binary X&#39;40&#39;);</code></strong>
        -&gt; 1, 1
</pre></li></ul></div></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="xml-functions.html">Previous <span class="navHint"> XML Functions </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="functions.html">Up <span class="navHint"> Functions and Operators </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="encryption-functions.html">Next <span class="navHint"> Encryption and Compression Functions </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>