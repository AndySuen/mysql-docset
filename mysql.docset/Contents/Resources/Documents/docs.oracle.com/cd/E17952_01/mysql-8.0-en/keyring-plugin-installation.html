<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-1801"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/6.4.4.3%C2%A0Keyring%20Plugin%20Installation"></a><title>6.4.4.3&nbsp;Keyring Plugin Installation</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="keyring.html" title="6.4.4&nbsp;The MySQL Keyring"/><link rel="prev" href="keyring-component-installation.html" title="6.4.4.2&nbsp;Keyring Component Installation"/><link rel="next" href="keyring-file-component.html" title="6.4.4.4&nbsp;Using the component_keyring_file File-Based Keyring Component"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="keyring-plugin-installation.html#keyring-plugin-installation">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="keyring-component-installation.html">Previous <span class="navHint"> Keyring Component Installation </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="keyring.html">Up <span class="navHint"> The MySQL Keyring </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="keyring-file-component.html">Next <span class="navHint"> Using the component_keyring_file File-Based Keyring Component </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><a class="dashingAutolink" name="autolink-1800"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.4.3%C2%A0Keyring%20Plugin%20Installation"></a><h4 class="title"><a id="keyring-plugin-installation"></a>6.4.4.3&nbsp;Keyring Plugin Installation</h4></div></div></div><a id="idm45828968693040" class="indexterm"></a><a id="idm45828968691552" class="indexterm"></a><a id="idm45828968690064" class="indexterm"></a><a id="idm45828968688560" class="indexterm"></a><a id="idm45828968687072" class="indexterm"></a><a id="idm45828968685584" class="indexterm"></a><a id="idm45828968684096" class="indexterm"></a><a id="idm45828968682608" class="indexterm"></a><a id="idm45828968681120" class="indexterm"></a><a id="idm45828968679616" class="indexterm"></a><a id="idm45828968678128" class="indexterm"></a><a id="idm45828968676640" class="indexterm"></a><p>
        Keyring service consumers require that a keyring component or
        plugin be installed:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            To use a keyring plugin, begin with the instructions here.
            (Also, for general information about installing plugins, see
            <a class="xref" href="plugin-loading.html" title="5.6.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.6.1, &ldquo;Installing and Uninstalling Plugins&rdquo;</a>.)
          </p></li><li class="listitem"><p>
            To use a keyring component instead, begin with
            <a class="xref" href="keyring-component-installation.html" title="6.4.4.2&nbsp;Keyring Component Installation">Section&nbsp;6.4.4.2, &ldquo;Keyring Component Installation&rdquo;</a>.
          </p></li><li class="listitem"><p>
            If you intend to use keyring functions in conjunction with
            the chosen keyring component or plugin, install the
            functions after installing that component or plugin, using
            the instructions in
            <a class="xref" href="keyring-functions-general-purpose.html" title="6.4.4.15&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.15, &ldquo;General-Purpose Keyring Key-Management Functions&rdquo;</a>.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">Note</div><p>
          Only one keyring component or plugin should be enabled at a
          time. Enabling multiple keyring components or plugins is
          unsupported and results may not be as anticipated.
        </p><p>
          A keyring component must be enabled on the MySQL Server
          instance if you need to support secure storage for persisted
          system variable values, rather than a keyring plugin, which do
          not support the function. See
          <a class="xref" href="persisted-system-variables.html#persisted-system-variables-sensitive" title="Persisting Sensitive System Variables">Persisting Sensitive System Variables</a>.
        </p></div><p>
        MySQL provides these keyring plugin choices:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">keyring_file</code> (deprecated as of MySQL
            8.0.34): Stores keyring data in a file local to the server
            host. Available in MySQL Community Edition and MySQL Enterprise Edition distributions. For
            instructions about installing the component that replaces
            this plugin, see
            <a class="xref" href="keyring-component-installation.html" title="6.4.4.2&nbsp;Keyring Component Installation">Section&nbsp;6.4.4.2, &ldquo;Keyring Component Installation&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_encrypted_file</code> (deprecated as of
            MySQL 8.0.34): Stores keyring data in an encrypted,
            password-protected file local to the server host. Available
            in MySQL Enterprise Edition distributions. For instructions about installing
            the component that replaces this plugin, see
            <a class="xref" href="keyring-component-installation.html" title="6.4.4.2&nbsp;Keyring Component Installation">Section&nbsp;6.4.4.2, &ldquo;Keyring Component Installation&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_okv</code>: A KMIP 1.1 plugin for use
            with KMIP-compatible back end keyring storage products such
            as Oracle Key Vault and Gemalto SafeNet KeySecure Appliance.
            Available in MySQL Enterprise Edition distributions.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_aws</code>: Communicates with the Amazon
            Web Services Key Management Service as a back end for key
            generation and uses a local file for key storage. Available
            in MySQL Enterprise Edition distributions.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_hashicorp</code>: Communicates with
            HashiCorp Vault for back end storage. Available in MySQL Enterprise Edition
            distributions.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_oci</code>(deprecated as of MySQL
            8.0.31): Communicates with Oracle Cloud Infrastructure Vault
            for back end storage. See
            <a class="xref" href="keyring-oci-plugin.html" title="6.4.4.12&nbsp;Using the Oracle Cloud Infrastructure Vault Keyring Plugin">Section&nbsp;6.4.4.12, &ldquo;Using the Oracle Cloud Infrastructure Vault Keyring Plugin&rdquo;</a>.
          </p></li></ul></div><p>
        To be usable by the server, the plugin library file must be
        located in the MySQL plugin directory (the directory named by
        the <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
        variable). If necessary, configure the plugin directory location
        by setting the value of
        <a class="link" href="server-system-variables.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
      </p><p>
        A keyring component or plugin must be loaded early during the
        server startup sequence so that other components can access it
        as necessary during their own initialization. For example, the
        <code class="literal">InnoDB</code> storage engine uses the keyring for
        tablespace encryption, so a keyring component or plugin must be
        loaded and available prior to <code class="literal">InnoDB</code>
        initialization.
      </p><p>
        Installation for each keyring plugin is similar. The following
        instructions describe how to install
        <code class="literal">keyring_file</code>. To use a different keyring
        plugin, substitute its name for <code class="literal">keyring_file</code>.
      </p><p>
        The <code class="literal">keyring_file</code> plugin library file base
        name is <code class="literal">keyring_file</code>. The file name suffix
        differs per platform (for example, <code class="filename">.so</code> for
        Unix and Unix-like systems, <code class="filename">.dll</code> for
        Windows).
      </p><p>
        To load the plugin, use the
        <a class="link" href="server-options.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option to
        name the plugin library file that contains it. For example, on
        platforms where the plugin library file suffix is
        <code class="filename">.so</code>, use these lines in the server
        <code class="filename">my.cnf</code> file, adjusting the
        <code class="filename">.so</code> suffix for your platform as necessary:
      </p><pre class="programlisting">[mysqld]
early-plugin-load=keyring_file.so
</pre><p>
        Before starting the server, check the notes for your chosen
        keyring plugin for configuration instructions specific to that
        plugin:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">keyring_file</code>:
            <a class="xref" href="keyring-file-plugin.html" title="6.4.4.6&nbsp;Using the keyring_file File-Based Keyring Plugin">Section&nbsp;6.4.4.6, &ldquo;Using the keyring_file File-Based Keyring Plugin&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_encrypted_file</code>:
            <a class="xref" href="keyring-encrypted-file-plugin.html" title="6.4.4.7&nbsp;Using the keyring_encrypted_file Encrypted File-Based Keyring Plugin">Section&nbsp;6.4.4.7, &ldquo;Using the keyring_encrypted_file Encrypted File-Based Keyring Plugin&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_okv</code>:
            <a class="xref" href="keyring-okv-plugin.html" title="6.4.4.8&nbsp;Using the keyring_okv KMIP Plugin">Section&nbsp;6.4.4.8, &ldquo;Using the keyring_okv KMIP Plugin&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_aws</code>:
            <a class="xref" href="keyring-aws-plugin.html" title="6.4.4.9&nbsp;Using the keyring_aws Amazon Web Services Keyring Plugin">Section&nbsp;6.4.4.9, &ldquo;Using the keyring_aws Amazon Web Services Keyring Plugin&rdquo;</a>
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_hashicorp</code>:
            <a class="xref" href="keyring-hashicorp-plugin.html" title="6.4.4.10&nbsp;Using the HashiCorp Vault Keyring Plugin">Section&nbsp;6.4.4.10, &ldquo;Using the HashiCorp Vault Keyring Plugin&rdquo;</a>
          </p></li><li class="listitem"><p>
            <code class="literal">keyring_oci</code>:
            <a class="xref" href="keyring-oci-plugin.html" title="6.4.4.12&nbsp;Using the Oracle Cloud Infrastructure Vault Keyring Plugin">Section&nbsp;6.4.4.12, &ldquo;Using the Oracle Cloud Infrastructure Vault Keyring Plugin&rdquo;</a>
          </p></li></ul></div><p>
        After performing any plugin-specific configuration, start the
        server. Verify plugin installation by examining the Information
        Schema <a class="link" href="information-schema-plugins-table.html" title="26.3.22&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">PLUGINS</code></a> table or use the
        <a class="link" href="show-plugins.html" title="13.7.7.25&nbsp;SHOW PLUGINS Statement"><code class="literal">SHOW PLUGINS</code></a> statement (see
        <a class="xref" href="obtaining-plugin-information.html" title="5.6.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.6.2, &ldquo;Obtaining Server Plugin Information&rdquo;</a>). For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE &#39;keyring%&#39;;</code></strong>
+--------------+---------------+
| PLUGIN_NAME  | PLUGIN_STATUS |
+--------------+---------------+
| keyring_file | ACTIVE        |
+--------------+---------------+
</pre><p>
        If the plugin fails to initialize, check the server error log
        for diagnostic messages.
      </p><p>
        Plugins can be loaded by methods other than
        <a class="link" href="server-options.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a>, such as the
        <a class="link" href="server-options.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
        <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option or the
        <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL PLUGIN</code></a> statement.
        However, keyring plugins loaded using those methods may be
        available too late in the server startup sequence for certain
        components that use the keyring, such as
        <code class="literal">InnoDB</code>:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Plugin loading using
            <a class="link" href="server-options.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
            <a class="link" href="server-options.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> occurs
            after <code class="literal">InnoDB</code> initialization.
          </p></li><li class="listitem"><p>
            Plugins installed using <a class="link" href="install-plugin.html" title="13.7.4.4&nbsp;INSTALL PLUGIN Statement"><code class="literal">INSTALL
            PLUGIN</code></a> are registered in the
            <code class="literal">mysql.plugin</code> system table and loaded
            automatically for subsequent server restarts. However,
            because <code class="literal">mysql.plugin</code> is an
            <code class="literal">InnoDB</code> table, any plugins named in it can
            be loaded during startup only after
            <code class="literal">InnoDB</code> initialization.
          </p></li></ul></div><p>
        If no keyring component or plugin is available when a component
        tries to access the keyring service, the service cannot be used
        by that component. As a result, the component may fail to
        initialize or may initialize with limited functionality. For
        example, if <code class="literal">InnoDB</code> finds that there are
        encrypted tablespaces when it initializes, it attempts to access
        the keyring. If the keyring is unavailable,
        <code class="literal">InnoDB</code> can access only unencrypted
        tablespaces. To ensure that <code class="literal">InnoDB</code> can access
        encrypted tablespaces as well, use
        <a class="link" href="server-options.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> to load the
        keyring plugin.
      </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="keyring-component-installation.html">Previous <span class="navHint"> Keyring Component Installation </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="keyring.html">Up <span class="navHint"> The MySQL Keyring </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="keyring-file-component.html">Next <span class="navHint"> Using the component_keyring_file File-Based Keyring Component </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>