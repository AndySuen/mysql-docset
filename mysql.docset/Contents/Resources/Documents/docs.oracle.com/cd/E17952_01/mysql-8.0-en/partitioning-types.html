<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-3083"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/24.2%C2%A0Partitioning%20Types"></a><title>24.2&nbsp;Partitioning Types</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="partitioning.html" title="Chapter&nbsp;24&nbsp;Partitioning"/><link rel="prev" href="partitioning-overview.html" title="24.1&nbsp;Overview of Partitioning in MySQL"/><link rel="next" href="partitioning-range.html" title="24.2.1&nbsp;RANGE Partitioning"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="partitioning-types.html#partitioning-types">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="partitioning-overview.html">Previous <span class="navHint"> Overview of Partitioning in MySQL </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="partitioning.html">Up <span class="navHint"> Partitioning </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="partitioning-range.html">Next <span class="navHint"> RANGE Partitioning </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="partitioning-types"></a>24.2&nbsp;Partitioning Types</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="partitioning-range.html">24.2.1 RANGE Partitioning</a></span></li><li><span class="section"><a href="partitioning-list.html">24.2.2 LIST Partitioning</a></span></li><li><span class="section"><a href="partitioning-columns.html">24.2.3 COLUMNS Partitioning</a></span></li><li><span class="section"><a href="partitioning-hash.html">24.2.4 HASH Partitioning</a></span></li><li><span class="section"><a href="partitioning-key.html">24.2.5 KEY Partitioning</a></span></li><li><span class="section"><a href="partitioning-subpartitions.html">24.2.6 Subpartitioning</a></span></li><li><span class="section"><a href="partitioning-handling-nulls.html">24.2.7 How MySQL Partitioning Handles NULL</a></span></li></ul></div><a id="idm45828802573040" class="indexterm"></a><p>
      This section discusses the types of partitioning which are
      available in MySQL 8.0. These include the types
      listed here:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="dashingAutolink" name="autolink-3079"></a><a class="dashAnchor" name="//apple_ref/cpp/Notation/RANGE%20partitioning."></a><strong>RANGE partitioning.&nbsp;</strong>
            This type of partitioning assigns rows to partitions based
            on column values falling within a given range. See
            <a class="xref" href="partitioning-range.html" title="24.2.1&nbsp;RANGE Partitioning">Section&nbsp;24.2.1, &ldquo;RANGE Partitioning&rdquo;</a>. For information about
            an extension to this type, <code class="literal">RANGE COLUMNS</code>,
            see <a class="xref" href="partitioning-columns-range.html" title="24.2.3.1&nbsp;RANGE COLUMNS partitioning">Section&nbsp;24.2.3.1, &ldquo;RANGE COLUMNS partitioning&rdquo;</a>.
          </p></li><li class="listitem"><p><a class="dashingAutolink" name="autolink-3080"></a><a class="dashAnchor" name="//apple_ref/cpp/Notation/LIST%20partitioning."></a><strong>LIST partitioning.&nbsp;</strong>
            Similar to partitioning by <code class="literal">RANGE</code>, except
            that the partition is selected based on columns matching one
            of a set of discrete values. See
            <a class="xref" href="partitioning-list.html" title="24.2.2&nbsp;LIST Partitioning">Section&nbsp;24.2.2, &ldquo;LIST Partitioning&rdquo;</a>. For information about
            an extension to this type, <code class="literal">LIST COLUMNS</code>,
            see <a class="xref" href="partitioning-columns-list.html" title="24.2.3.2&nbsp;LIST COLUMNS partitioning">Section&nbsp;24.2.3.2, &ldquo;LIST COLUMNS partitioning&rdquo;</a>.
          </p></li><li class="listitem"><p><a class="dashingAutolink" name="autolink-3081"></a><a class="dashAnchor" name="//apple_ref/cpp/Notation/HASH%20partitioning."></a><strong>HASH partitioning.&nbsp;</strong>
            With this type of partitioning, a partition is selected
            based on the value returned by a user-defined expression
            that operates on column values in rows to be inserted into
            the table. The function may consist of any expression valid
            in MySQL that yields an integer value. See
            <a class="xref" href="partitioning-hash.html" title="24.2.4&nbsp;HASH Partitioning">Section&nbsp;24.2.4, &ldquo;HASH Partitioning&rdquo;</a>.
          </p><p>
          An extension to this type, <code class="literal">LINEAR HASH</code>, is
          also available, see
          <a class="xref" href="partitioning-linear-hash.html" title="24.2.4.1&nbsp;LINEAR HASH Partitioning">Section&nbsp;24.2.4.1, &ldquo;LINEAR HASH Partitioning&rdquo;</a>.
        </p></li><li class="listitem"><p><a class="dashingAutolink" name="autolink-3082"></a><a class="dashAnchor" name="//apple_ref/cpp/Notation/KEY%20partitioning."></a><strong>KEY partitioning.&nbsp;</strong>
            This type of partitioning is similar to partitioning by
            <code class="literal">HASH</code>, except that only one or more
            columns to be evaluated are supplied, and the MySQL server
            provides its own hashing function. These columns can contain
            other than integer values, since the hashing function
            supplied by MySQL guarantees an integer result regardless of
            the column data type. An extension to this type,
            <code class="literal">LINEAR KEY</code>, is also available. See
            <a class="xref" href="partitioning-key.html" title="24.2.5&nbsp;KEY Partitioning">Section&nbsp;24.2.5, &ldquo;KEY Partitioning&rdquo;</a>.
          </p></li></ul></div><a id="idm45828802553184" class="indexterm"></a><a id="idm45828802551696" class="indexterm"></a><p>
      A very common use of database partitioning is to segregate data by
      date. Some database systems support explicit date partitioning,
      which MySQL does not implement in 8.0. However, it is
      not difficult in MySQL to create partitioning schemes based on
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>,
      <a class="link" href="time.html" title="11.2.3&nbsp;The TIME Type"><code class="literal">TIME</code></a>, or
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> columns, or based on
      expressions making use of such columns.
    </p><p>
      When partitioning by <code class="literal">KEY</code> or <code class="literal">LINEAR
      KEY</code>, you can use a <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>,
      <a class="link" href="time.html" title="11.2.3&nbsp;The TIME Type"><code class="literal">TIME</code></a>, or
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> column as the partitioning
      column without performing any modification of the column value.
      For example, this table creation statement is perfectly valid in
      MySQL:
    </p><pre class="programlisting">CREATE TABLE members (
    firstname VARCHAR(25) NOT NULL,
    lastname VARCHAR(25) NOT NULL,
    username VARCHAR(16) NOT NULL,
    email VARCHAR(35),
    joined DATE NOT NULL
)
PARTITION BY KEY(joined)
PARTITIONS 6;
</pre><p>
      In MySQL 8.0, it is also possible to use a
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> or
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> column as the partitioning
      column using <code class="literal">RANGE COLUMNS</code> and <code class="literal">LIST
      COLUMNS</code> partitioning.
    </p><p>
      Other partitioning types require a partitioning expression that
      yields an integer value or <code class="literal">NULL</code>. If you wish to
      use date-based partitioning by <code class="literal">RANGE</code>,
      <code class="literal">LIST</code>, <code class="literal">HASH</code>, or
      <code class="literal">LINEAR HASH</code>, you can simply employ a function
      that operates on a <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>,
      <a class="link" href="time.html" title="11.2.3&nbsp;The TIME Type"><code class="literal">TIME</code></a>, or
      <a class="link" href="datetime.html" title="11.2.2&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> column and returns such a
      value, as shown here:
    </p><pre class="programlisting">CREATE TABLE members (
    firstname VARCHAR(25) NOT NULL,
    lastname VARCHAR(25) NOT NULL,
    username VARCHAR(16) NOT NULL,
    email VARCHAR(35),
    joined DATE NOT NULL
)
PARTITION BY RANGE( YEAR(joined) ) (
    PARTITION p0 VALUES LESS THAN (1960),
    PARTITION p1 VALUES LESS THAN (1970),
    PARTITION p2 VALUES LESS THAN (1980),
    PARTITION p3 VALUES LESS THAN (1990),
    PARTITION p4 VALUES LESS THAN MAXVALUE
);
</pre><p>
      Additional examples of partitioning using dates may be found in
      the following sections of this chapter:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="partitioning-range.html" title="24.2.1&nbsp;RANGE Partitioning">Section&nbsp;24.2.1, &ldquo;RANGE Partitioning&rdquo;</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="partitioning-hash.html" title="24.2.4&nbsp;HASH Partitioning">Section&nbsp;24.2.4, &ldquo;HASH Partitioning&rdquo;</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="partitioning-linear-hash.html" title="24.2.4.1&nbsp;LINEAR HASH Partitioning">Section&nbsp;24.2.4.1, &ldquo;LINEAR HASH Partitioning&rdquo;</a>
        </p></li></ul></div><p>
      For more complex examples of date-based partitioning, see the
      following sections:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="partitioning-pruning.html" title="24.4&nbsp;Partition Pruning">Section&nbsp;24.4, &ldquo;Partition Pruning&rdquo;</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="partitioning-subpartitions.html" title="24.2.6&nbsp;Subpartitioning">Section&nbsp;24.2.6, &ldquo;Subpartitioning&rdquo;</a>
        </p></li></ul></div><p>
      MySQL partitioning is optimized for use with the
      <a class="link" href="date-and-time-functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
      <a class="link" href="date-and-time-functions.html#function_year"><code class="literal">YEAR()</code></a>, and
      <a class="link" href="date-and-time-functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a> functions. However,
      you can use other date and time functions that return an integer
      or <code class="literal">NULL</code>, such as
      <a class="link" href="date-and-time-functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a>,
      <a class="link" href="date-and-time-functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a>, or
      <a class="link" href="date-and-time-functions.html#function_month"><code class="literal">MONTH()</code></a>. See
      <a class="xref" href="date-and-time-functions.html" title="12.7&nbsp;Date and Time Functions">Section&nbsp;12.7, &ldquo;Date and Time Functions&rdquo;</a>, for more information
      about such functions.
    </p><p>
      It is important to remember&mdash;regardless of the type of
      partitioning that you use&mdash;that partitions are always
      numbered automatically and in sequence when created, starting with
      <code class="literal">0</code>. When a new row is inserted into a
      partitioned table, it is these partition numbers that are used in
      identifying the correct partition. For example, if your table uses
      4 partitions, these partitions are numbered <code class="literal">0</code>,
      <code class="literal">1</code>, <code class="literal">2</code>, and
      <code class="literal">3</code>. For the <code class="literal">RANGE</code> and
      <code class="literal">LIST</code> partitioning types, it is necessary to
      ensure that there is a partition defined for each partition
      number. For <code class="literal">HASH</code> partitioning, the
      user-supplied expression must evaluate to an integer value. For
      <code class="literal">KEY</code> partitioning, this issue is taken care of
      automatically by the hashing function which the MySQL server
      employs internally.
    </p><p>
      Names of partitions generally follow the rules governing other
      MySQL identifiers, such as those for tables and databases.
      However, you should note that partition names are not
      case-sensitive. For example, the following
      <a class="link" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement"><code class="literal">CREATE TABLE</code></a> statement fails as
      shown:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (val INT)</code></strong>
    -&gt; <strong class="userinput"><code>PARTITION BY LIST(val)(</code></strong>
    -&gt;     <strong class="userinput"><code>PARTITION mypart VALUES IN (1,3,5),</code></strong>
    -&gt;     <strong class="userinput"><code>PARTITION MyPart VALUES IN (2,4,6)</code></strong>
    -&gt; <strong class="userinput"><code>);</code></strong>
ERROR 1488 (HY000): Duplicate partition name mypart
</pre><p>
      Failure occurs because MySQL sees no difference between the
      partition names <code class="literal">mypart</code> and
      <code class="literal">MyPart</code>.
    </p><p>
      When you specify the number of partitions for the table, this must
      be expressed as a positive, nonzero integer literal with no
      leading zeros, and may not be an expression such as
      <code class="literal">0.8E+01</code> or <code class="literal">6-2</code>, even if it
      evaluates to an integer value. Decimal fractions are not
      permitted.
    </p><p>
      In the sections that follow, we do not necessarily provide all
      possible forms for the syntax that can be used for creating each
      partition type; for this information, see
      <a class="xref" href="create-table.html" title="13.1.20&nbsp;CREATE TABLE Statement">Section&nbsp;13.1.20, &ldquo;CREATE TABLE Statement&rdquo;</a>.
    </p></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="partitioning-overview.html">Previous <span class="navHint"> Overview of Partitioning in MySQL </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="partitioning.html">Up <span class="navHint"> Partitioning </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="partitioning-range.html">Next <span class="navHint"> RANGE Partitioning </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>