<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><a class="dashingAutolink" name="autolink-901"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/8.14.3%C2%A0General%20Thread%20States"></a><title>8.14.3&nbsp;General Thread States</title><link rel="stylesheet" type="text/css" href="mvl-otn.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/><link rel="home" href="performance-schema" title="MySQL 8.0 Reference Manual"/><link rel="up" href="thread-information.html" title="8.14&nbsp;Examining Server Thread (Process) Information"/><link rel="prev" href="thread-commands.html" title="8.14.2&nbsp;Thread Command Values"/><link rel="next" href="source-thread-states.html" title="8.14.4&nbsp;Replication Source Thread States"/><script>window.ohcglobal || document.write('<script src="../../../en/dcommon/js/global.js">\x3C/script>')</script></head><body><div class="skip-link"><a href="general-thread-states.html#general-thread-states">Skip to Main Content</a></div><div class="DocTitle"><p>MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0</p></div><div class="navigation"><ul><li class="navLinkPrevious"><a accesskey="p" title="Go To Previous Page&nbsp;[access key: p]" href="thread-commands.html">Previous <span class="navHint"> Thread Command Values </span></a></li><li class="navLinkHome"><a accesskey="h" title="Go To Home Page&nbsp;[access key: h]" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a accesskey="u" title="Go Up A Level In The Navigation&nbsp;[access key: u]" href="thread-information.html">Up <span class="navHint"> Examining Server Thread (Process) Information </span></a></li><li class="navLinkNext"><a accesskey="n" title="Go To Next Page&nbsp;[access key: n]" href="source-thread-states.html">Next <span class="navHint"> Replication Source Thread States </span></a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="general-thread-states"></a>8.14.3&nbsp;General Thread States</h3></div></div></div><a id="idm45828948593744" class="indexterm"></a><p>
        The following list describes thread <code class="literal">State</code>
        values that are associated with general query processing and not
        more specialized activities such as replication. Many of these
        are useful only for finding bugs in the server.
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a id="idm45828948590128" class="indexterm"></a>

            <a id="idm45828948588640" class="indexterm"></a>

            <code class="literal">After create</code>
          </p><p>
            This occurs when the thread creates a table (including
            internal temporary tables), at the end of the function that
            creates the table. This state is used even if the table
            could not be created due to some error.
          </p></li><li class="listitem"><p>
            <a id="idm45828948585024" class="indexterm"></a>

            <a id="idm45828948583536" class="indexterm"></a>

            <code class="literal">altering table</code>
          </p><p>
            The server is in the process of executing an in-place
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948578880" class="indexterm"></a>

            <a id="idm45828948577392" class="indexterm"></a>

            <code class="literal">Analyzing</code>
          </p><p>
            The thread is calculating a <code class="literal">MyISAM</code> table
            key distributions (for example, for
            <a class="link" href="analyze-table.html" title="13.7.3.1&nbsp;ANALYZE TABLE Statement"><code class="literal">ANALYZE TABLE</code></a>).
          </p></li><li class="listitem"><p>
            <a id="idm45828948572000" class="indexterm"></a>

            <a id="idm45828948570512" class="indexterm"></a>

            <code class="literal">checking permissions</code>
          </p><p>
            The thread is checking whether the server has the required
            privileges to execute the statement.
          </p></li><li class="listitem"><p>
            <a id="idm45828948567040" class="indexterm"></a>

            <a id="idm45828948565552" class="indexterm"></a>

            <code class="literal">Checking table</code>
          </p><p>
            The thread is performing a table check operation.
          </p></li><li class="listitem"><p>
            <a id="idm45828948562128" class="indexterm"></a>

            <a id="idm45828948560640" class="indexterm"></a>

            <code class="literal">cleaning up</code>
          </p><p>
            The thread has processed one command and is preparing to
            free memory and reset certain state variables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948557152" class="indexterm"></a>

            <a id="idm45828948555664" class="indexterm"></a>

            <code class="literal">closing tables</code>
          </p><p>
            The thread is flushing the changed table data to disk and
            closing the used tables. This should be a fast operation. If
            not, verify that you do not have a full disk and that the
            disk is not in very heavy use.
          </p></li><li class="listitem"><p>
            <a id="idm45828948552048" class="indexterm"></a>

            <a id="idm45828948550528" class="indexterm"></a>

            <code class="literal">committing alter table to storage engine</code>
          </p><p>
            The server has finished an in-place
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a> and is committing
            the result.
          </p></li><li class="listitem"><p>
            <a id="idm45828948545792" class="indexterm"></a>

            <a id="idm45828948544288" class="indexterm"></a>

            <code class="literal">converting HEAP to ondisk</code>
          </p><p>
            The thread is converting an internal temporary table from a
            <code class="literal">MEMORY</code> table to an on-disk table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948540096" class="indexterm"></a>

            <a id="idm45828948538608" class="indexterm"></a>

            <code class="literal">copy to tmp table</code>
          </p><p>
            The thread is processing an <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER
            TABLE</code></a> statement. This state occurs after the table
            with the new structure has been created but before rows are
            copied into it.
          </p><p>
            For a thread in this state, the Performance Schema can be
            used to obtain about the progress of the copy operation. See
            <a class="xref" href="performance-schema-stage-tables.html" title="27.12.5&nbsp;Performance Schema Stage Event Tables">Section&nbsp;27.12.5, &ldquo;Performance Schema Stage Event Tables&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948532528" class="indexterm"></a>

            <a id="idm45828948531040" class="indexterm"></a>

            <code class="literal">Copying to group table</code>
          </p><p>
            If a statement has different <code class="literal">ORDER BY</code> and
            <code class="literal">GROUP BY</code> criteria, the rows are sorted by
            group and copied to a temporary table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948526128" class="indexterm"></a>

            <a id="idm45828948524640" class="indexterm"></a>

            <code class="literal">Copying to tmp table</code>
          </p><p>
            The server is copying to a temporary table in memory.
          </p></li><li class="listitem"><p>
            <a id="idm45828948521216" class="indexterm"></a>

            <a id="idm45828948519760" class="indexterm"></a>

            <code class="literal">Copying to tmp table on disk</code>
          </p><p>
            The server is copying to a temporary table on disk. The
            temporary result set has become too large (see
            <a class="xref" href="internal-temporary-tables.html" title="8.4.4&nbsp;Internal Temporary Table Use in MySQL">Section&nbsp;8.4.4, &ldquo;Internal Temporary Table Use in MySQL&rdquo;</a>). Consequently,
            the thread is changing the temporary table from in-memory to
            disk-based format to save memory.
          </p></li><li class="listitem"><p>
            <a id="idm45828948515360" class="indexterm"></a>

            <a id="idm45828948513872" class="indexterm"></a>

            <code class="literal">Creating index</code>
          </p><p>
            The thread is processing <code class="literal">ALTER TABLE ... ENABLE
            KEYS</code> for a <code class="literal">MyISAM</code> table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948509088" class="indexterm"></a>

            <a id="idm45828948507600" class="indexterm"></a>

            <code class="literal">Creating sort index</code>
          </p><p>
            The thread is processing a
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> that is resolved using
            an internal temporary table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948502912" class="indexterm"></a>

            <a id="idm45828948501424" class="indexterm"></a>

            <code class="literal">creating table</code>
          </p><p>
            The thread is creating a table. This includes creation of
            temporary tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948497968" class="indexterm"></a>

            <a id="idm45828948496480" class="indexterm"></a>

            <code class="literal">Creating tmp table</code>
          </p><p>
            The thread is creating a temporary table in memory or on
            disk. If the table is created in memory but later is
            converted to an on-disk table, the state during that
            operation is <code class="literal">Copying to tmp table on
            disk</code>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948492160" class="indexterm"></a>

            <a id="idm45828948490656" class="indexterm"></a>

            <code class="literal">deleting from main table</code>
          </p><p>
            The server is executing the first part of a multiple-table
            delete. It is deleting only from the first table, and saving
            columns and offsets to be used for deleting from the other
            (reference) tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948487024" class="indexterm"></a>

            <a id="idm45828948485520" class="indexterm"></a>

            <code class="literal">deleting from reference tables</code>
          </p><p>
            The server is executing the second part of a multiple-table
            delete and deleting the matched rows from the other tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948481984" class="indexterm"></a>

            <a id="idm45828948480480" class="indexterm"></a>

            <code class="literal">discard_or_import_tablespace</code>
          </p><p>
            The thread is processing an <code class="literal">ALTER TABLE ... DISCARD
            TABLESPACE</code> or <code class="literal">ALTER TABLE ... IMPORT
            TABLESPACE</code> statement.
          </p></li><li class="listitem"><p>
            <a id="idm45828948475552" class="indexterm"></a>

            <a id="idm45828948474096" class="indexterm"></a>

            <code class="literal">end</code>
          </p><p>
            This occurs at the end but before the cleanup of
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>,
            <a class="link" href="create-view.html" title="13.1.23&nbsp;CREATE VIEW Statement"><code class="literal">CREATE VIEW</code></a>,
            <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a>,
            <a class="link" href="insert.html" title="13.2.7&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>,
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a>, or
            <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> statements.
          </p><p>
            For the <code class="literal">end</code> state, the following
            operations could be happening:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Writing an event to the binary log
              </p></li><li class="listitem"><p>
                Freeing memory buffers, including for blobs
              </p></li></ul></div></li><li class="listitem"><p>
            <a id="idm45828948460080" class="indexterm"></a>

            <a id="idm45828948458592" class="indexterm"></a>

            <code class="literal">executing</code>
          </p><p>
            The thread has begun executing a statement.
          </p></li><li class="listitem"><p>
            <a id="idm45828948455184" class="indexterm"></a>

            <a id="idm45828948453680" class="indexterm"></a>

            <code class="literal">Execution of init_command</code>
          </p><p>
            The thread is executing statements in the value of the
            <code class="literal">init_command</code> system variable.
          </p></li><li class="listitem"><p>
            <a id="idm45828948449488" class="indexterm"></a>

            <a id="idm45828948448000" class="indexterm"></a>

            <code class="literal">freeing items</code>
          </p><p>
            The thread has executed a command. This state is usually
            followed by <code class="literal">cleaning up</code>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948443840" class="indexterm"></a>

            <a id="idm45828948442352" class="indexterm"></a>

            <code class="literal">FULLTEXT initialization</code>
          </p><p>
            The server is preparing to perform a natural-language
            full-text search.
          </p></li><li class="listitem"><p>
            <a id="idm45828948438896" class="indexterm"></a>

            <a id="idm45828948437408" class="indexterm"></a>

            <code class="literal">init</code>
          </p><p>
            This occurs before the initialization of
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>,
            <a class="link" href="delete.html" title="13.2.2&nbsp;DELETE Statement"><code class="literal">DELETE</code></a>,
            <a class="link" href="insert.html" title="13.2.7&nbsp;INSERT Statement"><code class="literal">INSERT</code></a>,
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a>, or
            <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> statements. Actions
            taken by the server in this state include flushing the
            binary log and the <code class="literal">InnoDB</code> log.
          </p></li><li class="listitem"><p>
            <a id="idm45828948427024" class="indexterm"></a>

            <a id="idm45828948425536" class="indexterm"></a>

            <code class="literal">Killed</code>
          </p><p>
            Someone has sent a <a class="link" href="kill.html" title="13.7.8.4&nbsp;KILL Statement"><code class="literal">KILL</code></a>
            statement to the thread and it should abort next time it
            checks the kill flag. The flag is checked in each major loop
            in MySQL, but in some cases it might still take a short time
            for the thread to die. If the thread is locked by some other
            thread, the kill takes effect as soon as the other thread
            releases its lock.
          </p></li><li class="listitem"><p>
            <a id="idm45828948420544" class="indexterm"></a>

            <a id="idm45828948419056" class="indexterm"></a>

            <code class="literal">Locking system tables</code>
          </p><p>
            The thread is trying to lock a system table (for example, a
            time zone or log table).
          </p></li><li class="listitem"><p>
            <a id="idm45828948415584" class="indexterm"></a>

            <a id="idm45828948414096" class="indexterm"></a>

            <code class="literal">logging slow query</code>
          </p><p>
            The thread is writing a statement to the slow-query log.
          </p></li><li class="listitem"><p>
            <a id="idm45828948410672" class="indexterm"></a>

            <a id="idm45828948409184" class="indexterm"></a>

            <code class="literal">login</code>
          </p><p>
            The initial state for a connection thread until the client
            has been authenticated successfully.
          </p></li><li class="listitem"><p>
            <a id="idm45828948405712" class="indexterm"></a>

            <a id="idm45828948404224" class="indexterm"></a>

            <code class="literal">manage keys</code>
          </p><p>
            The server is enabling or disabling a table index.
          </p></li><li class="listitem"><p>
            <a id="idm45828948400800" class="indexterm"></a>

            <a id="idm45828948399312" class="indexterm"></a>

            <code class="literal">Opening system tables</code>
          </p><p>
            The thread is trying to open a system table (for example, a
            time zone or log table).
          </p></li><li class="listitem"><p>
            <a id="idm45828948395840" class="indexterm"></a>

            <a id="idm45828948394352" class="indexterm"></a>

            <code class="literal">Opening tables</code>
          </p><p>
            The thread is trying to open a table. This is should be very
            fast procedure, unless something prevents opening. For
            example, an <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a> or a
            <a class="link" href="lock-tables.html" title="13.3.6&nbsp;LOCK TABLES and UNLOCK TABLES Statements"><code class="literal">LOCK
            TABLE</code></a> statement can prevent opening a table until
            the statement is finished. It is also worth checking that
            your <a class="link" href="server-system-variables.html#sysvar_table_open_cache"><code class="literal">table_open_cache</code></a> value
            is large enough.
          </p><p>
            For system tables, the <code class="literal">Opening system
            tables</code> state is used instead.
          </p></li><li class="listitem"><p>
            <a id="idm45828948385824" class="indexterm"></a>

            <a id="idm45828948384336" class="indexterm"></a>

            <code class="literal">optimizing</code>
          </p><p>
            The server is performing initial optimizations for a query.
          </p></li><li class="listitem"><p>
            <a id="idm45828948380912" class="indexterm"></a>

            <a id="idm45828948379424" class="indexterm"></a>

            <code class="literal">preparing</code>
          </p><p>
            This state occurs during query optimization.
          </p></li><li class="listitem"><p>
            <a id="idm45828948376016" class="indexterm"></a>

            <a id="idm45828948374512" class="indexterm"></a>

            <code class="literal">preparing for alter table</code>
          </p><p>
            The server is preparing to execute an in-place
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948369824" class="indexterm"></a>

            <a id="idm45828948368336" class="indexterm"></a>

            <code class="literal">Purging old relay logs</code>
          </p><p>
            The thread is removing unneeded relay log files.
          </p></li><li class="listitem"><p>
            <a id="idm45828948364912" class="indexterm"></a>

            <a id="idm45828948363424" class="indexterm"></a>

            <code class="literal">query end</code>
          </p><p>
            This state occurs after processing a query but before the
            <code class="literal">freeing items</code> state.
          </p></li><li class="listitem"><p>
            <a id="idm45828948359280" class="indexterm"></a>

            <a id="idm45828948357792" class="indexterm"></a>

            <code class="literal">Receiving from client</code>
          </p><p>
            The server is reading a packet from the client.
          </p></li><li class="listitem"><p>
            <a id="idm45828948354384" class="indexterm"></a>

            <a id="idm45828948352896" class="indexterm"></a>

            <code class="literal">Removing duplicates</code>
          </p><p>
            The query was using
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT
            DISTINCT</code></a> in such a way that MySQL could not
            optimize away the distinct operation at an early stage.
            Because of this, MySQL requires an extra stage to remove all
            duplicated rows before sending the result to the client.
          </p></li><li class="listitem"><p>
            <a id="idm45828948348016" class="indexterm"></a>

            <a id="idm45828948346528" class="indexterm"></a>

            <code class="literal">removing tmp table</code>
          </p><p>
            The thread is removing an internal temporary table after
            processing a <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a>
            statement. This state is not used if no temporary table was
            created.
          </p></li><li class="listitem"><p>
            <a id="idm45828948341760" class="indexterm"></a>

            <a id="idm45828948340272" class="indexterm"></a>

            <code class="literal">rename</code>
          </p><p>
            The thread is renaming a table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948336880" class="indexterm"></a>

            <a id="idm45828948335392" class="indexterm"></a>

            <code class="literal">rename result table</code>
          </p><p>
            The thread is processing an <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER
            TABLE</code></a> statement, has created the new table, and is
            renaming it to replace the original table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948330672" class="indexterm"></a>

            <a id="idm45828948329184" class="indexterm"></a>

            <code class="literal">Reopen tables</code>
          </p><p>
            The thread got a lock for the table, but noticed after
            getting the lock that the underlying table structure
            changed. It has freed the lock, closed the table, and is
            trying to reopen it.
          </p></li><li class="listitem"><p>
            <a id="idm45828948325600" class="indexterm"></a>

            <a id="idm45828948324112" class="indexterm"></a>

            <code class="literal">Repair by sorting</code>
          </p><p>
            The repair code is using a sort to create indexes.
          </p></li><li class="listitem"><p>
            <a id="idm45828948320688" class="indexterm"></a>

            <a id="idm45828948319200" class="indexterm"></a>

            <code class="literal">Repair done</code>
          </p><p>
            The thread has completed a multithreaded repair for a
            <code class="literal">MyISAM</code> table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948315056" class="indexterm"></a>

            <a id="idm45828948313568" class="indexterm"></a>

            <code class="literal">Repair with keycache</code>
          </p><p>
            The repair code is using creating keys one by one through
            the key cache. This is much slower than <code class="literal">Repair by
            sorting</code>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948309360" class="indexterm"></a>

            <a id="idm45828948307872" class="indexterm"></a>

            <code class="literal">Rolling back</code>
          </p><p>
            The thread is rolling back a transaction.
          </p></li><li class="listitem"><p>
            <a id="idm45828948304464" class="indexterm"></a>

            <a id="idm45828948302976" class="indexterm"></a>

            <code class="literal">Saving state</code>
          </p><p>
            For <code class="literal">MyISAM</code> table operations such as
            repair or analysis, the thread is saving the new table state
            to the <code class="filename">.MYI</code> file header. State includes
            information such as number of rows, the
            <code class="literal">AUTO_INCREMENT</code> counter, and key
            distributions.
          </p></li><li class="listitem"><p>
            <a id="idm45828948297248" class="indexterm"></a>

            <a id="idm45828948295744" class="indexterm"></a>

            <code class="literal">Searching rows for update</code>
          </p><p>
            The thread is doing a first phase to find all matching rows
            before updating them. This has to be done if the
            <a class="link" href="update.html" title="13.2.17&nbsp;UPDATE Statement"><code class="literal">UPDATE</code></a> is changing the index
            that is used to find the involved rows.
          </p></li><li class="listitem"><p>
            <code class="literal">Sending data</code>
          </p><p>
            <span class="emphasis"><em>Prior to MySQL 8.0.17</em></span>: The thread is
            reading and processing rows for a
            <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> statement, and sending
            data to the client. Because operations occurring during this
            state tend to perform large amounts of disk access (reads),
            it is often the longest-running state over the lifetime of a
            given query. <span class="emphasis"><em>MySQL 8.0.17 and later</em></span>:
            This state is no longer indicated separately, but rather is
            included in the <code class="literal">Executing</code> state.
          </p></li><li class="listitem"><p>
            <a id="idm45828948285840" class="indexterm"></a>

            <a id="idm45828948284352" class="indexterm"></a>

            <code class="literal">Sending to client</code>
          </p><p>
            The server is writing a packet to the client.
          </p></li><li class="listitem"><p>
            <a id="idm45828948280944" class="indexterm"></a>

            <a id="idm45828948279456" class="indexterm"></a>

            <code class="literal">setup</code>
          </p><p>
            The thread is beginning an <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER
            TABLE</code></a> operation.
          </p></li><li class="listitem"><p>
            <a id="idm45828948274832" class="indexterm"></a>

            <a id="idm45828948273344" class="indexterm"></a>

            <code class="literal">Sorting for group</code>
          </p><p>
            The thread is doing a sort to satisfy a <code class="literal">GROUP
            BY</code>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948269232" class="indexterm"></a>

            <a id="idm45828948267744" class="indexterm"></a>

            <code class="literal">Sorting for order</code>
          </p><p>
            The thread is doing a sort to satisfy an <code class="literal">ORDER
            BY</code>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948263632" class="indexterm"></a>

            <a id="idm45828948262144" class="indexterm"></a>

            <code class="literal">Sorting index</code>
          </p><p>
            The thread is sorting index pages for more efficient access
            during a <code class="literal">MyISAM</code> table optimization
            operation.
          </p></li><li class="listitem"><p>
            <a id="idm45828948257952" class="indexterm"></a>

            <a id="idm45828948256464" class="indexterm"></a>

            <code class="literal">Sorting result</code>
          </p><p>
            For a <a class="link" href="select.html" title="13.2.13&nbsp;SELECT Statement"><code class="literal">SELECT</code></a> statement, this
            is similar to <code class="literal">Creating sort index</code>, but
            for nontemporary tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948251088" class="indexterm"></a>

            <a id="idm45828948249600" class="indexterm"></a>

            <code class="literal">starting</code>
          </p><p>
            The first stage at the beginning of statement execution.
          </p></li><li class="listitem"><p>
            <a id="idm45828948246176" class="indexterm"></a>

            <a id="idm45828948244688" class="indexterm"></a>

            <code class="literal">statistics</code>
          </p><p>
            The server is calculating statistics to develop a query
            execution plan. If a thread is in this state for a long
            time, the server is probably disk-bound performing other
            work.
          </p></li><li class="listitem"><p>
            <a id="idm45828948241104" class="indexterm"></a>

            <a id="idm45828948240032" class="indexterm"></a>

            <a id="idm45828948238544" class="indexterm"></a>

            <a id="idm45828948237056" class="indexterm"></a>

            <code class="literal">System lock</code>
          </p><p>
            The thread has called <code class="literal">mysql_lock_tables()</code>
            and the thread state has not been updated since. This is a
            very general state that can occur for many reasons.
          </p><p>
            For example, the thread is going to request or is waiting
            for an internal or external system lock for the table. This
            can occur when <a class="link" href="innodb-storage-engine.html" title="Chapter&nbsp;15&nbsp;The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> waits for
            a table-level lock during execution of
            <a class="link" href="lock-tables.html" title="13.3.6&nbsp;LOCK TABLES and UNLOCK TABLES Statements"><code class="literal">LOCK TABLES</code></a>. If this state is
            being caused by requests for external locks and you are not
            using multiple <a class="link" href="mysqld.html" title="4.3.1&nbsp;mysqld &mdash; The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> servers that are
            accessing the same <a class="link" href="myisam-storage-engine.html" title="16.2&nbsp;The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>
            tables, you can disable external system locks with the
            <a class="link" href="server-options.html#option_mysqld_external-locking"><code class="option">--skip-external-locking</code></a>
            option. However, external locking is disabled by default, so
            it is likely that this option has no effect. For
            <a class="link" href="show-profile.html" title="13.7.7.30&nbsp;SHOW PROFILE Statement"><code class="literal">SHOW PROFILE</code></a>, this state
            means the thread is requesting the lock (not waiting for
            it).
          </p><p>
            For system tables, the <code class="literal">Locking system
            tables</code> state is used instead.
          </p></li><li class="listitem"><p>
            <a id="idm45828948223440" class="indexterm"></a>

            <a id="idm45828948221952" class="indexterm"></a>

            <code class="literal">update</code>
          </p><p>
            The thread is getting ready to start updating the table.
          </p></li><li class="listitem"><p>
            <a id="idm45828948218528" class="indexterm"></a>

            <a id="idm45828948217040" class="indexterm"></a>

            <code class="literal">Updating</code>
          </p><p>
            The thread is searching for rows to update and is updating
            them.
          </p></li><li class="listitem"><p>
            <a id="idm45828948213600" class="indexterm"></a>

            <a id="idm45828948212112" class="indexterm"></a>

            <code class="literal">updating main table</code>
          </p><p>
            The server is executing the first part of a multiple-table
            update. It is updating only the first table, and saving
            columns and offsets to be used for updating the other
            (reference) tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948208512" class="indexterm"></a>

            <a id="idm45828948207008" class="indexterm"></a>

            <code class="literal">updating reference tables</code>
          </p><p>
            The server is executing the second part of a multiple-table
            update and updating the matched rows from the other tables.
          </p></li><li class="listitem"><p>
            <a id="idm45828948203472" class="indexterm"></a>

            <a id="idm45828948201984" class="indexterm"></a>

            <code class="literal">User lock</code>
          </p><p>
            The thread is going to request or is waiting for an advisory
            lock requested with a
            <a class="link" href="locking-functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> call. For
            <a class="link" href="show-profile.html" title="13.7.7.30&nbsp;SHOW PROFILE Statement"><code class="literal">SHOW PROFILE</code></a>, this state
            means the thread is requesting the lock (not waiting for
            it).
          </p></li><li class="listitem"><p>
            <a id="idm45828948195952" class="indexterm"></a>

            <a id="idm45828948194464" class="indexterm"></a>

            <code class="literal">User sleep</code>
          </p><p>
            The thread has invoked a
            <a class="link" href="miscellaneous-functions.html#function_sleep"><code class="literal">SLEEP()</code></a> call.
          </p></li><li class="listitem"><p>
            <a id="idm45828948189728" class="indexterm"></a>

            <a id="idm45828948188240" class="indexterm"></a>

            <code class="literal">Waiting for commit lock</code>
          </p><p>
            <a class="link" href="flush.html#flush-tables-with-read-lock"><code class="literal">FLUSH TABLES WITH READ LOCK</code></a>
            is waiting for a commit lock.
          </p></li><li class="listitem"><p>
            <a id="idm45828948183600" class="indexterm"></a>

            <a id="idm45828948182096" class="indexterm"></a>

            <code class="literal">waiting for handler commit</code>
          </p><p>
            The thread is waiting for a transaction to commit versus
            other parts of query processing.
          </p></li><li class="listitem"><p>
            <a id="idm45828948178592" class="indexterm"></a>

            <a id="idm45828948177104" class="indexterm"></a>

            <code class="literal">Waiting for tables</code>
          </p><p>
            The thread got a notification that the underlying structure
            for a table has changed and it needs to reopen the table to
            get the new structure. However, to reopen the table, it must
            wait until all other threads have closed the table in
            question.
          </p><p>
            This notification takes place if another thread has used
            <a class="link" href="flush.html#flush-tables"><code class="literal">FLUSH TABLES</code></a> or one of the
            following statements on the table in question:
            <code class="literal">FLUSH TABLES
            <em class="replaceable"><code>tbl_name</code></em></code>,
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>,
            <a class="link" href="rename-table.html" title="13.1.36&nbsp;RENAME TABLE Statement"><code class="literal">RENAME TABLE</code></a>,
            <a class="link" href="repair-table.html" title="13.7.3.5&nbsp;REPAIR TABLE Statement"><code class="literal">REPAIR TABLE</code></a>,
            <a class="link" href="analyze-table.html" title="13.7.3.1&nbsp;ANALYZE TABLE Statement"><code class="literal">ANALYZE TABLE</code></a>, or
            <a class="link" href="optimize-table.html" title="13.7.3.4&nbsp;OPTIMIZE TABLE Statement"><code class="literal">OPTIMIZE TABLE</code></a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948164480" class="indexterm"></a>

            <a id="idm45828948162992" class="indexterm"></a>

            <code class="literal">Waiting for table flush</code>
          </p><p>
            The thread is executing <a class="link" href="flush.html#flush-tables"><code class="literal">FLUSH
            TABLES</code></a> and is waiting for all threads to close
            their tables, or the thread got a notification that the
            underlying structure for a table has changed and it needs to
            reopen the table to get the new structure. However, to
            reopen the table, it must wait until all other threads have
            closed the table in question.
          </p><p>
            This notification takes place if another thread has used
            <a class="link" href="flush.html#flush-tables"><code class="literal">FLUSH TABLES</code></a> or one of the
            following statements on the table in question:
            <code class="literal">FLUSH TABLES
            <em class="replaceable"><code>tbl_name</code></em></code>,
            <a class="link" href="alter-table.html" title="13.1.9&nbsp;ALTER TABLE Statement"><code class="literal">ALTER TABLE</code></a>,
            <a class="link" href="rename-table.html" title="13.1.36&nbsp;RENAME TABLE Statement"><code class="literal">RENAME TABLE</code></a>,
            <a class="link" href="repair-table.html" title="13.7.3.5&nbsp;REPAIR TABLE Statement"><code class="literal">REPAIR TABLE</code></a>,
            <a class="link" href="analyze-table.html" title="13.7.3.1&nbsp;ANALYZE TABLE Statement"><code class="literal">ANALYZE TABLE</code></a>, or
            <a class="link" href="optimize-table.html" title="13.7.3.4&nbsp;OPTIMIZE TABLE Statement"><code class="literal">OPTIMIZE TABLE</code></a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948149056" class="indexterm"></a>

            <a id="idm45828948147552" class="indexterm"></a>

            <a id="idm45828948146048" class="indexterm"></a>

            <a id="idm45828948144544" class="indexterm"></a>

            <a id="idm45828948143040" class="indexterm"></a>

            <a id="idm45828948141536" class="indexterm"></a>

            <a id="idm45828948140016" class="indexterm"></a>

            <a id="idm45828948138496" class="indexterm"></a>

            <a id="idm45828948136976" class="indexterm"></a>

            <a id="idm45828948135456" class="indexterm"></a>

            <a id="idm45828948133952" class="indexterm"></a>

            <a id="idm45828948132448" class="indexterm"></a>

            <a id="idm45828948130944" class="indexterm"></a>

            <a id="idm45828948129440" class="indexterm"></a>

            <a id="idm45828948127936" class="indexterm"></a>

            <code class="literal">Waiting for <em class="replaceable"><code>lock_type</code></em>
            lock</code>
          </p><p>
            The server is waiting to acquire a
            <code class="literal">THR_LOCK</code> lock or a lock from the metadata
            locking subsystem, where
            <em class="replaceable"><code>lock_type</code></em> indicates the type of
            lock.
          </p><p>
            This state indicates a wait for a
            <code class="literal">THR_LOCK</code>:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">Waiting for table level lock</code>
              </p></li></ul></div><p>
            These states indicate a wait for a metadata lock:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">Waiting for event metadata lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for global read lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for schema metadata lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for stored function metadata
                lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for stored procedure metadata
                lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for table metadata lock</code>
              </p></li><li class="listitem"><p>
                <code class="literal">Waiting for trigger metadata lock</code>
              </p></li></ul></div><p>
            For information about table lock indicators, see
            <a class="xref" href="internal-locking.html" title="8.11.1&nbsp;Internal Locking Methods">Section&nbsp;8.11.1, &ldquo;Internal Locking Methods&rdquo;</a>. For information about
            metadata locking, see <a class="xref" href="metadata-locking.html" title="8.11.4&nbsp;Metadata Locking">Section&nbsp;8.11.4, &ldquo;Metadata Locking&rdquo;</a>. To
            see which locks are blocking lock requests, use the
            Performance Schema lock tables described at
            <a class="xref" href="performance-schema-lock-tables.html" title="27.12.13&nbsp;Performance Schema Lock Tables">Section&nbsp;27.12.13, &ldquo;Performance Schema Lock Tables&rdquo;</a>.
          </p></li><li class="listitem"><p>
            <a id="idm45828948105712" class="indexterm"></a>

            <a id="idm45828948104224" class="indexterm"></a>

            <code class="literal">Waiting on cond</code>
          </p><p>
            A generic state in which the thread is waiting for a
            condition to become true. No specific state information is
            available.
          </p></li><li class="listitem"><p>
            <a id="idm45828948100704" class="indexterm"></a>

            <a id="idm45828948099216" class="indexterm"></a>

            <code class="literal">Writing to net</code>
          </p><p>
            The server is writing a packet to the network.
          </p></li></ul></div></div><div class="navigation"><ul><li class="navLinkPrevious"><a title="Go To Previous Page" href="thread-commands.html">Previous <span class="navHint"> Thread Command Values </span></a></li><li class="navLinkHome"><a title="Go To Home Page" href="performance-schema">Home <span class="navHint"> MySQL 8.0 Reference Manual Including MySQL NDB Cluster 8.0 </span></a></li><li class="navLinkUp"><a title="Go Up A Level In The Navigation" href="thread-information.html">Up <span class="navHint"> Examining Server Thread (Process) Information </span></a></li><li class="navLinkNext"><a title="Go To Next Page" href="source-thread-states.html">Next <span class="navHint"> Replication Source Thread States </span></a></li></ul></div><div class="dochomelink-footer"><a title="Go to MySQL Doc Library" href="https://docs.oracle.com/cd/E17952_01/index.html">
        MySQL Documentation Library
      </a></div><div class="copyright-footer"></div></body></html>